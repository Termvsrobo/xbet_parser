!function(r){var a,n,o=/^.*\/(?:betting\/|popular\/|zeromarginevents\/|all-events|top-events\.htm|events\.htm)/;function i(e,t,a){return Collapsible.PrematchPopularCategoriesProcessor("[data-events-container-type="+e+"]",t,a,function(){return initData.base_dir+"/events/expand-popular-category.htm?"+r.URLCodec.fromObject(c(e))})}function c(e){var t=r.Page.getSearchParams();return t.treeIds=initData.treeIds,t.interval=function(){if(reactData.prematchPageModel&&reactData.prematchPageModel.prematchFilterModel&&reactData.prematchPageModel.prematchFilterModel.intervalsFilter)return r.Page.getSearchParams().interval||reactData.prematchPageModel.prematchFilterModel.intervalsFilter.selectedIntervalId}(),t.venuesEventType=initData.venuesEventType,t.day=initData.day,t.events=initData.events,t.popularType=e,u(r.Page.location().href)&&(t.zeromargin=!0),t}function l(e){return r("#events_content").html("").hide(),window.dispatchEvent(new CustomEvent("loadingEventContent.show")),s(e).updateContent(function(){r("#events_content").show()}).always(function(){window.dispatchEvent(new CustomEvent("loadingEventContent.hide"))})}function s(e){return e("default",{dataType:"json"}).updateContent(function(e){for(var t,a=0;a<e.length;a++){var n=e[a];n.selector?r(n.selector)["inner"===n.replace?"html":"replaceWith"](n.content):n.prop&&"defaultPagePartsData"===n.prop&&(n=n.val,t=void 0,document.title=n.windowTitle,r("link[rel=canonical]").attr("href",n.canonicalHref),r("meta[name=description]").attr("content",n.description),(t=r("body"))[n.sportCategoryRequested?"addClass":"removeClass"]("prematch-sport-page"),t["SINGLE_EVENT"===n.eventPageType?"addClass":"removeClass"]("prematch-single-event-page"),t["VENUES_EVENTS"===n.eventPageType?"addClass":"removeClass"]("venues-prematch-page"),t[n.isShowDaysFilter?"addClass":"removeClass"]("with-venues-filter"),t.attr("data-betselection-container",n.betSelectionRootContainer),r("[data-events-page-label]")[n.label?"removeClass":"addClass"]("hidden").html(n.label),initData.treeIds=n.treeIds,initData.venuesEventType=n.venuesEventType,initData.day=n.day,initData.events=n.events,initData.eventPageType=n.eventPageType,reactData.eventScheduleFilter=n.eventScheduleFilter,reactData.prematchPageModel=n.prematchPageModel,Emitter.emit("reactData.updated"))}}).done(function(){window.getVirtualScrollingHelper().update(),t().then(function(){r(document).trigger("content.loaded"),window.Emitter.emit("content.loaded")})})}function d(a,n){var e,t;o.test(a)&&o.test(r.Page.location().href)?(e=r(this).parents("[data-prematch-menu-item]:first"),t=r.PanbetLoadingStatus.setOn(e),l(function(e,t){return n&&(t=r.extend({},t,n)),r.Page.location(a,e,t)}).done(function(){r(document).trigger("scrollToTop"),u(r.Page.location().href)&&showZeroMarginAgreementsDialogIfRequired()}).always(function(){t.remove()})):r.Page.location().href=a}function p(e){return/top-events\.htm/.test(e)}function u(e){return/zeromarginevents\//.test(e)}function t(){a=p(r.Page.location().href)?Collapsible.Manager(i("POPULAR","eppcids","cppcids"),i("SUPER_POPULAR","esppcids","csppcids"),i("TOP","etpcids","ctpcids"),i("SUPER_TOP","estpcids","cstpcids")):Collapsible.Manager(Collapsible.PrematchCategoriesProcessor(function(){return initData.base_dir+"/events/"+(initData.venuesEventType?"expand-category-day-menu":"expand-category")+".htm?"+r.URLCodec.fromObject(c())})),n=Collapsible.Manager(Collapsible.PrematchSportsProcessor(function(){return initData.base_dir+"/events/"+(p(r.Page.location().href)?"expand-popular-sport":"expand-sport")+".htm?"+r.URLCodec.fromObject(c())}));var e,t=r.Deferred().resolve();return(/all-events/.test(r.Page.location().href)||p(r.Page.location().href))&&(((e=Collapsible.urlSearchStateStorage.getState()).cpcids||[]).length||(e.epcids||[]).length||(e.cpcids="all"),(e.cppcids||[]).length||(e.eppcids||[]).length||(e.cppcids="all"),t=Collapsible.urlSearchStateStorage.replaceState(e)),t.then(a.update).then(n.update)}function e(e,t){r("[data-scrollable-container]").scrollTop(0),e.allStateChange(t,function(){return s(function(e,t){return r.Page.location(r.Page.location().href,e,t)})}).done(function(){r("[data-scrollable-container]").scrollTop(0)}).always(function(){h()})}function g(e,t){return!("true"!=e||"SINGLE_EVENT"===initData.eventPageType&&!r.Page.getSearchParams().fullCategoryIds||(d(initData.base_dir+"/betting/"+r("[data-event-treeid="+t+"]:first").data("eventPath"),makeCacheableAjaxRequestSettings()),0))}function h(){var e=r("[data-venues-category-header]");0<r(e).length&&(e=r(e).parents("[data-sport-treeid]").hasClass("collapsed"),r(document).trigger("categoryheader.collapsed",[{state:!e}]),r("[data-category-treeid]")[e?"hide":"show"]())}r.Links.click(/\/(betting\/|popular\/|zeromarginevents\/|all-events|top-events\.htm)/,function(e){return d(e.href),!1}),r.Page.on("popstate",function(e,t){l(function(e,t){return r.Page.reload(e,t)}).done(function(){r("[data-scrollable-container]").scrollTop(0)})}),r(document).on("click","[data-collapsible] [data-collapsible-clickable-surface]",function(){var e=r(this).parents("[data-collapsible]:first"),t=e.data("sportTreeid");return(t?n:a).toggle(e).then(function(){return t?a.update():r.Deferred().resolve().promise()}).done(function(){window.getVirtualScrollingHelper().update()}),!1}),r(document).on("change","[name=collapseAllCategoriesCheckbox]",function(){return e(a,r(this).prop("checked")),!1}),r(document).on("click","[data-collapse-all-categories-link]",function(){var e=r("[name=collapseAllCategoriesCheckbox]");e.prop("checked",!e.prop("checked")).trigger("change")}),r(document).on("change","[name=collapseAllSportsCheckbox]",function(){return e(n,r(this).prop("checked")),!1}),r(document).on("click","[data-collapse-all-sports-link]",function(){var e=r("[name=collapseAllSportsCheckbox]");e.prop("checked",!e.prop("checked")).trigger("change")}),r(document).on("click","[data-category-events-link]",function(){return FullCategoryManager.prematchToggle(this,c()).done(function(){window.Emitter.emit("content.loaded")}),!1}),r(document).on("markets.members.click",function(e,t){t.preventDefault=g(PrefStorage.get(initData.openEventNameSeparatelyCookieName),t.treeId)}),r(document).on("markets.event-more-view.click",function(e,t){t.preventDefault=g(PrefStorage.get(initData.openAddMarketsSeparatelyCookieName),t.treeId)}),r(document).on("venuesStore.selectedVenues.changed",function(e,t){var a;t&&(a=r.URLCodec.parse(r.Page.location().href),r.URLCodec.updateSearchParams(a,function(e){return t.day&&(e.day=t.day),t.events&&(t.events.length?e.events=t.events.toString():delete e.events),e}),l(function(){return r.Page.location(a.href,"default",{dataType:"json"})}).done(function(){r("[data-scrollable-container]").scrollTop(0)}))}),r(document).on("click","[data-venues-category-header]",function(){return h(),!1}),r(document).on("click",".js-arrow, .js-nav-event-link",function(){var e=r(this).parents("table:first");e.hasClass("loading")||(e.addClass("loading"),r(this).hasClass("js-arrow")&&d(e.find(".js-nav-event-link").attr("href")))}),window.addEventListener("prematchFilter.change",function(n){if(n&&n.detail)return l(function(e,t){var a=r.Page.getSearchParams();return a.interval=n.detail.intervalId,a.fullCategoryIds=void 0,a.zeroMarginFullCategoryIds=void 0,"ALL_EVENTS"===initData.eventPageType?r.Page.location(initData.base_dir+"/all-events/"+(n.detail.treeIds||[]).join(",")+"?"+r.URLCodec.fromObject(a),e,t):r.Page.location({search:r.URLCodec.fromObject(a)},e,t)}).done(function(){r("[data-scrollable-container]").scrollTop(0)});throw new Error("Wrong 'prematchFilter.change' event. "+n)});var v={Init:function(){t().then(function(){u(r.Page.location().href)&&showZeroMarginAgreementsDialogIfRequired()})}};window.getEventsPageHelper=function(){return v}}(window.jQuery);
//# sourceMappingURL=EventsPageHelperClass.map