var TAB_UUID_SESSION_STORAGE_KEY="tabUuid";function generateAndSaveTabUuid(){window.sessionStorage.getItem(TAB_UUID_SESSION_STORAGE_KEY)?(window[TAB_UUID_SESSION_STORAGE_KEY]=window.sessionStorage.getItem(TAB_UUID_SESSION_STORAGE_KEY),window.sessionStorage.removeItem(TAB_UUID_SESSION_STORAGE_KEY)):window[TAB_UUID_SESSION_STORAGE_KEY]=Math.random().toString(36).slice(2),window.addEventListener("beforeunload",function(e){window[TAB_UUID_SESSION_STORAGE_KEY]&&window.sessionStorage.setItem(TAB_UUID_SESSION_STORAGE_KEY,window[TAB_UUID_SESSION_STORAGE_KEY])})}function getCurrentTabUuid(){return window[TAB_UUID_SESSION_STORAGE_KEY]}function $$(){for(var e=new Array,t=0,n=arguments.length;t<n;t++){var a=arguments[t];if("string"==typeof a&&(a=document.getElementById(a)),1==n)return a;e.push(a)}return e}function pad(e){return e<10?"0"+e:e.toString()}function getValue(e){return e.options[e.selectedIndex].value}function parseMoneyString(e){e=e.replace(",","");return parseFloat(e)}function filterTopLinks(e){for(var e=e||"main_container",t=$("#"+e).find("._top"),n=0,a=0,i=t.length;a<i;a++){var o=$(t[a]),r=o.position().top;500<r-n&&(o.css("visibility","visible"),o.addClass(" top"),n=r)}}function closeMessengerNote(e){$("#"+e).css("display","none")}function isPage(e){var t=document.location.pathname;return-1!==t.indexOf(e,t.length-e.length)}function panbetValidate(e,t){var n,a,i,t=t||{};return t.ignore="",t.messages=PanbetBaseMessages,t.onfocusout||(t.onfocusout=function(e){var e=$(e);(e.is("[data-name=nickname]")||e.is("[name=nickname]"))&&(e.valid(),(e=$(this.currentForm).find("[name=authtype]")).length)&&e.valid()}),t.onclick=function(e){var t,e=$(e);(e.is("[name=authtype]")||e.is("[data-name=authtype]"))&&(e.valid(),(t=$(this.currentForm).find("[name=nickname], [data-name=nickname]")).length)&&t.valid(),(e.is("[name=municipalityItaly]")||e.is("[data-name=municipalityItaly]"))&&e.val()&&e.valid(),e.is("[type='checkbox']")&&e.valid()},t.onkeyup=function(e,t){void 0!==t.keyCode&&13==t.keyCode||(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),(t=$(e).closest("[data-datepicker]")).length&&(e=$("input[type=hidden]",t).get(0)),this.addWrapper(this.errorsFor(e)).hide())},t.highlight=function(e,t,n){var a=$(e).closest("[data-datepicker]");switch((e=a.length?$("input[type=hidden], input[type=text]",a).add(a):e).id){case"number_document":var i=$("#"+e.id+"_valid");i.length&&i.addClass("hidden");break;case"documentIssueValidationDateField":$("#form_documentIssueDay, #form_documentIssueMonth, #form_documentIssueYear").addClass(t).removeClass(n);break;case"documentExpiryValidationDateField":$("#form_documentExpiryDay, #form_documentExpiryMonth, #form_documentExpiryYear").addClass(t).removeClass(n)}($(e).is("[name=nickname]")||$(e).is("[data-name=nickname]"))&&(a=_.find(this.errorList,function(e){return $(e.element).is("[data-name=nickname]")||$(e.element).is("[name=nickname]")}))&&("nicknameAvailable"===a.method?getJoinHelper().createAvailableNicknamesMenu($(e)):getJoinHelper().removeAvailableNicknamesMenu($(e))),$(e).addClass(t).removeClass(n)},t.unhighlight=function(e,t,n){var a=$(e).closest("[data-datepicker]");switch((e=a.length?$("input[type=hidden], input[type=text]",a).add(a):e).id){case"number_document":var i=$("#"+e.id+"_valid");0==i.length&&(i=$("<label></label>").attr("id",e.id+"_valid").addClass("valid"),$(e).after(i)),i.html("&#10004;").removeClass("hidden");break;case"documentIssueValidationDateField":$("#form_documentIssueDay, #form_documentIssueMonth, #form_documentIssueYear").removeClass(t).addClass(n);break;case"documentExpiryValidationDateField":$("#form_documentExpiryDay, #form_documentExpiryMonth, #form_documentExpiryYear").removeClass(t).addClass(n)}$(e).is("[data-show-validation-error-in-tooltip][data-hasqtip]")&&$(e).qtip().hide(),($(e).is("[data-name=nickname]")||$(e).is("[name=nickname]"))&&getJoinHelper().removeAvailableNicknamesMenu($(e)),$(e).removeClass(t).addClass(n)},t.errorPlacement||(t.errorPlacement=function(e,t){var n;"captcha"===t.attr("name")?t.parents("[data-captcha]:first").append(e):(n=t.parent().find("[data-validation-error-after]")).length?n.first().html(e):t.is("[data-show-validation-error-in-tooltip]")?t.PanbetTooltip("tooltipForValidationError",e.text()):t.is("[type=radio]")?e.insertAfter(t.parent()):e.insertAfter(t)}),(isPage(PAGES.JOIN)||isPage(PAGES.CHANGE_PASSWORD)||isPage(PAGES.ACCOUNT_CHANGE_PASSWORD))&&(t.onkeyup=function(e,t){$(e).is("[data-name=nickname], [name=nickname]")&&this.settings.unhighlight?this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass):$(e).is("[name=password], [type=password], [data-password=true]")&&9!==t.keyCode&&$(e).valid()},t.onfocusout=function(e){$(e).valid()},0<(n=e.find("[data-name=password]:visible, [name=password]:visible")).length&&((a=e.find("[data-name=confirmpassword]:visible, [name=confirmpassword]:visible")).length&&n.on("input",function(){a.val().length&&a.valid()}),(initData.personalDataForbiddenInPassword||initData.checkUsedLastPasswords)&&(e.find("[name=firstname], [name=middlename], [name=surname], [name=birthday], [name=aemail]").on("change",function(){0<n.val().length&&n.valid()}),initData.jForm||(initData.jForm=e,initData.passwordErrors=[])),i=a.attr("data-id"))&&n.add(a).on("input blur",function(){e.find("#"+i+"-error").hide()}),t.rules=$.extend({},t.rules||{},{number_document:{validDocumentNumber:!0}})),isPage(PAGES.JOIN)&&initData.checkEmailEnabled&&(t.rules=$.extend({},t.rules||{},{aemail:{remote:{url:initData.checkEmailActionUrl,type:"post"}}})),(isPage(PAGES.PROTECTION)||isPage(PAGES.CREATE_CASH_SOURCE))&&(initData.isItaly||initData.isDenmark)&&(t.onfocusout=function(e){$(e).valid()}),t.rules=$.extend({},t.rules||{},{confirmpassword:{required:!0,comparedFields:"[data-name=password]:visible, [name=password]:visible"},aemail2:{comparedFields:"#form_aemail"},birthdayValidationDateField:{checkAge:!0},documentIssueValidationDateField:{dateInPast:!0},documentExpiryValidationDateField:{dateInFuture:!0},nickname:{nicknameAndAuthType:!0,nicknameAvailable:!0},authtype:{checkAuthType:!0},dailyDepositLimit:{digitValueValid:!0},weeklyDepositLimit:{digitValueValid:!0},monthlyDepositLimit:{digitValueValid:!0},deposit_limit_daily_field:{playerProtectionBaseValueValid:initData.isItaly||initData.isDenmark,playerProtectionValueNotStartZero:initData.isItaly||initData.isDenmark},deposit_limit_weekly_field:{playerProtectionBaseValueValid:initData.isItaly||initData.isDenmark,playerProtectionValueNotStartZero:initData.isItaly||initData.isDenmark},deposit_limit_monthly_field:{playerProtectionBaseValueValid:initData.isItaly||initData.isDenmark,playerProtectionValueNotStartZero:initData.isItaly||initData.isDenmark},buildingnumber:{validNoBankCardNumberInField:initData.isItaly||initData.isSpain},address1:{validNoBankCardNumberInField:initData.isSpain||initData.isDenmark||initData.isBelarus},ccsanswer:{remote:{depends:function(){return $("#form_ccsecquestions").find(":selected").data("needValidation")},param:{type:"POST",url:initData.checkSecretAnswerUrl,data:{questionId:function(){return $("#form_ccsecquestions").val()||""},questionAnswer:function(){return $("#form_ccsanswer").val()||""},phone:function(){return $("#form_maskedPhone").val()||""},postcode:function(){return $("#form_postcode").val()||""},birthDate:function(){return $("#birthday").val()||""}}}}}}),e.validate(t)}function panbetModal(e,t){(t=t||{}).position=["20%"],e.modal(t)}function showMessage(e,t,n){e=$("#"+e);null!=t&&e.find("P._message").html(t),panbetModal(e,n)}function showMessageInQueue(e,t,n){e=$("#"+e);null!=t&&e.find("P._message").html(t),e.addModalToViewQueue(n)}function showLegalAgreementDialog(e){!initData.showPunterLegalAgreementPopup&&!e&&1||($.modal.close(),window.Emitter.emit("modal.open",{type:"LEGAL_AGREEMENT"}))}function showLoginDialog(e,t){$.modal.close(),initData.isDenmark?window.Emitter.emit("mitId.openLoginModal",e):(e&&e.showDialogReason&&"NONE"!==e.showDialogReason&&"PROMOCODE"!==e.showDialogReason&&(e.prevErrorMessage="IP_CHANGED"===e.showDialogReason?window.PanbetConst.Messages.IP_CHANGED_LOGIN_DIALOG_MESSAGE:PanbetConst.Messages.LOGOUT_BY_SESSION_CLOSED_MESSAGE),window.Emitter.emit("modal.open",{type:"LOGIN",props:e,onClose:t}))}function showFillingPersonalDetailsDialog(e,t,n){window.Emitter.emit("modal.open",{type:"FILLING_PERSONAL_DETAILS_DIALOG",props:{callback:e,errorCode:t,source:n},multiple:!0})}function showPunterRegulationAlertDialog(e){window.Emitter.emit("modal.open",{type:"PUNTER_REGULATION_ALERT",props:{callback:e},multiple:!0})}function showJoinDialog(e){initData.joinInDialogEnabled&&(window.Emitter.emit("modal.close"),window.Emitter.emit("modal.open",{type:"JOIN",onOpen:()=>e?.opened?.(),onClose:()=>e?.closed?.(),overlayClass:"join-dialog__overlay"}))}function showZeroMarginAgreementsDialogIfRequired(){!initData.isAlderney&&!initData.isDenmark||SessionStorage.has("zeroMarginAgreementsDialog")||window.Emitter.emit("modal.open",{type:"ZERO_MARGIN_AGREEMENTS_DIALOG"})}function showProgressModal(){PROGRESS_DIALOG.show()}function hideProgressModal(){PROGRESS_DIALOG.hide()}function closeModal(){PROGRESS_DIALOG.hide(),$.modal.close()}function showModalDialogById(){showMessage($(this).data("show-modal-dialog-by-id"))}!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),function(){var o=!1,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){var t,i=this.prototype,n=(o=!0,new this);for(t in o=!1,e)n[t]="function"==typeof e[t]&&"function"==typeof i[t]&&r.test(e[t])?function(n,a){return function(){var e=this._super,t=(this._super=i[n],a.apply(this,arguments));return this._super=e,t}}(t,e[t]):e[t];function a(){!o&&this.init&&this.init.apply(this,arguments)}return a.prototype=n,(a.constructor=a).extend=arguments.callee,a}}(),function(){try{if(Log)return}catch(e){}function r(){var a={TRACE:65536,DEBUG:4096,INFO:256,WARN:16,ERROR:1,DISABLED:0},i={},o=initData&&initData.isTestMode?a.DEBUG:a.WARN;try{void 0!==window.console&&$.each(["trace","debug","info","warn","error"],function(e,t){void 0!==window.console[t]?n(t,t):void 0!==window.console.log&&n(t,"log")})}catch(e){}function n(e,t){var n,a;"object"!=typeof window.console[e]?i[e.toUpperCase()]=(a=t,function(){window.console[a].apply(window.console,arguments)}):i[e.toUpperCase()]=(n=t,function(e){Function.prototype.call.call(window.console[n],window.console,e)})}function e(e,t){return t<=e}function t(e,t){var n=i[e];if(n&&a[e]<=o){try{return void n.apply(this,t)}catch(e){}try{n(t)}catch(e){}}}return{TRACE:a.TRACE,DEBUG:a.DEBUG,INFO:a.INFO,WARN:a.WARN,ERROR:a.ERROR,DISABLED:a.DISABLED,trace:function(){t("TRACE",arguments)},debug:function(){t("DEBUG",arguments)},info:function(){t("INFO",arguments)},warn:function(){t("WARN",arguments)},error:function(){t("ERROR",arguments)},setLogLevel:function(e){o=e},setLevelDisabled:function(){this.setLogLevel(this.DISABLED)},setLevelTrace:function(){this.setLogLevel(this.TRACE)},setLevelDebug:function(){this.setLogLevel(this.DEBUG)},setLevelInfo:function(){this.setLogLevel(this.INFO)},setLevelWarn:function(){this.setLogLevel(this.WARN)},setLevelError:function(){this.setLogLevel(this.ERROR)},isDisabled:function(){return o==this.DISABLED},isTraceEnabled:function(){return e(o,this.TRACE)},isDebugEnabled:function(){return e(o,this.DEBUG)},isInfoEnabled:function(){return e(o,this.INFO)},isWarnEnabled:function(){return e(o,this.WARN)},isErrorEnabled:function(){return e(o,this.ERROR)},getLogLevel:function(){return o},getLogger:function(e,t){return e?(t||s[e]||(s[e]=new r),s[e]):s.GLOBAL}}}var s={GLOBAL:new r};window.Log=s.GLOBAL}(),showWarnDialog=function(e){$("#"+e).modal({position:["20%"]}),$("#"+e).find(".no").trigger("focus")},Function.prototype.bind||(Function.prototype.bind=function(e){var t,n;return arguments.length<2&&void 0===e?this:(t=this,(n=Array.prototype.slice.call(arguments)).shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))})}),PAGES={JOIN:"join.htm",ID_UPLOAD:"idupload.htm",FORGOTTEN_PASSWORD:"forgottenpassword.htm",CHANGE_PASSWORD:"changepassword.htm",ACCOUNT_CHANGE_PASSWORD:"myaccount/password.htm",PROTECTION:"myaccount/protection.htm",CREATE_CASH_SOURCE:"myaccount/createpaymentsource.htm"},$(document).on("blur","#form_maskedPhone",function(){panbetValidate($(this))}),function(){var n=[];jQuery.fn.extend({addModalToViewQueue:function(e){var t;this.length&&(t=(e=e||{}).onClose,e.onClose=function(){var e;"function"==typeof t?t():this.close(),n.shift(),0<n.length&&panbetModal((e=n[0]).element,e.settings)},n.push({element:this,settings:e}),1==n.length)&&(closeModal(),panbetModal(this,e))}})}(),PROGRESS_DIALOG=function(){var e=!1;return{show:function(){e||($("#progress_dialog").addModalToViewQueue({position:["20%"]}),e=!0)},hide:function(){e&&($.modal.close(),e=!1)}}}();var WebLocalStorage,BetslipChoiceManager,BetslipStorageFacade,browserUA="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),BROWSER={isIE:browserUA&&/msie|trident/.test(browserUA),isEdge:browserUA&&0<browserUA.indexOf("edge/"),isAndroid:browserUA&&0<browserUA.indexOf("android"),isIOS:browserUA&&/iphone|ipad|ipod|ios/.test(browserUA),isChrome:browserUA&&/chrome\/\d+/.test(browserUA)&&browserUA.indexOf("edge/")<0,isSafari:browserUA&&/safari/.test(browserUA)&&!/chrome/.test(browserUA),isFirefox:browserUA&&/firefox/.test(browserUA)};function convertCurrency(e,t,n){n=$$(n);-1!=n.className.indexOf("error")?$$(e).innerHTML="":(t=(t=$$(t)).options[t.selectedIndex].value.split("-"),$$(e).innerHTML=t[1]+" "+Math.round(t[2]*n.value*100)/100)}function trimFields(){jQuery("input[type='text']").on("focusout",function(){var e=(this.value||"").trim();jQuery(this).val(e)})}function getUrlVars(){for(var e,t={},n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<n.length;a++)t[(e=n[a].split("="))[0]]=e[1];return t}function getUrlVar(e){return getUrlVars()[e]}function contains(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function queryString(){for(var e={},t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var a,i=t[n].split("=");void 0===e[i[0]]?e[i[0]]=i[1]:"string"==typeof e[i[0]]?(a=[e[i[0]],i[1]],e[i[0]]=a):e[i[0]].push(i[1])}return e}function isWideScreen(){var e,t=!0,n=$('[data-id="container_EVENTS"]');try{$(".sidebar-right").is(":visible")||(t=$(".categories").offset()?$(".categories").offset().left+$(".categories").outerWidth()<$("#betslip-content").offset().left:n.offset()?(e=(e=$(".prematch-panel-visible").length?$("#prematchPanelContainer"):$("#livePanelContainer")).length?e:n).offset().left+e.outerWidth()<$("#betslip-content").offset().left:$(".category-container").offset().left+$(".category-container").outerWidth()<$("#betslip-content").offset().left)}catch(e){}return t}function getHttpsUrl(e){return!initData.isTestMode&&e.length&&-1==e.indexOf("https://")?-1!=e.indexOf("http://")?e.replace(/^http:\/\//i,"https://"):initData.httpsPort?"https://"+window.location.host+":"+initData.httpsPort+e:"https://"+window.location.host+e:e}function openPersonalDetails(){location.href=initData.personalDetailsPageUrl}function applyFavorites(e){return window.EventFavorites?window.EventFavorites.applyFavorites(e):e}function makeCacheableAjaxRequestSettings(e){return $.extend(!0,{},e,{cache:!0,data:{siteStyle:initData.siteStyle,oddsType:initData.oddsType,timeZone:initData.timeZoneId}})}function extractSum(e,t,n){var a=(a=e.value).replace(",",""),i="[0-9]*";0<t?i+="\\.?[0-9]{0,"+t+"}":t<0&&(i+="\\.?[0-9]*"),i=n?"^-?"+i:"^"+i,i+="$",new RegExp(i).test(a)&&0==a.indexOf(".")&&(a="0"+a);var o,i=new RegExp("[^0-9"+(0!=t?".":"")+(n?"-":"")+"]","g");i.test(a)&&(a=a.replace(i,"")),n&&(i=0<a.length&&"-"==a.charAt(0),(n=/-/g).test(a)&&(a=a.replace(n,"")),i)&&(a="-"+a),0!=t&&null!=(i=(n=/\./g).exec(a))&&(o=(o=a.substring(i.index+i[0].length)).replace(n,""),o=0<t?o.substring(0,t):o,a=a.substring(0,i.index)+"."+o),""!==(a=0==a.indexOf(".")?"0"+a:a)&&e.prev&&(n=parseFloat(a),isNaN(n)||Betslip.STAKE_LIMIT<n)&&(a=e.prev,e.prev=!1),e.value!=a&&(e.value=a)}function checkPaste(e,t,n,a,i){var o,r=e.value,t=t.clipboardData&&t.clipboardData.getData?t.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");return!t||(o=(e=getSelectionRange(e)).start,e=e.end,checkValue(r=0<=o&&0<=e?r.substring(0,o)+t+r.substring(e,r.length):r,n,a,i))}function checkChar(e,t,n,a,i){var o,r,s,l,c=!1,d=!1,u=e.value;return window.event?(c=window.event.shiftKey,d=window.event.ctrlKey,o=t.keyCode):(t.which||t.keyCode)&&(c=t.shiftKey,d=t.ctrlKey,o=t.which||t.keyCode),!!isNaN(o)||(t=8==o,s=46==o,!hasValue(o))||t||s||(t=String.fromCharCode(o),s=!!a&&t&&"-"==t&&-1==u.indexOf("-"),r=!!n&&t&&"."==t&&-1==u.indexOf("."),c=c&&45==o||d&&("v"==t||"V"==t),s||r||t&&/[\d,]+/.test(t)?(o=u.length,r=(s=getSelectionRange(e)).start,s=s.end,(l=0<=r&&0<=s)&&r<s||(l&&r===s&&r<o?u=u.substring(0,r)+t+u.substring(s,o):u+=t,checkValue(u,n,a,i))):c?""===(u=e.value)||!!checkValue(u,n,a,i)&&(e.prev=u,!0):!!d)}function checkValue(e,t,n,a){if(new RegExp("[^0-9"+(t&&0!=a?".":"")+(n?"-":"")+"]","g").test(e))return!1;if(a&&0<a){t=/\./g,n=t.exec(e);if(null!=n)if(e.substring(n.index+n[0].length).replace(t,"").length>a)return!1}n=parseFloat(e);return!(isNaN(n)||Betslip.STAKE_LIMIT<n)}function betslipFormatValue(e){return 0==e?PanbetConst.Betslip.DEF_MONEY_VAL:betslipFormatMoney(Math.round(100*e)/100,2,".",",")}function betslipFormatMoney(e,t,n,a){var t=isNaN(t=Math.abs(t))?2:t,n=null==n?",":n,a=null==a?".":a,i=e<0?"-":"",o=parseInt(e=Math.abs(+e||0).toFixed(t))+"",r=3<(r=o.length)?r%3:0;return i+(r?o.substr(0,r)+a:"")+o.substr(r).replace(/(\delimeter1{3})(?=\delimeter1)/g,"$1"+a)+(t?n+Math.abs(e-o).toFixed(t).slice(2):"")}function isStake(e,t){Log.isDebugEnabled()&&Log.debug("function isStake() - called, oInput="+$("<div>").append($(e).clone()).remove().html());var n,a=e.value.trim(),i=$(e).attr("rel").trim();return Log.isDebugEnabled()&&Log.debug("function isStake() - sValue="+a+",hint="+i),""!=a&&"."!=a&&a!=i?(Log.isDebugEnabled()&&Log.debug("function isStake() - sValue != '' && sValue != '.' && sValue != hint"),a=a.replace(/,/g,""),0<=(n=parseFloat(a))&&n==a?(Log.isDebugEnabled()&&Log.debug("function isStake() - returns true, sValue="+a),!0):($("#invalid_stake_dialog").modal({position:["20%"]}),Log.isDebugEnabled()&&Log.debug("function isStake() - returns false, sValue="+a),!1)):(Log.isDebugEnabled()&&Log.debug("function isStake() - sValue == '' || sValue == '.' || sValue == hint"),t&&(e.value=i),Log.isDebugEnabled()&&Log.debug("function isStake() - returns true, sValue="+i),!0)}function getEl(e){return e="string"==typeof e?$$(e):e}function isEmpty(e){var t=!1,t=((e=(t="string"==typeof e&&0==e.indexOf("#")?!0:t)?$("[id='"+e.substring(1)+"']"):$(e)).val()||"").trim(),n=(e.attr("rel")||"").trim();return t==n||(""==t||"."==t)&&(e.val(n),!0)}function getSUrlByInputs(e,n){var a,i=[];return e&&((e=e.length?e:[e]).length,$.each(e,function(e,t){if(!(a=$(t).attr("id")))return!1;a=a.replace(n,""),i.push(a)})),i}function hasValue(e){switch(e){case 9:case 13:case 16:case 17:case 18:case 19:case 20:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:return!1;default:return!0}}function noValue(e){var t;return(e=e||window.event).keyCode?t=e.keyCode:e.which&&(t=e.which),!hasValue(t)}function setValue(e,t){try{$(e).val(parseFloat(t))}catch(e){}}function getSelectionRange(e){var t,n,a,i,o=-1,r=-1;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(o=e.selectionStart,r=e.selectionEnd):(i=document.selection.createRange())&&i.parentElement()==e&&(a=e.value.length,t=e.value.replace(/\r\n/g,"\n"),(n=e.createTextRange()).moveToBookmark(i.getBookmark()),(i=e.createTextRange()).collapse(!1),-1<n.compareEndPoints("StartToEnd",i)?o=r=a:(o=-n.moveStart("character",-a),o+=t.slice(0,o).split("\n").length-1,-1<n.compareEndPoints("EndToEnd",i)?r=a:(r=-n.moveEnd("character",-a),r+=t.slice(0,r).split("\n").length-1))),{start:o,end:r}}function showHalfPlaceWarning(e){var t=$$("half-palace-msg"),n=$$("half-place-dialog");n&&t&&(e=formatHalfPlaceMsg(e),$.modal.close(),$(t).html(e),$(n).modal({position:["20%"]}))}function formatHalfPlaceMsg(e){for(var t,n="",a=PanbetConst.Betslip.HALFPLACE_BET,i=0,o=e.length,r=!0;i<o;i++)r?r=!1:n+="<br>",n+=formatTemplateMsg(a,(t=e[i]).name,t.win,t.place);return n}function formatTemplateMsg(e){for(var t=1,n=arguments.length;t<n;t++)e=e.replace("{"+(t-1)+"}",arguments[t]);return e}function isOneClickChecked(){return hasProp($$("bet-in-one-click-checked"),"checked")}function hasAttr(e,t){return!!(e=$(e))&&void 0!==(e=e.attr(t))&&!1!==e}function hasProp(e,t){return!!(e=$(e))&&void 0!==(e=e.prop(t))&&!1!==e}syncPasswords=function(e){var n=e.target||e.srcElement,e=n.querySelectorAll("[data-password]");e.length&&$(e).each(function(){var e=$(this).attr("data-id"),t=$(this).val(),e=$(n).find("#"+e);e.length&&t!=e.val()&&$(this).val(e.val())})},document.addEventListener("client.loaded",function(){$(".blink").each(function(){var e=$(this),t="blinkState";setInterval(function(){e.hasClass(t)?e.removeClass(t):e.addClass(t)},1e3)}),$.browser.msie&&parseInt($.browser.version)<9&&($("#js_topbar_optimum_browser").show(),checkView()),$(document).on("click","[data-show-modal-dialog-by-id]",showModalDialogById),navigator.userAgent.match(/Trident.*rv\:11\./)&&($("#js_topbar_unsupported_browser").show(),checkView());for(var e=document.querySelectorAll("form"),t=0;t<e.length;t++)e[t].addEventListener("submit",function(e){syncPasswords(e)});-1!=$.Page.location().href.indexOf("startChat")&&window.ChatManager.openChat()}),function(i){document.addEventListener("client.loaded",function(){var n=".js-credit .loading",a=!1;i(document).on("click",".js-credit-calc-button",function(){var t,e;return a||(a=!0,i(this).hide(),i(n).show(),t=function(){a=!1,i(n).hide(),setTimeout(function(){i(".js-credit-calc-button").css("display","")},1500)},e={url:resolveBetslipUrl("CALC_CREDIT"),type:"POST",success:function(e){e=i(e);i(".js-credit-calc-button",e).hide(),i(".js-credit").html(e),t()}},i.ajax(e)),!1})})}((window,jQuery)),(WebLocalStorage=WebLocalStorage||{}).Controller=function(){var e="localStorage";function n(){return e in window&&null!=window[e]}this.getParsedItem=function(e){if(n()){e=localStorage.getItem(e);if(e&&""!=e)return JSON.parse(e)}return null},this.saveObject=function(e,t){n()&&(t=null!=t?JSON.stringify(t):"",localStorage.setItem(e,t))},this.remove=function(e){n()&&e&&localStorage.removeItem(e)}},WebLocalStorage.controller=new WebLocalStorage.Controller,(BetslipChoiceManager=BetslipChoiceManager||{}).Controller=function(){this.getAccepted=function(){return $.map(e(),function(e){return e.accepted})},this.getActual=function(){return $.map(e(),function(e){return e.actual})},this.getActualWithPriceType=function(){return $.map(e(),function(e){return{selection:e.actual,type:e.priceType}})},this.getActualChoices=function(){var t=[];return e().forEach(function(e){e.actualChoice&&t.push(e.actualChoice)}),t};var e=function(){var e=[];return $("[id^='actualSelection.']").each(function(){e.push(new t($(this).data("acceptedSelectionUid"),$(this).val(),$(this).data("acceptedSelectionType"),$(this).data("actualChoice")))}),e},t=(this.getChoices=e,function(e,t,n,a){this.accepted=e,this.actual=t,this.priceType=n,this.actualChoice=a})},(BetslipStorageFacade=BetslipStorageFacade||{}).Controller=function(){var n,a,e;initData.useBetslipVue||(n=WebLocalStorage.controller,a={KEY_IS_BETSLIP_ACTIVE:"isBetslipActive",KEY_IS_COUPON_OPEN:"isCouponOpen",KEY_VISIBLE_OPEN_BET_IDS:"openBetIds"},this.isOpenCoupon=function(){return!0===n.getParsedItem(a.KEY_IS_COUPON_OPEN)},this.isBetslipActive=function(){return!0===n.getParsedItem(a.KEY_IS_BETSLIP_ACTIVE)},this.getVisibleOpenBetIds=function(){var e=n.getParsedItem(a.KEY_VISIBLE_OPEN_BET_IDS);return null!=e?e:[]},this.setIsOpenCoupon=function(e){this.isOpenCoupon()!==e&&(n.saveObject(a.KEY_IS_COUPON_OPEN,e),$(document).trigger("openBetsVisibleChange",[this.isOpenCoupon()&&!this.isBetslipActive()]))},this.setIsBetslipActive=function(e){this.isBetslipActive()!==e&&(n.saveObject(a.KEY_IS_BETSLIP_ACTIVE,e),$(document).trigger("openBetsVisibleChange",[this.isOpenCoupon()&&!this.isBetslipActive()]))},this.addVisibleOpenBetId=function(e){var t=this.getVisibleOpenBetIds();t.push(e),n.saveObject(a.KEY_VISIBLE_OPEN_BET_IDS,t)},this.removeVisibleOpenBetId=function(e){var t=this.getVisibleOpenBetIds(),e=$.inArray(e,t);-1!=e&&(t.splice(e,1),n.saveObject(a.KEY_VISIBLE_OPEN_BET_IDS,t))},this.clearCouponStateStorage=function(){_.values(a).forEach(function(e){n.remove(e)})},this.clearVisibleOpenBets=function(){n.saveObject(a.KEY_VISIBLE_OPEN_BET_IDS,[])},this.toggleOpenBets=function(){this.isBetslipActive()?(this.setIsBetslipActive(!1),this.setIsOpenCoupon(!0)):this.setIsOpenCoupon(!this.isOpenCoupon())},this.toggleBetslip=function(){this.isBetslipActive()?this.setIsOpenCoupon(!this.isOpenCoupon()):(this.setIsBetslipActive(!0),this.setIsOpenCoupon(!0))},function(){null==n.getParsedItem(a.KEY_IS_BETSLIP_ACTIVE)&&this.setIsBetslipActive(!0),null==n.getParsedItem(a.KEY_IS_COUPON_OPEN)&&this.setIsOpenCoupon(isWideScreen()),null==n.getParsedItem(a.KEY_VISIBLE_OPEN_BET_IDS)&&n.saveObject(a.KEY_VISIBLE_OPEN_BET_IDS,[])}.call(this),this.toggleOpenBet=function(e){-1<$.inArray(e,this.getVisibleOpenBetIds())?this.removeVisibleOpenBetId(e):this.addVisibleOpenBetId(e)},e=this,document.addEventListener("client.loaded",function(){Emitter.on("logout",function(){e.clearCouponStateStorage()})}))},BetslipStorageFacade.controller=new BetslipStorageFacade.Controller,function(a){var e=Class.extend({depositButton:null,resultDialog:null,printButton:null,depositMsg:null,betresult:null,okButton:null,detailResultContent:null,detailResult:null,placeChangedTerms:null,cancelButton:null,init:function(){this.resultDialog=a("#result\\-dialog"),this.betresult=a("#betresult"),this.detailResult=a("#detail\\-result"),this.detailResult.hide(),this.detailResultContent=a("#detail\\-result\\-content"),this.depositMsg=a("#deposit\\-msg"),this.depositMsg.hide(),this.placeChangedTerms=this.bindButton("#place\\-changed\\-terms"),this.depositButton=this.bindButton("#deposit\\-button"),this.cancelButton=this.bindButton("#cancel\\-button"),this.printButton=this.bindButton("#print\\-bet"),this.okButton=this.bindButton("#ok\\-button")},bindButton:function(e){e=a(e);return e.off("click"),e.hide(),e}}),t=e.extend({show:function(e){this.okButton.on("click",closeModal),this.okButton.show(),this.printButton.on("click",function(){getBetslip().printBet(e.bet_id)}),this.printButton.show(),this.betresult.html(e.messages[0]),this.resultDialog.addModalToViewQueue({position:["20%"]})}}),e=e.extend({show:function(e){var t=e.messages,n=t&&0<t.length?t.splice(0,1)[0]:e.error||e.ERROR||!1;if(!n)return!1;this.betresult.html(n),t&&0<t.length?(this.detailResultContent.html(this.format(t)),this.detailResult.show()):this.detailResult.hide(),e.oom&&(this.depositButton.show(),this.depositMsg.show())},format:function(e){for(var t="",n=0,a=e.length;n<a;n++)t+=e[n]+"<br/>";return t.substr(0,t.length-5)}}),n=e.extend({show:function(e){this._super(e);this.detailResult,this.depositButton,this.depositMsg;this.okButton.on("click",function(){closeModal(),e.refresh&&location.reload()}),this.okButton.show(),this.resultDialog.addModalToViewQueue({position:["20%"]})}}),i={CHANGED_TERMS_ERROR:new(e.extend({show:function(t){var e,n;this._super(t),(!!!a("[id^='choice.status.'][value='REMOVE']:first").length&&t.showPlaceBetButton?(e=this.cancelButton,n=this.placeChangedTerms,e.on("click",closeModal),n.on("click",function(){closeModal();var e=t.correctStakes;Array.isArray(e)&&0<e.length&&getBetslip().fixStakes(e),t.oneClickNewCoeffId?getOneClick().retry({newCoeffId:t.oneClickNewCoeffId,newSelectionUid:t.oneClickNewSelectionUid}):getBetslip().continuePlaceBet(initData.isLogged,!0)}),n.show(),e):(this.okButton.on("click",closeModal),this.okButton)).show(),this.resultDialog.addModalToViewQueue({position:["20%"]})}})),BET_ERROR:new n,OK:new t};window.showResultDialog=function(e,t){e=i[String(e)];e&&(e.init(),e.show(t))}}(jQuery),document.addEventListener("client.loaded",function(){var d,i,a,r,o,s,l,c,u,h,p,f,n,e,t,g,E,_,m,v,S,T,C,b,A,w,R=window.jQuery;function B(){var e=document.querySelector(".betslip-code-error-container");e&&e.classList.add("betslip-code-error-hidden")}function U(){var e=document.querySelector(".betslip-code-input");e&&e.value&&(e=e.value,betslipAjaxPost({action:BETSLIP_CODE_LOAD_URL,payload:{betslipCode:e},useQueue:!0,showProgress:!0,onSuccess:function(e){var t,n,a;console.log("betslipCodeLoaded: ",e),e.status&&"error"===e.status&&e.errorMessage?(t=e.errorMessage,n=document.querySelector(".betslip-code-error-container"),a=document.querySelector(".betslip-code-error-message"),n&&a&&(n.classList.remove("betslip-code-error-hidden"),a.textContent=t)):loadBetslipContent(e)},onFailed:O}))}function I(){R('[id="betslip-skeleton"]').hide()}function D(){R("#rightbar-widgets-place")[isOneClickChecked()?"addClass":"removeClass"]("one-bet-click"),window.Emitter.emit("oneclickbet.toggle",isOneClickChecked())}function O(e){(e.errorMessage?(R("#common_messenger_msg").html(e.errorMessage),R("#common_messenger")):R("#betslip_general_error")).addModalToViewQueue({position:["20%"]})}function F(e){R('[id="betslip-skeleton"]').show(),R(".betslip-skeleton__content_error").show()}function k(e,t){var n=0;this.activete=function(){clearTimeout(n),n=setTimeout(t,e)},this.fireImmediately=function(){clearTimeout(n),t()},this.cancel=function(){clearTimeout(n)}}function y(e){l=Boolean(e)}function L(e){if("string"==typeof e)try{s=JSON.parse(e)}catch(e){s=[]}else s=e}function P(e){u=Boolean(e)}function N(e){var t=null,n=null;if(!(a=e.content)||!(n=e.currentpage)||!(t=i[n]))return!1;I(),R("#betslip\\-content").replaceWith(a),(a=e.previouspage)&&(o=String(a)),(a=n)&&(r=String(a)),setupBetPlacingModeHandler();var n=e.selectionuids,a=Array.isArray(n)?getHighlightedSelectionUIDs(n):[];try{R(document).trigger("betslip.loaded",[a,e.openBetsTimeout])}catch(e){console.error('Error while notify all "betslip.loaded" listeners',e)}return R("#betslip_choices_count").html(e.choicesCount||0),R("#open_bets_count").html(e.openbetsCount||0),updateCoupon(),null!=(n=R("#bet_in_one_click_checkbox_state").data("checked"))&&R("#bet-in-one-click-checked").prop("checked",n),R("#coupon_header").toggle(!n),t._activate(),setupBetslipPlaceModeBlockVisibility(),adjustScroll(),D(),a=document.querySelector(".betslip-code-input"),e=document.querySelector(".betslip-code-button"),a&&e&&(a.oninput=f,a.onkeypress=B,e.onclick=U),t}function M(e){var t=R(e).data("sel"),n=R("span[data-selection-key]:first",e).data("selectionKey").split("@"),n=(t.u=n[0]+","+n[1],R(e).parents("[data-event-name]:first"));return t.mainEventTreeId=n.data("event-treeid"),t.l=n.data("live"),t.selectionSource=window.retrieveBetSelectionContainer(e),t}initData.useBetslipVue||(d=500,PLACETICKET_URL="PLACETICKET_URL",PLACEBET_URL="PLACEBET_URL",REMOVE_URL="REMOVE_URL",RETAIN_URL="RETAIN_URL",CLEAR_URL="CLEAR_URL",LOAD_URL="LOAD_URL",ADD_URL="ADD_URL",SAVE_URL="SAVE_URL",PLACEBET_ONECLICK_URL="PLACEBET_ONECLICK_URL",UPDATE_URL="UPDATE_URL",BETSLIP_CODE_LOAD_URL="BETSLIP_CODE_LOAD_URL",BETSLIP_CODE_SAVE_URL="BETSLIP_CODE_SAVE_URL",SHORT_VIEW="SHORT_VIEW",SINGLES_VIEW="SINGLES_VIEW",ACCUMULATOR_VIEW="ACCUMULATOR_VIEW",SYSTEM_VIEW="SYSTEM_VIEW",ANTIEXPRESS_VIEW="ANTIEXPRESS_VIEW",MULTIPLE_VIEW="MULTIPLE_VIEW",FREEBET_VIEW="FREEBET_VIEW",a=!(i={}),o=r="SHORT",c=null,u=l=!(s=[]),h=new BetslipChoiceManager.Controller,p=new TaskQueue("betslipQueue"),window.setCanSettleBets=function(e){a=Boolean(e)},f=function(e){var t=e.target.value.replace(/[^0-9a-zA-Z+]/g,""),e=(e.target.value=t,document.querySelector(".betslip-code-button"));e&&(t?e.classList.remove("betslip-code-button-disabled"):e.classList.add("betslip-code-button-disabled"))},window.betslipGeneralErrorHandler=O,window.retryLoadCurrentBetslipPage=function(){R('[id="betslip-skeleton"]').show(),R(".betslip-skeleton__content_error").hide(),loadCurrentBetslipPage(!0)},window.loadCurrentBetslipPage=function(e){betslipAjaxPost({action:LOAD_URL,payload:{},useQueue:!1,showProgress:!1,onSuccess:function(e){loadBetslipContent(e),R("#coupon_header").toggle(!isOneClickChecked())},onFailed:e?F:function(){}})},window.betslipAjaxPost=function(n){function e(e){var t;"CONNECTION_BROKEN"===e.code?(console.log("Connection has broken while calling: "+n.action),n.onFailed({status:e.status,isAborted:!0,body:e,errorMessage:PanbetConst.Betslip.NETWORK_ISSUE_MESSAGE})):"ECONNABORTED"===e.code?(console.log("Timeout has occured while calling: "+n.action+" errorMessage: "+e.message),n.onFailed({status:e.status,isAborted:!0,body:e,errorMessage:PanbetConst.Betslip.NETWORK_TIMEOUT_MESSAGE})):e.status?(t=e.message,console.log("Bad response while calling: "+n.action+" httpStatus: "+e.status+" body.ERROR: "+t.ERROR),n.onFailed({status:e.status,isAborted:!1,body:t,errorMessage:t.ERROR})):(console.log("Unknown error while calling: "+n.action+" error: "+e),n.onFailed({status:e.status,isAborted:!1,body:e}))}function t(e){e.ERROR?n.onFailed({status:200,isAborted:!1,body:e,errorMessage:e.ERROR}):n.onSuccess(e)}var a,i=resolveBetslipUrl(n.action),o=window.convertToFormData(n.payload),r=void 0!==n.showProgress&&n.showProgress,s=void 0===n.useQueue||n.useQueue,l=n.timeout||1e4,c=function(){return window.httpCall(i,o,{timeout:l,headers:{[TrackingEngineSourceHeaderName]:TrackingEnginePersonalDetailPopupSource.BETSPORT}}).then(t).catch(e)};r&&(a=c,c=function(){return e=e||d,window.callIfThresholdPassed(a(),e,function(){showProgressModal()},function(e){e&&hideProgressModal()});var e}),s?p.pushToQueue(c):c()},window.loadBetslipContent=function(e){var t,n,a,i,o;return null!=e&&((t=e).error||t.ERROR?(updateCoupon(),showResultDialog("BET_ERROR",e),!1):(t=null,!!(t=N(e))&&(L(e.halfplaced),(o=e.puntermsg)&&(c=String(o)),o=e.confirmplacebet,n=e.cansettlebets,e=e.isLogged,setCanSettleBets(n),P(e),a=!e,(i=R("#bet-in-one-click-checked"))&&i.prop("disabled",a),t._initSaveStake(),n&&o&&t.confirmPlaceBet(e,!0),showStakeNo(),!0)))},n=Class.extend({_placeBetTransaction:!1,_contentUrl:null,placeBet:function(e,t){},checkBet:function(e){},calcBets:function(){},hasAnyStake:function(){return!1},_activate:function(){},init:function(e){this._contentUrl=e},_abortPlace:function(e){e&&(R("#common_messenger_msg").html(e),R("#common_messenger").addModalToViewQueue({position:["20%"]}))},onStakeChange:function(e){},_initSaveStake:function(){},postSaveBetOpstions:function(e,t){betslipAjaxPost({action:SAVE_URL,payload:e,useQueue:!1,showProgress:!1,onSuccess:function(){t&&t()},onFailed:function(){}})},resetVisabilitySaveBetslipCode:function(){var t,e=document.getElementById("betslip-code");e&&(t=!1,h.getChoices().forEach(function(e){var e=document.getElementById("choice.status."+e.accepted);e&&(e=e.getAttribute("value"),t=t||"REPLACE"===e||"REMOVE"===e)}),t||"true"!==e.getAttribute("data-betslip-code-available")?e.classList.add("hidden"):e.classList.remove("hidden"))},createBetOptions:function(e){},selectBanker:function(e){},openCalculator:function(){},saveBetslipCode:function(){betslipAjaxPost({action:BETSLIP_CODE_SAVE_URL,payload:{},useQueue:!1,showProgress:!0,onSuccess:function(e){var t=e.betslipCode;t?window.Emitter.emit("modal.open",{type:"BETSLIP_CODE_SHARE",props:{betslipCode:t}}):O({errorMessage:e.errorMessage})},onFailed:O})},confirmPlaceBet:function(e,t){if(0==R("#betslip_placebet_btn_id").data("enabled"))return!1;if(!(l=t?t:l))return!1;if(!a)return this._abortPlace(c),!1;var n=this;if(p.isActve())return p.pushToQueue(function(){return n._enablePlaceBetButton(),new Promise(function(e){e(!0)})}),this._disablePlaceBetButton(),!1;e&&(u=e);t=R("#total_cost"),e=(e=t?t.html():null)&&e.replace(/(,)/g,"");isNaN(e)||e<=0?this.hasAnyStake()?this.showInvalidStakeDialog():this.showEnterStakeDialog():s&&0<s.length?showHalfPlaceWarning(s):this.continuePlaceBet(u),y(!1)},continuePlaceBet:function(e,t){var n;this._placeBetTransaction||((u=e?e:u)?(e=this._betPlacingSuccess,n=this._betPlacingFailure,showProgressModal(),this._placeBetTransaction=!0,this.placeBet(e,n,t)):showLoginDialog({source:window.TrackingEngineAuthPopupSource.BET,args:{placebet:!0}}))},printBet:function(e){e=initData.base_dir+"/printbet.htm?jointPrint=true&betId="+e;window.open(e)},_betPlacingFailure:function(e){hideProgressModal();var t=getBetslip(),n=(t.resetPlaceBetTransaction(),e.status);401===n?t.handlers.LOGIN_REQUIRED():499!==n&&(e.errorMessage&&e.isAborted?O({errorMessage:e.errorMessage+"<br>"+PanbetConst.Betslip.PLACE_BET_ERROR_MESSAGE}):e.errorMessage?O({errorMessage:e.errorMessage}):O({errorMessage:PanbetConst.Betslip.PLACE_BET_ERROR_MESSAGE}))},handlers:{OK:function(e){var t=getBetslipCurrentPage(),n="SINGLE",a=[];if(e.eventIdsInTicket)try{a=JSON.parse(e.eventIdsInTicket)}catch(e){}switch(t){case"ACCUMULATORS":case"MULTIPLES":case"ANTIEXPRESSES":n=getBetslip().getSUrl("bet_type_selection");break;case"SYSTEM":n=getBetslip().getSUrl("bet_type_selection")+"/"+(new BetslipChoiceManager.Controller).getChoices().length}var i=void 0!==getBetslip()._isSingles&&getBetslip()._isSingles(),a={eventIds:a,moneyAmount:e.betPlaceResultTotalStake,currency:e.betPlaceCurrency,betslipTab:t,betType:n,singles:i};return TrackingEngine.trigger(TrackingEngine.EVENT.BET_PLACED,a),getBetslip()._processOk(e,e.balance),!0},LIVE_DELAY:function(e){return getBetslip()._processDelay(e.ticket_id,e.delay),!1},ERROR:function(e){var t="GENERAL_ERROR",n=(e.oom?t="OUT_OF_MONEY":e.changedterms&&(t="TERMS_HAS_CHANGED"),[]);if(e.eventIdsInTicket)try{n=JSON.parse(e.eventIdsInTicket)}catch(e){}return TrackingEngine.trigger(TrackingEngine.EVENT.BET_ABORTED,{eventIds:n,error:t}),getBetslip()._processError(e),!0},LOGIN_REQUIRED:function(e){closeModal(),y(!0),P(!1),getBetslip().confirmPlaceBet()}},_betPlacingSuccess:function(e){var t=e.result,n=("LIVE_DELAY"!==t&&hideProgressModal(),getBetslip()),t=n.handlers[t],a=!0;t?a=t(e):O({errorMessage:PanbetConst.Betslip.PLACE_BET_ERROR_MESSAGE}),a&&n.resetPlaceBetTransaction(),n._after_betPlacingSuccess(e)},_after_betPlacingSuccess:function(e){},_processOk:function(e,t){try{t&&window.Emitter.emit("balance.update",{type:"MAIN",balance:t}),N(e),this._initSaveStake()}catch(e){Log.error(e)}showResultDialog("OK",e)},_processDelay:function(e,t){var n;isNaN(t)||null==e||(n=this,window.setTimeout(function(){n.placeTicket(e)},t))},_processError:function(e){try{N(e)}catch(e){Log.error(e)}e.changedterms&&!e.oom?showResultDialog("CHANGED_TERMS_ERROR",e):e.showPunterLegalAgreementDialog?(PunterLegalAgreementDialogHelper.setConfirmationRequired(!0),PunterLegalAgreementDialogHelper.showLegalAgreementPopup()):showResultDialog("BET_ERROR",e)},placeTicket:function(e){betslipAjaxPost({action:PLACETICKET_URL,payload:{t:e},onSuccess:this._betPlacingSuccess,onFailed:this._betPlacingFailure,useQueue:!1,showProgress:!1})},addRemove:function(e){var t=null;try{t=window.location.href}catch(e){}var n=M(e);"SHORT"==r&&BetslipStorageFacade.controller.isOpenCoupon()&&!isWideScreen()&&BetslipStorageFacade.controller.setIsOpenCoupon(!1),BetslipStorageFacade.controller.setIsBetslipActive(!0),BetslipRemoveChoiceManager.controller.contains(n.u)?this.remove(n.u):betslipAjaxPost({action:ADD_URL,payload:{ch:JSON.stringify(n),url:t,ws:!0},useQueue:!0,showProgress:!0,onSuccess:function(e){loadBetslipContent(e),TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_CHOICE_ADDED,n.u)},onFailed:O})},remove:function(t){betslipAjaxPost({action:REMOVE_URL,payload:{url:t,page:r},useQueue:!0,showProgress:!0,onSuccess:function(e){loadBetslipContent(e),TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_CHOICE_REMOVED,t)},onFailed:O})},removeAll:function(){betslipAjaxPost({action:CLEAR_URL,payload:{},useQueue:!0,showProgress:!0,onSuccess:function(e){loadBetslipContent(e),TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_ALL_CHOICES_REMOVED)},onFailed:O})},noSelections:function(){R.modal.close(),R("#no_selections").modal({position:["20%"]})},setRetain:function(e){betslipAjaxPost({action:RETAIN_URL,payload:{retain:e},useQueue:!1,showProgress:!1,onSuccess:function(){},onFailed:O})},hideCursor:function(){var e=R(".js-focusable:focus");e&&(e.addClass("js-focused"),e.trigger("blur"))},showCursor:function(){var e=R(".js-focused");e&&(e.removeClass("js-focused"),e.css("position","fixed").trigger("focus").css("position","static"))},_placeBetButton:function(){var e=R('[id="betslip_placebet_btn_id"]');return!!e&&R(e)},_disablePlaceBetButton:function(){var e=this._placeBetButton();e&&(e.removeAttr("href"),e.addClass("disabled"))},_enablePlaceBetButton:function(){var e=this._placeBetButton();e&&(e.attr("href","javascript://"),e.removeClass("disabled"))},showEnterStakeDialog:function(){R.modal.close(),R("#enter_stake_dialog").modal({position:["20%"]})},showInvalidStakeDialog:function(){R.modal.close(),R("#invalid_stake_dialog").modal({position:["20%"]})},_abortSave:function(){},_stake:function(e){var t=null,n=null,e=this._stakeEl(e);return e&&(t=((e=R(e)).val()||"").trim(),n=(e.attr("rel")||"").trim()),this._stakeVal(t,n)},_stakeVal:function(e,t){if(e&&t&&""!=e&&"."!=e&&e!=t){e=e.replace(/,/g,"");t=parseFloat(e);if(!isNaN(t)&&0<=t&&t==e)return t}return 0},_isew:function(e){return hasProp(this._isewEl(e),"checked")},_isvip:function(e){return hasProp(this._isvipEl(e),"checked")},_totalReturns:function(e){var t,n,a=betslipFormatValue(e),i=(R("#total_returns").html(a),document.getElementById("bet_type_selection"));i&&(n=document.querySelector("#bonus-tooltip__potential_returns"),t=document.querySelector("#bonus-tooltip__bonus-win"),i=i.value,i=document.getElementById("currentBonus."+i),n)&&i&&t&&i.getAttribute("value")&&(n.textContent=a,n=parseFloat(i.getAttribute("value")),t.textContent=betslipFormatValue(e/(1+n/100)*(n/100)))},_expressBonus:function(e){var t=R("#total_express_container");t&&0<e?(R("#total_express").html(betslipFormatValue(e)),t.show()):t&&t.hide()},_totalCost:function(e){R("#total_cost").html(betslipFormatValue(e))},_disableEl:function(e){return!!e&&(R(e).attr("disabled","disabled"),!0)},_enableEl:function(e){return!!e&&(R(e).removeAttr("disabled"),!0)},_hideEl:function(e){if(!e)return!1;R(e).hide()},_showEl:function(e){if(!e)return!1;R(e).show()},_uncheckEl:function(e){if(!e)return!1;R(e).prop("checked",!1)},_checkEl:function(e){if(!e)return!1;R(e).prop("checked",!0)},_hasVip:function(e,t){var n=this._vipavaliable(e),a=this._maxStake(e),i=this._minVip(),e=this._vipenabled(e);return this._isNum(t)&&n&&e&&this._isNum(i)&&this._isNum(a)&&i<=t&&a<t},_vipavaliable:function(e){e=$$("vip.avaliable."+e);return!!e&&"true"===e.value},_vipenabled:function(e){e=$$("vip.enabled."+e);return!!e&&"true"===e.value},_maxStake:function(e){e=$$("max."+e);return this._parseFloat(e)},_minVip:function(){var e=$$("min.vip");return this._parseFloat(e)},_parseFloat:function(e){return!!e&&(e=parseFloat(R(e).val()),!isNaN(e))&&e},_isNum:function(e){return"number"==typeof e},_putCursor:function(t){if(!t)return!1;isEmpty(t=t.length&&0<t.length?t[0]:t)?t.id&&setTimeout(function(){var e=$$(t.id);e&&R(e).trigger("focus")},10):R(t).putCursorAtEnd()},_vipBetHint:function(){R(".vip-bet .hint").on("hover",function(){var e=R(this).position(),t=e.left-103,e=e.top+16;R(this).next(".window-message").css({left:t,top:e,margin:"0"})}),R("#vip-bet-container-singles .hint").on("hover",function(){var e=R(this).position(),t=e.left-103+37+50,e=e.top+16;R(this).next(".window-message").css({left:t,top:e,margin:"0 !important"})})},_replaceStakeValue:function(e){e.forEach(function(e){var t=e.bet.replace(/(\(|\)|\[|\]|\{|\}|\||\.|,|-)/g,"\\$1");R("#"+t)[0].value=e.stake})},resetPlaceBetTransaction:function(){this._placeBetTransaction=!1}}),e=n.extend({UPDATE_DELAY:null,_state:{checked:null,stake:null},_try:{ch:null},INPUT_STAKE_ID:"#bet_in_one_click_stake",BUTTON_CONFIRM_STAKE_ID:"#button_confirm_stake",CONFIRMED_STAKE_DATA_ATTR:"confirmedStakeValue",DEFAULT_VALUE_DATA_ATTR:"defaultValue",PREVIOUS_VALID_STAKE:R(this.INPUT_STAKE_ID).data(this.CONFIRMED_STAKE_DATA_ATTR),init:function(){this.UPDATE_DELAY=300,R(document).on("betslip.loaded",this.initEventHandlers.bind(this))},addRemove:function(e){if(!a)return n.prototype._abortPlace.call(this,c),!1;e=M(e);this.place(JSON.stringify(e))},update:function(){var e=isOneClickChecked(),t=0;try{t=this._stake()}catch(e){t=0}if(this._hasNotChanged(e,t))return!1;var n=this,e={action:UPDATE_URL,payload:{chd:e,st:t},useQueue:!0,showProgress:!0,onSuccess:function(e){N(e),showStakeNo(),n.updateState(),n._state.checked&&setTimeout(function(){var e=R("#bet\\-in\\-one\\-click\\-stake");return!!e&&(isEmpty(e)||e.putCursorAtEnd(),e.on("focus",function(){isEmpty(e)&&e.val("")}),!0)},100)},onFailed:O};betslipAjaxPost(e)},retry:function(e){var t,n,a=this._try.ch;e&&e.newCoeffId&&((t=JSON.parse(a)).cid=e.newCoeffId,e.newSelectionUid&&(n=t.u.split(",")[0],t.u=n+","+e.newSelectionUid),a=JSON.stringify(t)),this.place(a)},place:function(e){var t=isOneClickChecked();if(!t)return!1;this.setNotConfirmedStakeForPlaceBet();var n=-1;try{n=this._stake()}catch(e){return this._abortPlace(),!1}this._try={ch:e};e={ch:e,st:n,chd:t};showProgressModal(),betslipAjaxPost({action:PLACEBET_ONECLICK_URL,payload:e,useQueue:!1,showProgress:!1,onSuccess:this._betPlacingSuccess,onFailed:this._betPlacingFailure})},updateState:function(){var t=0;try{t=this._stake()}catch(e){t=0}var e=isOneClickChecked();e&&BetslipStorageFacade.controller.setIsBetslipActive(e),this.setState(e,t)},setState:function(e,t){this._state.checked=e,this._state.stake=t},remove:function(e){},removeAll:function(){},_after_betPlacingSuccess:function(e){this._setConfirmedStateForStakeValue(!0,e.oneClickStake)},_processOk:function(e,t){window.Emitter.emit("balance.update",{type:"MAIN",balance:t}),showResultDialog("OK",e)},_processError:function(e){e.changedterms&&!e.oom?showResultDialog("CHANGED_TERMS_ERROR",e):showResultDialog("BET_ERROR",e)},_abortPlace:function(){R("#enter_stake_dialog").addModalToViewQueue({position:["20%"]})},_hasNotChanged:function(e,t){return!this._hasChanged(e,t)},_hasChanged:function(e,t){var n=this._state;return n.checked!=e||n.stake!=t},_checked:function(){isOneClickChecked()},_stake:function(){var e=R(this.INPUT_STAKE_ID).get(0);if(e){if(isEmpty(e))throw"ZERO_STAKE";return extractSum(e),isStake(e)?e.value:-1}return-1},placeBet:function(e,t){if(!a)return n.prototype._abortPlace.call(this,c),!1;this.place(this._try.ch)},checkBet:function(e){Log.debug("not implemented OneClickController.checkBet")},calcBets:function(){Log.debug("not implemented OneClickController.calcBet")},hasAnyStake:function(){return!1},_activate:function(){Log.debug("not implemented OneClickController._activate")},fixStakes:function(e){e=e[0].stake;R(this.INPUT_STAKE_ID).val(e)},_setConfirmedStateForStakeValue:function(e,t){var n=R(this.BUTTON_CONFIRM_STAKE_ID),a=R(this.INPUT_STAKE_ID);e?(a.removeClass("not-confirmed"),n.prop("disabled",!0)):(a.addClass("not-confirmed"),n.prop("disabled",isEmpty(a)||0==a.val())),t&&(a.val(t),a.data(this.CONFIRMED_STAKE_DATA_ATTR,t))},checkOneClickStake:function(){var e,t,n=R(this.INPUT_STAKE_ID);isEmpty(n)?(this._setConfirmedStateForStakeValue(!1),R(n).val(""),this.PREVIOUS_VALID_STAKE=""):checkValue(e=R(n).val(),!0,!1,2)?(t=n.data(this.CONFIRMED_STAKE_DATA_ATTR)==e,this.PREVIOUS_VALID_STAKE=e,this._setConfirmedStateForStakeValue(t)):R(n).val(this.PREVIOUS_VALID_STAKE)},setNotConfirmedStakeForPlaceBet:function(){this.isConfirmedStake()||(R(this.INPUT_STAKE_ID).val(this.getConfirmedStake()),this.checkOneClickStake())},isConfirmedStake:function(){return!R(this.INPUT_STAKE_ID).hasClass("not-confirmed")},getConfirmedStake:function(){return R(this.INPUT_STAKE_ID).data(this.CONFIRMED_STAKE_DATA_ATTR)},initEventHandlers:function(){var t=this;R(this.INPUT_STAKE_ID).on("input",t.checkOneClickStake.bind(t)),R(this.INPUT_STAKE_ID).on("blur",function(){isEmpty(this)&&R(this).val(R(this).data(t.DEFAULT_VALUE_DATA_ATTR))}),R(this.INPUT_STAKE_ID).on("focus",function(){isEmpty(this)&&R(this).val("")}),R(this.BUTTON_CONFIRM_STAKE_ID).on("click",function(){var e=R(t.INPUT_STAKE_ID).get(0);e&&(extractSum(e,2,!1),isStake(e))&&getOneClick().update()})}}),t=n.extend({init:function(){this._super(SHORT_VIEW)},placeBet:function(e,t){Log.debug("not implemented ShortController.placeBet")},checkBet:function(e){Log.debug("not implemented ShortController.checkBet")},calcBets:function(){Log.debug("not implemented ShortController.calcBet")},hasAnyStake:function(){return!1},_activate:function(){Log.debug("not implemented ShortController._activate")}}),g=n.extend({_cachedStakes:{},_saveBetOptionsTasks:{},init:function(){this._super(SINGLES_VIEW),this._betCalc=new C},fixStakes:function(e){this._isSingles()?this._replaceStakeValue([{bet:"singles-bet",stake:e[0].stake}]):(e=e.map(function(e){return{bet:"stake."+e.bet,stake:e.stake}}),this._replaceStakeValue(e))},_initSaveStake:function(){var l=this,c={},d={};this._eachChoice(function(e,t,n,a,i,o,r,s){c[a]=i,d[a]=new k(300,function(){l.postSaveBetOpstions(l.createBetOptions(a))})}),d.SINGLES=new k(300,function(){l.postSaveBetOpstions(l.createBetOptions("SINGLES"))}),c.SINGLES=this._stake("SINGLES"),this._cachedStakes=c,this._saveBetOptionsTasks=d},createBetOptions:function(e){return{schd:this._isSingles(),u:e,st:this._stake(e),ew:this._isew(e),p:r,v:this._isvip(e)}},onStakeChange:function(e){var t=this._stake(e);t!==this._cachedStakes[e]&&(this.checkBet(e),this._cachedStakes[e]=t,this._saveBetOptionsTasks[e].activete())},onBetOptionsChange:function(e){this.checkBet(e),this._saveBetOptionsTasks[e].fireImmediately()},hasAnyStake:function(){var e=this._checkEachBet(this._isSingles());for(url in e)if(e[url].stake)return!0;return!1},placeBet:function(e,t,c){var n,a,i,o=this._isSingles(),d=[];c=!!c,o?(n=this._stake("SINGLES"),a=this._isvip("SINGLES"),i=this._isew("SINGLES"),d.push({url:"SINGLES",stake:n,vip:a,ew:i,schd:o})):this._eachChoice(function(e,t,n,a,i,o,r,s){if(i<=0)return!1;var l=a;c&&(l=R("input[id='actualSelection."+a+"']")[0].value),d.push({url:l,stake:i,vip:s,ew:r})}),Log.isDebugEnabled()&&Log.debug("SinglesController, placing bet at "+(new Date).getTime()),this._abortSave(),betslipAjaxPost({action:PLACEBET_URL,payload:{isAcceptActual:c,p:r,b:JSON.stringify(d),actualChoices:JSON.stringify(h.getActualChoices())},useQueue:!1,showProgress:!1,onSuccess:e,onFailed:t})},selectSingles:function(e){e?this._selSingles():this._unselSingles(),this._saveBetOptionsTasks.SINGLES.fireImmediately()},checkBet:function(e){this._checkBet(e)},calcBets:function(){this._resetBets()},_abortSave:function(){Object.values(this._saveBetOptionsTasks).forEach(function(e){e.cancel()})},_activate:function(){Log.debug("executed SinglesController._activate"),this._putCursor(this._stakeElArr()),this._resetBets(),this._vipBetHint()},_resetBets:function(){this._silentCheck(this._isSingles()?"SINGLES":"ALL"),this.resetVisabilitySaveBetslipCode()},_checkBet:function(e){this._silentCheck(e)},_silentCheck:function(e){var t,n,a,i,o,r="SINGLES"==e,s=this._checkEachBet(r),l=null,c=this._isew("SINGLES"),d=!0;for(_sUrl in s){if(t=s[_sUrl],a=this._isewEl(_sUrl),i=this._isvipEl(_sUrl),!(l=this._stakeEl(_sUrl)))return;n=l.attr("rel"),_sUrl!=e&&r&&l.val(n),_sUrl!=e&&t.showhint&&l.val(n),r&&t.ewenabled&&(c?this._checkEl(a):this._uncheckEl(a)),t.hasvip&&r||(t.hasvip&&!r?this._enableEl(i):!t.hasvip&&r?d=!1:t.hasvip),t.hasvip&&!r||(this._uncheckEl(i),this._disableEl(i)),this._betReturns(_sUrl,t.payout)}r&&(o=this._isvipEl("SINGLES"),d?this._enableEl(o):(this._disableEl(o),this._uncheckEl(o)));var u=this;R.when(u._calcResult(s)).done(function(e){u._totalReturns(e.payout),u._totalCost(e.cost)})},_checkEachBet:function(l){var c,d,u=this,h={},p=this._stake("SINGLES"),f=this._isew("SINGLES");return this._eachChoice(function(e,t,n,a,i,o,r,s){c=l?p:i,d=l?!!f&&u._ewenabled(a):r,c?(h[a]=u._calcBet(a,c,d),h[a].hasvip=u._hasVip(a,c)):h[a]={showhint:!0,payout:0,cost:0},l&&(h[a].ewenabled=u._ewenabled(a))}),h},_calcResult:function(e){var t,n=0,a=0,i=!1,o=[];for(sUrl in e)a+=(t=e[sUrl]).payout,n+=t.cost,t.halfplaced&&o.push(t.halfplaced),t.uncalc&&(i=!0);return L(o),{payout:a=i?0:a,cost:n}},_calcBet:function(e,t,n){var a=this._eprice(e),i=this._halfplace(e),o=[{eprice:a,halfplace:i,ewfraction:this._ewfraction(e)}],i=!!(n&&i<t)&&{name:R($$("selection.name."+e)).text(),win:t,place:t/2},e=this._betCalc.calc(o,t,n);return{halfplaced:i,uncalc:a<0,stake:t,payout:e.payout,cost:e.cost}},_selSingles:function(){var e,t,l=this,c=!1;this._eachChoice(function(e,t,n,a,i,o,r,s){e.val(o),l._disableEl(e),n&&(l._uncheckEl(n),l._disableEl(n)),t&&(l._uncheckEl(t),l._disableEl(t),c=!0),l._showEl($$("max-stake-inactive-"+a)),l._hideEl($$("max-stake-"+a)),l._betReturns(a,0)}),this._enableEl(R("#singles\\-bet")),c&&(e=R("#singles\\-ew\\-container"),t=this._isewEl("SINGLES"),this._enableEl(t),this._showEl(e)),this.checkBet("SINGLES")},_unselSingles:function(){var l=this._stake("SINGLES"),c=this._isvip("SINGLES"),d=this._isew("SINGLES"),u=this,e=(this._cachedStakes.SINGLES=0,this._eachChoice(function(e,t,n,a,i,o,r,s){0<l&&e.val(l),u._enableEl(e),n&&u._hasVip(a,l)&&(c&&u._checkEl(n),u._enableEl(n)),t&&(d&&u._checkEl(t),u._enableEl(t)),u._hideEl($$("max-stake-inactive-"+a)),u._showEl($$("max-stake-"+a)),u._cachedStakes[a]=l}),this._stakeEl("SINGLES")),e=(e.val(e.attr("rel")),this._disableEl(e),this._isvipEl("SINGLES")),e=(this._disableEl(e),this._uncheckEl(e),R("#singles\\-ew\\-container")),t=this._isewEl("SINGLES");this._hideEl(e),this._uncheckEl(t),this._resetBets()},_eachChoice:function(c){var d=this;R("input[id*='stake.']").each(function(e,t){var n=(t=R(t)).attr("id").replace("stake.",""),a=t.attr("rel"),i=d._stakeVal(t.val(),a),o=d._isvipEl(n),r=!!o&&!!hasProp(o,"checked"),s=d._isewEl(n),l=!!s&&!!hasProp(s,"checked");c(t,s,o,n,i,a,l,r)})},_betReturns:function(e,t){e=$$("returns.singles."+e);e&&R(e).html(betslipFormatValue(t))},_stakeElArr:function(){var e=this._isSingles()?R("#singles-bet"):R("input[id*='stake.']");return!!e&&R(e)},_stakeEl:function(e){e="SINGLES"==e?R("#singles\\-bet"):$$("stake."+e);return!!e&&R(e)},_isewEl:function(e){e="SINGLES"==e?R("#singles\\-ew"):$$("ew."+e);return!!e&&R(e)},_isvipEl:function(e){e="SINGLES"==e?R("#singles\\-vip"):$$("vip."+e);return!!e&&R(e)},_isvip:function(e){return hasProp(this._isvipEl(e),"checked")},_isSingles:function(){return hasProp(R("#singles\\-choose"),"checked")},_halfplace:function(e){e=$$("halfplace."+e);return this._parseFloat(e)},_ewfraction:function(e){e=$$("ew.fraction."+e);return this._parseFloat(e)},_ewenabled:function(e){e=$$("ew.enabled."+e);return!!e&&"true"===e.value},_eprice:function(e){e=$$("eprice."+e);return this._parseFloat(e)}}),E=n.extend({_saveBetOptionsTask:{},_cachedStake:0,init:function(){this._super(ACCUMULATOR_VIEW),this._betCalc=new A},_initSaveStake:function(){var e=this;this._cachedStake=this._stake(),this._saveBetOptionsTask=new k(300,function(){e.postSaveBetOpstions(e.createBetOptions())})},onStakeChange:function(e){var t=this._stake();t!==this._cachedStake&&(this.checkBet(e),this._cachedStake=t,this._saveBetOptionsTask.activete())},onBetOptionsChange:function(e){e=e||this.getSUrl("bet_type_selection");this.checkBet(e),this._saveBetOptionsTask.fireImmediately()},createBetOptions:function(){var e={p:r,bt:this.getSUrl("bet_type_selection"),st:this._stake(),ew:this._isew(),v:this._isvip()};return this._appendBetOptions(e),e},_appendBetOptions:function(e){},updateMinStake:function(){var e=R("#bet_type_selection").find(":selected").data("formattedMinStake");R("#min-stake").text(e)},fixStakes:function(e){e=e.map(function(e){return{bet:"accumulator.stake",stake:e.stake}});this._replaceStakeValue(e)},changeBetType:function(e){this.updateMinStake(),this.onBetOptionsChange(e)},checkBet:function(e){this._updateSubbetCount(e),this._checkBet(e),this._afterCheckBet(e)},_updateBonus:function(e){var t=document.getElementById("current-bonus-container"),n=document.getElementById("current-bonus-message"),a=document.getElementById("bonus-tooltip__current-bonus"),i=document.getElementById("currentBonusMessage."+e),n=(i&&i.getAttribute("value")&&a&&t&&n?(i=i.getAttribute("value"),n.innerText=i,a.innerText=i,t.classList.remove("hidden")):t&&t.classList.add("hidden"),document.getElementById("next-bonus-container")),a=document.getElementById("next-bonus-message"),i=document.getElementById("nextBonusMessage."+e);i&&i.getAttribute("value")&&n&&a?(a.innerText=i.getAttribute("value"),n.classList.remove("hidden")):n&&n.classList.add("hidden")},_afterCheckBet:function(e){this._updateBonus(e)},calcBets:function(){this._resetBets()},getSUrl:function(e){return R("#"+e).val()},_abortSave:function(){this._saveBetOptionsTask.cancel()},placeBet:function(e,t,n){var a=[{bettype:this.getSUrl("bet_type_selection"),stake:this._stake(),vip:this._isvip(),ew:this._isew()}];this._abortSave(),betslipAjaxPost({action:PLACEBET_URL,payload:{isAcceptActual:!!n,p:r,b:JSON.stringify(a)},useQueue:!1,showProgress:!1,onSuccess:e,onFailed:t})},hasAnyStake:function(){return Boolean(this._stake())},_activate:function(){Log.debug("executed "+this._controllerName()+"._activate");var e=this._stakeEl();this._putCursor(e),this._resetBets(),this._vipBetHint()},_resetBets:function(){var e=this.getSUrl("bet_type_selection");this._checkBet(e),this._afterCheckBet(e),this.resetVisabilitySaveBetslipCode()},_getSubbetCount:function(e){e=R("#subbetCount\\."+e);return 0<e.length?parseInt(e.val()):null},_updateSubbetCount:function(e){e=this._getSubbetCount(e);null!=e&&R("#accumulator\\.subbet\\-count").html(e)},_checkBet:function(e){var t=this._stakeEl();if(!t)return!1;var n=t.attr("rel"),t=this._stakeVal(t.val(),n),a=this._isew(),i=this._isvipEl();this._setupCurrentMaxStake(e),this._setupCurrentTotalPrice(e),this._hasVip(e,t)?(this._enableEl(i),this._isvip()):(this._disableEl(i),this._uncheckEl(i)),this._silentCheck(e,t,n,a)},_setupCurrentMaxStake:function(e){R("#max-stake a").attr("maxstakevalue",R("#max\\."+e).val()),R("#max-stake a").text(R("#max\\.formated\\."+e).val())},_setupCurrentTotalPrice:function(e){e=R("#totalPrice\\."+e).val();e?(R("#total-price").text(e),R("#total-price-container").show()):(R("#total-price-container").hide(),R("#total-price").text(""))},_transformBetType:function(e){return e},_silentCheck:function(e,t,n,a){var i=this;e=this._transformBetType(e),R.when(i._calcResult(e,t,a)).done(function(e){i._totalReturns(e.payout-e.bonus),i._expressBonus(e.bonus),i._totalCost(e.cost)})},_calcResult:function(i,e,t){var o,r,s,n,a,l;return e?(r=!(o=[]),s=0,n=this._halfplace(i),a=[],this._eachChoice(function(e,t,n,a){n={ewfraction:n,eprice:t,isew:1!=n};"ANTIEXPRESS"==i&&(n.antiexpPrice=a),o.push(n),s+=1+t,t<0&&(r=!0)}),l=(l=this._expresses(i)).length?this._calcCombinations(l,o,i,e,t,n,r):this._calcAll(o,i,e,t,n,r),t&&n<e&&a.push({name:R('option[value="'+i+'"]').text(),win:e,place:e/2}),L(a),{totalprice:s,uncalc:r,payout:l.payout,bonus:l.bonus,cost:l.cost}):{payout:0,bonus:0,cost:0}},_betsByIndexes:function(e,t){for(var n=[],a=0,i=e.length,o=null,r=null;a<i;a++){for(var s,r={id:(o=e[a]).join(),choices:[]},l=0,c=o.length;l<c;l++)s=o[l],r.choices.push(t[s]);n.push(r)}return n},_calcCombinations:function(e,t,n,a,i,o,r){Log.debug(this._controllerName()+"._calcCombinations, START");for(var s=(new Date).getTime(),l=0,c=0,d=0,u=!r,h=e.length-1;0<=h;h--){var p,f=e[h],f=this._betsByIndexes(f,t);u&&l<(p=(f=this._betCalc.calcReturns(0,0,f,n,a,i,o)).payout+f.bonus)&&(l=p,c=f.bonus)}r=this._getSubbetCount(n);return d+=this._betCalc.calcCost(r,a,i,o),Log.debug(this._controllerName()+"._calcCombinations, END, "+((new Date).getTime()-s)+"ms"),{payout:l,bonus:c,cost:d}},_calcAll:function(e,t,n,a,i,o){Log.debug(this._controllerName()+"._calcAll, START");var r=(new Date).getTime(),e=[{choices:e.concat()}],s=this._betCalc.calcCost(e,n,a,i),o=o?{payout:0,bonus:0}:this._betCalc.calcReturns(0,0,e,t,n,a,i);return Log.debug(this._controllerName()+"._calcAll, END, "+((new Date).getTime()-r)+"ms"),{payout:o.payout+o.bonus,bonus:o.bonus,cost:s}},_eachChoice:function(o){var r=this;R("input[id*='eprice.']").each(function(e,t){var n=(t=R(t)).attr("id").replace("eprice.",""),t=r._parseFloat(t),a=$$("ew.fraction."+n),a=r._parseFloat(a),i=$$("antiexp.fraction."+n),i=r._parseFloat(i);o(n,t,a,i)})},_ewEl:function(){var e=$$("accumulator.ew");return!!e&&R(e)},_isew:function(){return hasProp(this._ewEl(),"checked")},_stakeEl:function(){var e=$$("accumulator.stake");return!!e&&R(e)},_stake:function(){var e=null,t=null,n=this._stakeEl();return n&&(e=(n=R(n)).val().trim(),t=n.attr("rel").trim()),this._stakeVal(e,t)},_isvipEl:function(){var e=$$("accumulator.vip");return!!e&&R(e)},_isvip:function(){return hasProp(this._isvipEl(),"checked")},_halfplace:function(e){e=$$("halfplace."+e);return this._parseFloat(e)},_expresses:function(e){e=$$("systemExpresses."+e);if(e)try{return JSON.parse(R(e).val())}catch(e){}return[]},_controllerName:function(){return"AccumulatorsController"}}),_=E.extend({init:function(){this._contentUrl=SYSTEM_VIEW,this._betCalc=new A},selectBanker:function(t){var e=this._getBankers(),n=e.filter(function(e){return e!==t}),a=this._getFoldSize();e.length!==n.length?e=n:e.length<a-1&&!this._isChoiceRelated(t)&&e.push(t),this._saveBankers(e),this.postSaveBetOpstions(this.createBetOptions(),function(){loadCurrentBetslipPage()})},_appendBetOptions:function(e){var t=this._getBankers();t.length&&(e.bankers=JSON.stringify(t))},_afterCheckBet:function(){this._renderBankers(this._getBankers())},_renderBankers:function(o){var r=this._getBankers().length<this._getFoldSize()-1,s=this;R('[id^="banker."]').each(function(e,t){var n=t.id.replace("banker.",""),a=0<o.filter(function(e){return e===n}).length,i=s._isChoiceRelated(n);t.checked=a&&!i,i||!a&&!r?t.setAttribute("disabled",!0):t.removeAttribute("disabled")})},_getChoices:function(){var i=[];return this._eachChoice(function(e,t,n,a){i.push(e)}),i},_isChoiceRelated:function(e){return 0<R('[data-betslip-remove-choice="'+e+'"]').siblings(".related-info").length},_getSubbetCount:function(){var e=this._expresses(),t=[];return e.forEach(function(e){e.forEach(function(e){e=e.sort().join();t.indexOf(e)<0&&t.push(e)})}),t.length},_getFoldSize:function(){return parseInt(this.getSUrl("bet_type_selection"))},_getBankers:function(){var e=this._getFoldSize(),e=R("#bankers\\."+e);return 0<e.length?JSON.parse(e.val()):[]},_saveBankers:function(e){var t=this._getFoldSize();R("#bankers\\."+t).val(JSON.stringify(e))},_Combination:function(e,t){this.length=e,this.factor=t,this.hasNext=!0,this.currentElem=t,this.currentCombination=new Array(t+2),this.currentCombination[0]=0;for(var n=1;n<=t;n++)this.currentCombination[n]=n-1;this.currentCombination[t+1]=e,this.next=function(){var e=this.copyResult();if(0<this.currentElem)this.currentCombination[this.currentElem]=this.currentElem,this.currentElem--;else if(this.currentCombination[1]+1<this.currentCombination[2])this.currentCombination[1]++;else{for(var t=1,n=!(this.currentElem=2);!n;)this.currentCombination[this.currentElem-1]=this.currentElem-2,(t=this.currentCombination[this.currentElem]+1)===this.currentCombination[this.currentElem+1]?this.currentElem++:n=!0;this.factor<this.currentElem?this.hasNext=!1:(this.currentCombination[this.currentElem]=t,this.currentElem--)}return e},this.copyResult=function(){return this.currentCombination.slice(1,this.factor+1)}},_createExpress:function(e,t){if(void 0===e||void 0===t||e<=t)return[];for(var n=new this._Combination(e,t),a=[];n.hasNext;)a.push(n.next());return a},_transformBetType:function(e){var t=parseInt(e);return isNaN(t)||t<2||20<t?e:2===t?"DOUBLES":3===t?"TREBLES":"FOLDS"+t},_expresses:function(){var e=this._getFoldSize(),t=$$("systemExpresses."+e),n=[];if(t)try{n=JSON.parse(R(t).val())}catch(e){}0!==n.length&&0!==n[0].length||(a=0,this._eachChoice(function(){a++}),n=[n=this._createExpress(a,e)]);var a,i,o,r=this._getBankers();return 0<r.length&&(i=(a=this._getChoices()).map(function(e,t){return{index:t,sUrl:e}}).filter(function(e){return 0<=r.indexOf(e.sUrl)}).map(function(e){return e.index}),o=[],n.forEach(function(e){e=e.filter(function(t){return 0===i.filter(function(e){return t.indexOf(e)<0}).length});0<e.length&&o.push(e)}),n=o),n},_halfplace:function(){var e=$$("halfplace."+this._getFoldSize());return this._parseFloat(e)},_controllerName:function(){return"SystemController"},changeBetType:function(e){e=e.options[e.selectedIndex],e=parseInt(e.value);this.updateMinStake(),this.onBetOptionsChange(e)},openCalculator:function(){var e=R(".select-bet .hint-box").toArray().map(function(e){var t=e.querySelector(".underline").innerText,n=e.querySelector(".marketName").innerText,e=e.querySelector(".bold"),a=e.getAttribute("data-calc-last-fraction"),i=e.getAttribute("data-calc-accepted-selection-name"),o=e.getAttribute("data-calc-price"),e=e.id.replace("selection.name.","").split(",");return{fraction:a,eventName:t,marketName:n,price:o,choiceName:i,eventId:parseInt(e[0]),selectionUid:e[1]}}),t=R("#bet_type_selection option").toArray().map(function(e){return parseInt(e.value)}),n=this._getFoldSize(),a=R("#bankers\\."+this._getFoldSize()).toArray()[0],e={choices:e,bankers:JSON.parse(a.value),availableFolds:t,selectedFold:n,intersections:R("#tab_accumulator").data("choicesIntersections"),stake:parseFloat(R("#accumulator\\.stake").val())||void 0};window.Emitter.emit("modal.calculator.open",e)}}),m=E.extend({init:function(){this._contentUrl=ANTIEXPRESS_VIEW,this._betCalc=new A},getSUrl:function(){return"ANTIEXPRESS"},_controllerName:function(){return"AntiexpressesController"}}),v=E.extend({init:function(){this._contentUrl=MULTIPLE_VIEW,this._betCalc=new w},_controllerName:function(){return"MultiplesController"},_calcResult:function(e,t,n){var a,i,o,r,s,l;return t?(i=!(a=[]),o=0,r=this._halfplace(e),s=[],this._eachChoice(function(e,t,n){a.push({ewfraction:n,eprice:t,isew:1!=n}),o+=1+t,t<0&&(i=!0)}),l=this._calcAll(a,e,t,n,r,i),n&&r<t&&s.push({name:R('option[value="'+e+'"]').text(),win:t,place:t/2}),L(s),{totalprice:o,uncalc:i,payout:l.payout,bonus:l.bonus,cost:l.cost}):{payout:0,bonus:0,cost:0}},_calcAll:function(e,t,n,a,i,o){Log.debug("MultiplesController._calcAll, START");var r=(new Date).getTime(),e=this._betCalc.combine(e,t),s=this._betCalc.calcCost(e,n,a,i),l=null,l=o||e.N?{payout:0,bonus:0}:e.specialN?this._betCalc.calcReturns(0,0,e.combinations,t,n,a,i):this._betCalc.calcReturns(0,0,e,t,n,a,i);return Log.debug("MultiplesController._calcAll, END, "+((new Date).getTime()-r)+"ms"),{payout:l.payout+l.bonus,bonus:l.bonus,cost:s}}}),S=g.extend({init:function(){this._contentUrl=FREEBET_VIEW,this._betCalc=new b},showEnterStakeDialog:function(){R.modal.close(),R("#no_selected_freebets").modal({position:["20%"]})},placeBet:function(e,t){var n=R(".freebet\\-radio:checked").val();null!=n&&"undefined"!==n||(R.modal.close(),R("#no_selected_freebets").modal({position:["20%"]}));n=[{freebetindex:n,ew:this._isew(n)}];this._abortSave(),betslipAjaxPost({action:PLACEBET_URL,payload:{p:"FREEBETS",b:JSON.stringify(n)},useQueue:!1,showProgress:!1,onSuccess:e,onFailed:t})},selectFreeBet:function(e){this.postSaveBetOpstions(this.createBetOptions(e)),this.checkBet(e)},_initSaveStake:function(){},createBetOptions:function(e){return{fi:e,p:r,ew:this._isew(e)}},_activate:function(){Log.debug("executed FreebetsController._activate"),this._vipBetHint(),this._resetBets()},checkBet:function(e){this._resetBets()},_getChoiceEprice:function(){return parseFloat(R('[id="eprice.freebet"]').val())},_resetBets:function(){var t=!1,n=this,a=1+this._getChoiceEprice();R("[id^='freebet.radio.']").each(function(){var e=parseFloat(R(this).attr("data-free-bet-max-float")),e=(e&&(e<a?(R(this).prop("checked",null),R(this).prop("disabled",!0)):R(this).prop("disabled",!1)),R(this).prop("checked"));n._recalculateFreebet(R(this).val(),e),t|=e}),this._printFreebetTotals(!t,0,0),this.resetVisabilitySaveBetslipCode()},_stake:function(e){e=$$("freebet.stake."+e);return!!e&&R(e).val()},_isew:function(e){return hasProp($$("freebet.ew."+e),"checked")},_recalculateFreebet:function(e,t){var n=this._stake(e),a=this._isew(e),n=this._calcBet("freebet",n,a),a=this._calcResult([n]);this._freebetReturn(e,a.payout),this._printFreebetTotals(t,a.cost,a.payout)},_freebetReturn:function(e,t){e=$$("freebet.returns."+e);e&&R(e).html(betslipFormatValue(t))},_printFreebetTotals:function(e,t,n){e&&(this._totalReturns(n),this._totalCost(t))}}),T=Class.extend({iterate:function(e,t,n){for(var a,i=0,o=0,r=0,s=e.length;r<s;r++)i+=t((a=e[r]).eprice,a.ewfraction,a.halfplace),o+=n(a.eprice,a.ewfraction,a.halfplace);return{payout:i,cost:o}}}),C=T.extend({calc:function(e,a,i){return a=Number(a),i=Boolean(i),this.iterate(e,function(e,t,n){return e<=0?0:(e+1)*a+(i?(e*t+1)*(n<a?a/2:a):0)},function(e,t,n){return a+(i?n<a?a/2:a:0)})}}),b=C.extend({calc:function(e,t,n){e=this._super(e,t,n);return e.payout-=e.cost,e}}),A=T.extend({calcCost:function(e,t,n,a){return("number"==typeof e?e:e.length)*(t+(n?a<t?t/2:t:0))},calcReturns:function(e,t,n,a,i,o,r){var s=getBetslip(),l=s.getSUrl("bet_type_selection"),s=s._getSubbetCount(l),l=document.querySelector("#totalPriceFloat\\."+l);return{payout:parseFloat(l.getAttribute("value"))*i*s,bonus:0}}}),w=A.extend({_withsingles:{PATENT:!0,LUCKY15:!0,LUCKY31:!0,LUCKY63:!0,ALPHABET:!0},withsingles:function(e){return Boolean(this._withsingles[e])},calcCost:function(e,t,n,a){return(e.specialN||e.N||e.length)*(t+(n?a<t?t/2:t:0))},combine:function(e,t){if(e){function n(e){for(var t=1,n=1;n<=e;n++)t*=n;return t}var a=e.length;if("STRAIGHT_FORECAST"==t||"STRAIGHT_TRICAST"==t||"STRAIGHT_FORECAST_DOUBLES"==t)return{N:1};if("ANY_ORDER_FORECAST"==t||"ANY_ORDER_TRICAST"==t)return{N:1};if("REVERSE_FORECAST"==t)return{N:2};if("REVERSED_FORECAST_DOUBLES"==t)return{N:4};if("REVERSE_TRICAST"==t)return{N:6};if("COMBINATION_FORECAST"==t)return{N:2*n(a)/(n(2)*n(a-2))};if("COMBINATION_TRICAST"==t)return{N:6*n(a)/(n(3)*n(a-3))};if("SINGLE_STAKES_ABOUT"==t){if(2!=e.length)return{N:2};var i=[],a=jQuery.extend(!0,{},e[0]);a.atc=!0;(o=jQuery.extend(!0,{},e[0])).eprice=o.eprice-1,o.atc=!0;var o,r,s=jQuery.extend(!0,{},e[1]);return s.atc=!0,(r=jQuery.extend(!0,{},e[1])).eprice=r.eprice-1,r.atc=!0,i.push({choices:[o]}),i.push({choices:[s]}),i.push({choices:[r]}),i.push({choices:[a]}),{specialN:2,combinations:i}}if("DOUBLE_STAKES_ABOUT"==t)return 2!=e.length?{N:2}:(i=[],o=jQuery.extend(!0,{},e[0]),r=jQuery.extend(!0,{},e[1]),2<=o.eprice+1?(o.eprice=o.eprice-2,r.eprice=2*(r.eprice+1)-1):(r.eprice=(r.eprice+1)*(o.eprice+1)-1,o.eprice=-1),o.atc=!0,r.atc=!0,i.push({choices:[o]}),i.push({choices:[r]}),o=jQuery.extend(!0,{},e[0]),2<=(r=jQuery.extend(!0,{},e[1])).eprice+1?(r.eprice=r.eprice-2,o.eprice=2*(o.eprice+1)-1):(o.eprice=(o.eprice+1)*(r.eprice+1)-1,r.eprice=-1),o.atc=!0,r.atc=!0,i.push({choices:[r]}),i.push({choices:[o]}),{specialN:2,combinations:i});if("ROUND_ROBIN"==t){for(var l=this.defaultCombine(e,t),c=!0,d=0;d<=3;d++)for(var u=0;u<e.length;u++){var h=[],p=null;c?(p=jQuery.extend(!0,{},e[u])).isAnyToComePart=!0:(p=e[u]).isAnyToComePart=!1,h.push(p),l.push({choices:h}),c=!c}return{specialN:10,combinations:l}}if("FLAG"!=t)return"UNION_JACK"==t?9!=e.length?{N:8}:((s=[]).push({choices:[e[0],e[1],e[2]]}),s.push({choices:[e[3],e[4],e[5]]}),s.push({choices:[e[6],e[7],e[8]]}),s.push({choices:[e[0],e[3],e[6]]}),s.push({choices:[e[1],e[4],e[7]]}),s.push({choices:[e[2],e[5],e[8]]}),s.push({choices:[e[0],e[4],e[8]]}),s.push({choices:[e[2],e[4],e[6]]}),s):"YANKEE"==t?{specialN:11,combinations:this.defaultCombine(e,t)}:"SUPER_YANKEE"==t?{specialN:26,combinations:this.defaultCombine(e,t)}:"HEINZ"==t?{specialN:57,combinations:this.defaultCombine(e,t)}:"SUPER_HEINZ"==t?{specialN:120,combinations:this.defaultCombine(e,t)}:"GOLIATH"==t?{specialN:247,combinations:this.defaultCombine(e,t)}:this.defaultCombine(e,t);for(var f=this.defaultCombine(e,t),c=!0,d=0;d<6;d++)for(u=0;u<e.length;u++){h=[],p=null;c?(p=jQuery.extend(!0,{},e[u])).isAnyToComePart=!0:(p=e[u]).isAnyToComePart=!1,h.push(p),f.push({choices:h}),c=!c}return{specialN:23,combinations:f}}},defaultCombine:function(e,t){for(var n=this.withsingles(t),a=null,i=[{choices:e}],o=1,r=Math.pow(2,e.length)-1;o<r;o++){for(var a=[],s=0;s<o;s++)o&Math.pow(2,s)&&a.push(e[s]);1===a.length&&!n||i.push({choices:a})}return i}}),window.Betslip={},window.Betslip.STAKE_LIMIT=9999999999.99,i.ONECLICK=new e,i.ACCUMULATORS=new E,i.MULTIPLES=new v,i.FREEBETS=new S,i.SINGLES=new g,i.SHORT=new t,i.ANTIEXPRESSES=new m,i.SYSTEM=new _,R(document).on("click","[data-coeff-uuid]",function(){var e,t,n,a=M(this);initData.isPunterIdBlocked?(e={selection:a.u,type:a.prt},R(document).trigger("selection.highlight",[e]),R("#common_messenger_msg").html(initData.punterIdBlockedMsg),R("#common_messenger").addModalToViewQueue({onClose:function(){R(document).trigger("selection.clearHighlight"),this.closeModal()},position:["20%"]})):(e=(e=WebLocalStorage.controller.getParsedItem("editBetState"))&&e.isAddingChoicesMode,t=!BetslipStorageFacade.controller.isBetslipActive(),n=BetslipStorageFacade.controller.isOpenCoupon(),t&&e&&n||(TrackingEngine.trigger(TrackingEngine.EVENT.MARKET_CHOICE_CLICKED,a.u),getBetslip().addRemove(this)))}),R(document).on("click","[data-betslip-remove-choice]",function(){var e=R(this).data("betslipRemoveChoice");TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_REMOVE_CHOICE_CLICKED,e),getBetslip().remove(e)}),window.toggleBetslipTab=function(e){e=i[e||o];if(!e)return!1;getBetslip()._abortSave(),betslipAjaxPost({action:e._contentUrl,payload:{},useQueue:!0,showProgress:!0,onSuccess:function(e){loadBetslipContent(e)},onFailed:O})},window.getOneClick=function(){return i.ONECLICK},window.getBetslip=function(){return i[r]},window.getBetslipCurrentPage=function(){return r},window.toggleBetslip=function(){BetslipStorageFacade.controller.toggleBetslip(),loadCurrentBetslipPage()},window.onOpenBetsHeaderClick=function(){BetslipStorageFacade.controller.toggleOpenBets(),updateCoupon()},window.updateCoupon=function(){var e,t=R("#coupon_body");BetslipStorageFacade.controller.isOpenCoupon()?(toggleStakeNo(!(e=BetslipStorageFacade.controller.isBetslipActive())),t.toggle(e),R("#header_bet_slip").toggleClass("active",e),R("#header_open_bets").toggleClass("active",!e),adjustScroll(),displaySelectionName()):(t.hide(),(e=R("#betslip-container")).is(".coupon-not-wide")&&e.addClass("with-bottom-border"),R("#header_bet_slip, #header_open_bets").removeClass("active"))},0!==R("#betslip-container").length&&(BetslipStorageFacade.controller.isBetslipActive()?loadCurrentBetslipPage(!0):((initData.isOpenBetsEnabled&&initData.isLogged?(updateCoupon(),I):toggleBetslip)(),R("#coupon_header").toggle(!isOneClickChecked()))),D(),window.addEventListener("storage",function(e){var t;initData.isBetConstructorPage||"isBetslipActive"!=e.key&&"isCouponOpen"!=e.key||(e=BetslipStorageFacade.controller.isOpenCoupon(),((t=BetslipStorageFacade.controller.isBetslipActive())?loadCurrentBetslipPage:updateCoupon)(),R(document).trigger("openBetsVisibleChange",[e&&!t]))}))});var BETSLIP_PLACE_MODE_BLOCK_KEY="betslipPlaceModeBlock",BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR="#betslipPlacingModeBlockId";function showHideBetslipPlaceModeBlock(){$(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).is(":visible")?($(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).hide(),PrefStorage.set(BETSLIP_PLACE_MODE_BLOCK_KEY,!1)):($(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).show(),PrefStorage.set(BETSLIP_PLACE_MODE_BLOCK_KEY,!0)),adjustScroll()}function setupBetslipPlaceModeBlockVisibility(){"true"==PrefStorage.get(BETSLIP_PLACE_MODE_BLOCK_KEY)?$(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).show():$(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).hide()}function showStakeNo(){0<$("[id='stakeNoWideScreenId']").length&&(isWideScreen()?$(".bet-slip").removeClass("betslip-not-wide-screen"):$(".bet-slip").addClass("betslip-not-wide-screen")),rightColumnPaddingTop()}function toggleStakeNo(e){var t=$("#stakeNoWideScreenId"),e=(e?(t.hide(),$(".bet-slip").removeClass("betslip-not-wide-screen")):showStakeNo(),$("#betslip-container"));e.is(":not(.coupon-not-wide)")||0==t.length?(e.removeClass("with-bottom-border"),$("#coupon_body").show()):e.addClass("with-bottom-border")}function rightColumnPaddingTop(){var e=$("[data-scrollable-container]");e.length&&e.trigger("scroll")}function getHighlightedSelectionUIDs(e){var a=initData.isLogged,i=[];return e.forEach(function(e){var t=$("input[value='"+e+"']"),n=t.data("acceptedSelectionUid"),t=t.data("acceptedSelectionType");a&&e!==n||i.push({selection:e,type:t})}),i}var BetslipRemoveChoiceManager,BetslipStyleUpdater,ChoicesUpdater,CashOut,BetPlacingModes={GreaterOrEqualsToCurrent:"GreaterOrEqualsToCurrent",Any:"Any",EqualsToCurrent:"EqualsToCurrent"};function getBetPlacingMode(){var e=BetPlacingModes.GreaterOrEqualsToCurrent;return $("#betPlacingModeRadio_"+BetPlacingModes.Any).prop("checked")?e=BetPlacingModes.Any:$("#betPlacingModeRadio_"+BetPlacingModes.EqualsToCurrent).prop("checked")&&(e=BetPlacingModes.EqualsToCurrent),e}function setupBetPlacingModeHandler(){var a=$("#betPlacingModeRadioBlockId").find("input");a.on("click",function(){var e,t=$(this).val(),n=null;a.each(function(e){$(this).val()!=t&&$(this).is(":checked")&&(n=$(this).val())}),n&&($(this).prop("checked",!1),e={action:"PLACING_MODE_URL",payload:{betPolicy:t},useQueue:!1,showProgress:!1,onSuccess:function(){a.each(function(e){$(this).val()==t?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$(document).trigger({type:"placingmodechanged",val:t})},onFailed:window.betslipGeneralErrorHandler},betslipAjaxPost(e))})}function isMustApplyChanges(e,t){return!(!e||"REPLACE"!==t)||"INCREASE"===t&&e==BetPlacingModes.EqualsToCurrent||"DECREASE"===t&&(e==BetPlacingModes.EqualsToCurrent||e==BetPlacingModes.GreaterOrEqualsToCurrent)}function isNeedApplyChanges(e,t){if(e)for(var n=0;n<t.length;n++)if(isMustApplyChanges(e,t[n]))return!0;return!1}function setupPlaceBetAvailability(){var e=getBetPlacingMode(),t=!1,n=!1,a=(e&&$("[id^='choice.status.']").each(function(){t=t||isMustApplyChanges(e,$(this).val()),n=n||"REMOVE"===$(this).val()}),$("#betslip_placebet_btn_id"));$("#betslip_has_removed_choices_block").hide(),$("#betslip_apply_choices_block").hide(),a.data("enabled",!1).addClass("btn-place-bet-disabled"),n?$("#betslip_has_removed_choices_block").show():t?$("#betslip_apply_choices_block").show():a.data("enabled",!0).removeClass("btn-place-bet-disabled")}function adjustScroll(e){var t=document.querySelector(".scroll-selections"),n=document.querySelector("#betslip-container")||document.querySelector(".betslip-content"),a=$(window).height();if(n&&t){var i=t.scrollTop,o=($(t).css({"max-height":""}),$('table.select-bet > tbody > tr, div.select-bets-container > .select-bet, form[name="freebet"] > .bet-type')),r=o.length,s=0;if(0<r)for(var l=0;l<r;l++)s+=o.eq(l).outerHeight();a=a-(!(window.innerWidth<=1275||e)&&$(".broadcast-widget-interact").not(".broadcast-widget-interact__detached").innerHeight()||0)-$(".notifications__container").innerHeight()-$(".header__container").innerHeight()-($(n).outerHeight(!0)-s);$(t).css({"max-height":!isNaN(a)&&1<a?a:1}),t.scrollTop=i}rightColumnPaddingTop()}function getRightBarScrollWidth(){var e=$(".grid-main");return e.get(0).offsetWidth-e.get(0).clientWidth}function displaySelectionName(){$("[id^='selection.name.']").each(function(e,t){$(t).width()>=$(t).parent().width()?$(t).removeClass("display-inline"):$(t).addClass("display-inline")})}function preventBetslipMove(e){e.stopPropagation();var t=e.target.closest(".scroll-selections")||e.target.closest(".open-bets-container");if(!t||t.scrollHeight<=t.getBoundingClientRect().height)return e.preventDefault(),!1}function resolveBetslipUrl(e){function t(e){return initData.base_dir+"/"+e}var n=void 0;switch(e){case"REMOVE_URL":n=t("betslip/remove.htm");break;case"ADD_URL":n=t("betslip/add.htm");break;case"PLACING_MODE_URL":n=t("betslip/updatebetplacingmode.htm");break;case"CLEAR_URL":n=t("betslip/clear.htm");break;case"PLACEBET_URL":n=t("betslip/placebet.htm");break;case"SAVE_URL":n=t("betslip/save.htm");break;case"ACCUMULATOR_VIEW":n=t("betslip/accumulator.htm");break;case"SYSTEM_VIEW":n=t("betslip/system.htm");break;case"ANTIEXPRESS_VIEW":n=t("betslip/antiexpress.htm");break;case"MULTIPLE_VIEW":n=t("betslip/multiple.htm");break;case"SHORT_VIEW":n=t("betslip/short.htm");break;case"SINGLES_VIEW":n=t("betslip/singles.htm");break;case"FREEBET_VIEW":n=t("betslip/freebet.htm");break;case"RETAIN_URL":n=t("betslip/retain.htm");break;case"PLACEBET_ONECLICK_URL":n=t("betslip/placebetinoneclick.htm");break;case"UPDATE_URL":n=t("betslip/updatebetinoneclick.htm");break;case"BETSLIP_CODE_LOAD_URL":n=t("betslip/loadCouponCode.htm");break;case"BETSLIP_CODE_SAVE_URL":n=t("betslip/saveCouponCode.htm");break;case"PLACETICKET_URL":n=t("betslip/placeticket.htm");break;case"LOAD_URL":n=t("betslip/current.htm");break;case"UPDATE_CHOICES":n=t("betslip/updatechoices.htm");break;case"APPLY_ACTUAL_CHOICES":n=t("betslip/applyactualchoices.htm");break;case"CALC_CREDIT":n=t("betslip/calccredit.htm")}return n}function _validateDate(e){var t,n;return!new RegExp("[0-9]{4}-[0-9]{2}-[0-9]{2}").test(e.value)||(n=e.value.match(/(\d+)/g),n=new Date(n[0],n[1]-1,n[2]),t=new Date,e.diff&&t.setFullYear(t.getFullYear()+e.diff),t=e.inThePast?n<t:t<n,n=$(e.element).parent().find("select"),t?e.settings.unhighlight(n,e.settings.errorClass,e.settings.validClass):e.settings.highlight(n,e.settings.errorClass,e.settings.validClass),t)}document.addEventListener("client.loaded",function(){var t=document.querySelector(".betslip-wrapper");t&&new ResizeObserver(function(e){window.Emitter.emit("betslipContainerChangeSize",t)}).observe(t)}),document.addEventListener("client.loaded",function(){function e(){var e=$("#betslip-container"),t=$("#stakeNoWideScreenId");isWideScreen()?(e.is(".coupon-not-wide")&&BetslipStorageFacade.controller.isBetslipActive()&&($("#header_bet_slip").addClass("active"),$("#header_open_bets").removeClass("active"),$("#coupon_body").show()),e.removeClass("coupon-not-wide with-bottom-border"),0<t.length&&t.show()):(e.addClass("coupon-not-wide"),0<t.length&&(e.addClass("with-bottom-border"),$("#coupon_body").hide())),displaySelectionName(),rightColumnPaddingTop()}var t=!0;e(),window.Emitter.on("NotificationsChangeSize",function(){adjustScroll(t)}),window.Emitter.on("headerChangeSize",function(){adjustScroll(t)}),window.Emitter.on("broadcast.pinned",function(e){adjustScroll(t=e.detached)}),window.Emitter.on("broadcast.resize",function(e){adjustScroll(t=e.detached)}),window.addEventListener("resize",_.throttle(function(){e(),adjustScroll(t)},100))}),(BetslipRemoveChoiceManager=BetslipRemoveChoiceManager||{}).Controller=function(){this._activeSelectionUIDs=[],this.contains=function(e){return this._activeSelectionUIDs&&-1!=this._activeSelectionUIDs.indexOf(e.replace(",","@"))},document.addEventListener("client.loaded",function(){$(document).on("betslip.loaded openbets.loaded",function(e,t){t&&(BetslipRemoveChoiceManager.controller._activeSelectionUIDs=[],$.each(t,function(e,t){BetslipRemoveChoiceManager.controller._activeSelectionUIDs.push(t.selection)}))})})},BetslipRemoveChoiceManager.controller=new BetslipRemoveChoiceManager.Controller,(BetslipStyleUpdater=BetslipStyleUpdater||{}).Controller=function(){this.updateBetslip=function(e,t){e.forEach(function(e){new n(e).updateBetslipPrice(),new a(e).updateBetslipChoice()}),t.forEach(function(e){new i(e).updateBet()})};var n=function(n){this.updateBetslipPrice=function(){var e=function(){var e="",t="";switch(n.status){case"INCREASE":e="",t="updated-price";break;case"DECREASE":e="",t="updated-price";break;case"REPLACE":e="",t="updated-price"}return{arrow:function(e){if(e&&""!==e)return $('<span class="sprice-arrow '+(""==e?"red":""==e?"green":"")+'">'+e+"</span>");return null}(e),background:t}}(),t=$("[id='price.presentation."+n.selectionUID+"']");t.removeClass("updated-price").siblings(".sprice-arrow").remove(),t.addClass(e.background).text(n.price).after(e.arrow)}},a=function(e){this.updateBetslipChoice=function(){$("[id='eprice."+e.selectionUID+"']").val(e.eprice),$("[id='choice.status."+e.selectionUID+"']").val(e.status),$("[id='selection.name."+e.selectionUID+"']").html(e.selectionName),$("[id='eprice.freebet']").val(e.eprice),$("input[id = 'actualSelection."+e.selectionUID+"']").val(e.replacedSelectionUID).data("data-accepted-selection-type",e.replacedSelectionType),"REMOVE"==e.status?$("[id='display.is_not_active."+e.selectionUID+"']").show():$("[id='display.is_not_active."+e.selectionUID+"']").hide()}},i=function(t){this.updateBet=function(){var e;(e=$("[id='max-stake-"+t.type+"'] a")).text(t.formatedMaxStake),e.data("maxStake",t.maxStake),$("[id='max."+t.type+"']").val(t.maxStake),$("[id='max-stake-inactive-"+t.type+"']").text(t.formatedMaxStake),$("[id='min-stake-"+t.type+"']").text(t.formatedMinStake),$("[id='max.formated."+t.type+"']").val(t.formatedMaxStake),"function"==typeof getBetslip().getSUrl&&getBetslip().getSUrl("bet_type_selection")==t.type&&((e=$("[id='max-stake'] a")).attr("maxstakevalue",t.maxStake),e.text(t.formatedMaxStake),$("[id='min-stake']").text(t.formatedMinStake),$("[id='total-price']").text(t.totalPrice)),$("[id='totalPrice."+t.type+"']").val(t.totalPrice),$("[id='ANTIEXPRESS_TOTAL_PRICE']").val(t.calcTotalPrice)}}},(ChoicesUpdater=ChoicesUpdater||{}).Controller=function(){this._activeSubscritions={},this._updateCandidates=[],this._updateTimer=null;var h=new BetslipChoiceManager.Controller;this.applyChoices=function(){$(document).trigger("betslip.choicesUpdated",[h.getActualWithPriceType()]);var e={action:"APPLY_ACTUAL_CHOICES",payload:{actualChoices:JSON.stringify(h.getActualChoices())},useQueue:!0,showProgress:!0,onSuccess:function(e){loadBetslipContent(e)},onFailed:window.betslipGeneralErrorHandler};betslipAjaxPost(e)},this.subscribe=function(e){var t=this;t._activeSubscritions[e]||(t._activeSubscritions[e]=StompManager.subscribe(initData.stomp.priceChangesDestination+e.replace(/\//g,"%2f").replace(",","@"),function(e){t.subscribeHandler(e.headers.destination,e.body)}))},this.subscribeHandler=function(e,t){function n(e){return e.includes(".")&&e.lastIndexOf(".")+1!=e.length?$("[value='"+e+"']"):$("[id^='actualSelection."+e+"']")}var a,i,o,r,s,l,c,e=e.split("/"),d=e[e.length-1].replace("%2f",/\//g).replace("@",","),e=d.includes(".")&&d.lastIndexOf(".")+1!=d.length,u=this;e&&"SINGLES"==window.getBetslipCurrentPage()?(r=JSON.parse(t),o=0===$("[id='acceptedEprice."+d+"']").length,o=function(n,e,t,a,i){a/=i,i=t[window.initData.oddsType];{var o;return e?{selectionUID:t=$("[id^='actualSelection.']").filter(function(e,t){return n===t.value}).data("accepted-selection-uid"),price:i,status:"REPLACE",eprice:a,replacedSelectionType:"CP",replacedSelectionUID:n,selectionName:$("[id='selection.name."+t+"']").html(),replacedAcceptedEprice:o}:(o=parseFloat($("[id='acceptedEprice."+n+"']").val()),e=function(e,t){t-=e;return Math.abs(t)-.001<0?"NONE":t<0?"INCREASE":"DECREASE"}(a,o),{selectionUID:n,price:i,status:e,eprice:a,replacedSelectionType:"CP",replacedSelectionUID:n,selectionName:$("[id='selection.name."+n+"']").html()})}}(d,o,r.prices,r.numerator,r.denumerator),s=d,l=o.eprice,c=parseFloat($("[id='max-stake-"+s+"'] a").data("maxStake")),s=parseFloat($("[id='eprice."+s+"']").val()),c=(c*s/l).toFixed(2),s={type:d,formatedMaxStake:c,maxStake:c,formatedMinStake:$("[id='min-stake-"+d+"']").text()},(new BetslipStyleUpdater.Controller).updateBetslip([o],[s]),setupPlaceBetAvailability(),getBetslip().calcBets(),l=d.split(","),a={eventId:parseInt(l[0]),selectionUid:l[1],numerator:r.numerator,denominator:r.denumerator,cfId:r.cfId},h.getChoices().forEach(function(e){e.accepted!==d&&e.actual!==d||$("[id='actualSelection."+d+"']").data("actualChoice",a)})):e?(n(d).each(function(){u._setUpdateCandidate($(this).data("acceptedSelectionUid"))}),c=d,o=JSON.parse(t),s=c.split(","),l=parseInt(s[0]),s=s[1],r=o.prices[window.initData.oddsType],l={eventId:l,selectionUid:s,price:r,numerator:o.numerator,denumerator:o.denumerator},window.Emitter.emit("modal.calculator.update",l),s=o.numerator+"/"+o.denumerator,(l=document.querySelector("[id='selection.name."+c+"']")).setAttribute("data-calc-last-fraction",s),l.setAttribute("data-calc-price",r)):(i="ACTIVE"===t?"NONE":"REMOVE",n(d).each(function(){var e=$(this).data("acceptedSelectionUid");"REMOVE"==i?$("[id='display.is_not_active."+e+"']").show():$("[id='display.is_not_active."+e+"']").hide(),$("[id='choice.status."+e+"']").val(i),setupPlaceBetAvailability(),-1!==d.search(/total|handicap/i)&&u._setUpdateCandidate(e)}),getBetslip().calcBets())},this.unsubscribe=function(e){this._activeSubscritions[e]&&(StompManager.unsubscribe(this._activeSubscritions[e]),delete this._activeSubscritions[e])},this._setUpdateCandidate=function(e){-1===$.inArray(e,this._updateCandidates)&&this._updateCandidates.push(e)},this._initUpdater=function(){var t=this;null==this._updateTimer&&(this._updateTimer=setInterval(function(){var e=t._updateCandidates;t._updateCandidates=[],0<e.length&&t._updateBetslip(e)},1e3))},this.actualizeSubscriptions=function(){var t=this,e=this.makeSubscribeList();e.forEach(function(e){t.subscribe(e)}),this.makeUnsubscribeList(e).forEach(function(e){t.unsubscribe(e)})},this.makeSubscribeList=function(){var n=[];return h.getActual().forEach(function(e){var t=e.split(",")[0];-1===$.inArray(t,n)&&n.push(t);t=-1!==(t=e.substr(0,e.lastIndexOf("."))).search(/total|handicap/i)?t.replace(/\d*$/,""):t;-1===$.inArray(t,n)&&n.push(t),-1===$.inArray(e,n)&&n.push(e)}),n},this.makeUnsubscribeList=function(e){var t,n=[],a=this._activeSubscritions;for(t in a)a.hasOwnProperty(t)&&-1===$.inArray(t,e)&&n.push(t);return n},this.unsubscribeAll=function(){var t=this;$.each(this._activeSubscritions,function(e){t.unsubscribe(e)})},this._updateBetslip=function(e){var n=this,e={action:"UPDATE_CHOICES",payload:{selectionsJSON:JSON.stringify(e)},showProgress:!1,useQueue:!1,onSuccess:function(e){var t;e&&((e=e.UPDATE_WTO)&&(t=e.selections,e=e.bets,t)&&0<t.length&&e&&0<e.length?((new BetslipStyleUpdater.Controller).updateBetslip(t,e),n.actualizeSubscriptions(),setupPlaceBetAvailability(),getBetslip().calcBets(),isNeedApplyChanges(getBetPlacingMode(),$.map(t,function(e){return e.status}))||$(document).trigger("betslip.choicesUpdated",[h.getActualWithPriceType()])):loadCurrentBetslipPage())},onFailed:function(){}};betslipAjaxPost(e)},function(){var t=this;document.addEventListener("client.loaded",function(){$(document).on("betslip.loaded",function(e){0!==h.getAccepted().length?(setupPlaceBetAvailability(),t.actualizeSubscriptions(),t._initUpdater()):t.unsubscribeAll()}),$(document).on("click","#betslip_apply_choices",function(){t.applyChoices()}),$(document).on("placingmodechanged",function(e){setupPlaceBetAvailability()})})}.call(this)},ChoicesUpdater.controller=new ChoicesUpdater.Controller,window.MoneyFormatter={toMoneyFormat:function(e,t,n,a){t=null!=t?t:",",n=null!=n?n:2,a=null!=a?a:".",e=(e||"0").toString(),n=Math.abs(n),n=isNaN(n)?2:n;e=parseFloat(e);return(isNaN(e)?0..toFixed(n):e.toFixed(n).replace(/\d(?=(\d{3})+\.)/g,"$&"+t)).replace(/\./g,a)},parseMoneyString:function(e,t){e=e?e+"":"0",""!=(t=null!=t?t:",")&&(e=e.replace(new RegExp(t,"g"),""));t=parseFloat(e);return isNaN(t)?0:t}},(CashOut=CashOut||{}).Renderer=function(){var o=t("0");var r=[{type:"PLACEMENT",actions:[]},{type:"REJECTED",actions:[e]},{type:"OFFER_CHANGE",actions:[]},{type:"PAID",actions:[function(e,t){t.find("[data-bet-result-paid]").text(e.getPayout()),t.find(".coefficient").text("-");var t=e.getStatus(),n="place_BET_",a="open-bet",e=e.getBetId(),i="bet-status-win-icon.png";if(t){var o=document.querySelectorAll("#"+n+e+" ."+a+" img");if(o)for(var r={content:{text:window.PanbetConst.Messages.OPEN_BETS_WIN},show:{ready:!1}},s=0;s<o.length;s++){var l=o[s].src.split("/");l.pop(),l.push(i),l=l.join("/"),o[s].src=l,$(o[s]).PanbetTooltip(r)}}}]},{type:"DELAY2",actions:[]},{type:"DELAY1",actions:[]},{type:"OFFER_CHANGE_REJECTED",actions:[e]}];function s(e,t,n){n=null!=n&&"VOID"===n||""===t;e.find(".canceled-label").css("display",n?"inline-block":"none")}function e(e,t){if("REJECTED"==e.getStatus())switch(e.getCause()){case"VOID":t.find("[data-bet-result-paid]").text($(t.find(".total-stake div")[0]).text());break;case"WIN":case"LOSE":t.find("[data-bet-result-paid]").text(e.getPayout());break;default:u(".cashout-rejected",".cashout-part",t)}-1===["WIN","VOID","LOSE"].indexOf(e.getCause())&&$(t.find(".ico-cashout-warning")[0]).PanbetTooltip("tooltipCashoutWarning",{content:{text:"OFFER_MISMATCH"==e.getCause()?window.PanbetConst.Messages.CASHOUT_CHANGED:window.PanbetConst.Messages.CASHOUT_REJECTED}})}function l(e,t){isEllipsisActive(t)?(t=$(e).find(".bet-text-value").clone(),$(t).css("text-align","center"),$(e).PanbetTooltip("targetToFirstChild",{content:{text:t},show:{ready:!1}})):"1"===PrefStorage.get("notShowCashoutHint")?(t=$(e).find(".tooltip").clone(),$(e).PanbetTooltip("targetToFirstChild",{content:{text:t},show:{ready:!1}})):$(e).PanbetTooltip("targetToFirstChild",{content:{text:""},show:!1})}function c(e){e.find(".cashout-button, .history-cashout-icon, [data-cashout-info]").removeClass("hidden-important")}function d(e){e.find(".cashout-button, .history-cashout-icon, [data-cashout-info]").addClass("hidden-important")}function t(e){return MoneyFormatter.toMoneyFormat(MoneyFormatter.parseMoneyString(e/100))}function u(e,t,n){$(n.find(t)[0]).hide(),$(n.find(e)[0]).show()}this.manageCashoutButtonsHints=function(){$(".cashout-button").each(function(){l($(this).closest("[data-cashout-info]"),this)})},this.hideHelpCashoutIcons=function(){$("[data-cashout-info]").attr("data-cashout-info","center"),$(".history-cashout-icon").css({display:"none"}),$("[data-cashout-info]").removeClass("info-icon-show")},this.setConfirmationStatus=function(e){$("[data-cashout-info]",e).PanbetTooltip("targetToFirstChild",{content:{text:window.PanbetConst.Messages.CASHOUT_CONFIRMATION_HINT},show:{ready:!1}}),e.attr("data-cashout-status","CONFIRMATION"),s(e,"CONFIRMATION")},this.formatPayout=t,this.hideCashout=function(e){d($("[data-cashout-betid="+e+"]"))},this.renderOffer=function(e){var t,n,a,i=$("[data-history-entry-id="+e.getBetId()+"]");t=e,n=i,(a=_.findWhere(r,{type:t.getStatus()}))?(n.attr("data-cashout-status",a.type),n.attr("data-rejected-cause",t.getCause()),s(n,a.type,t.getCause()),_.each(a.actions,function(e){e(t,n)})):t.getPayout()!=o&&(n.attr("data-cashout-status","default"),s(n,"default")),a=e,i.find(".cashout-button").find(".bet-text-value").text(a.getPayout()),("PLACEMENT"==(a=e).getStatus()||("REJECTED"!=a.getStatus()||"REQUEST_OVERDUE"!=a.getCause()&&"VERSION_CHANGED"!=a.getCause())&&a.getPayout()!=o?c:d)(i),a=i,"1"===PrefStorage.get("notShowCashoutHint")?($("[data-cashout-info]",a).attr("data-cashout-info","center"),$(".history-cashout-icon",a).css({display:"none"})):($("[data-cashout-info]",a).attr("data-cashout-info","left"),$(".history-cashout-icon",a).css({display:""}),$("[data-cashout-info]",a).addClass("info-icon-show")),-1!==["WIN","VOID","LOSE","REQUEST_OVERDUE"].indexOf(e.getCause())||"REJECTED"!=e.getStatus()&&e.getPayout()!=o?(u(".cashout-part",".cashout-rejected",i),(a=i.find("[data-cashout-info]")).length&&l(a[0],a.find(".cashout-button")[0])):u(".cashout-rejected",".cashout-part",i)},this.renderOffers=function(e){var n=this;$.each(e,function(e,t){n.renderOffer(t)})}},CashOut.renderer=new CashOut.Renderer,function(n){var t=[];function a(){n("[data-highlighted=true]").attr("data-highlighted",!1).removeClass("price-highlighted").removeClass("selection-button_selected")}function i(){0!==t.length&&n.each(t,function(e,t){n('[data-selection-key="'+t.selection+'"][data-prt="'+t.type+'"]:not([data-selection-banner])').closest("[data-coeff-uuid]").attr("data-highlighted",!0).addClass("price-highlighted")})}function o(){0!==t.length&&n.each(t,function(e,t){n('[data-selection-key="'+t.selection+'"][data-prt="'+t.type+'"][data-selection-banner]').closest(".selection-button").attr("data-highlighted",!0).addClass("selection-button_selected")})}function r(e){Array.isArray(e)&&(t=n.map(e,function(e){return e.selection=e.selection.replace(",","@"),e}),a(),i(),o(),e=n.map(t,function(e){return e.selection}),n(document).trigger("selectionRowHeaderHighlighter.cleanAndHighlight",[e]))}n(document).on("selection.highlight",function(e,t){r([t])}),n(document).on("selection.clearHighlight",function(){t=[],a()}),n(document).on("content.loaded",function(e){i(),n(document).trigger("selectionRowHeaderHighlighter.highlight",[n.map(t,function(e){return e.selection})])}),n(document).on("betslip.loaded betslip.choicesUpdated openbets.loaded editbet.updateHighlight",function(e,t){r(t)}),n(document).on("futureMatches.opened",function(){i(),o()}),document.addEventListener("client.loaded",function(){window.Emitter.on("bannersMarket.highlightSelections",function(){o()})})}(window.jQuery),function(i){function o(e,t){var n=i(e).prev(),a=i(n).attr(t);return void 0!==a&&!1!==a?n:0<n.index()?o(n,t):i("["+t+"]",i(e).parents("["+t+"-body]:first"))||i()}function n(){i("[data-header-highlighted]").removeClass("header-highlighted"),i("[data-market-header-highlighted]").removeClass("header-highlighted")}function a(e){e=i('[data-header-highlighted-bounded] [data-selection-key="'+e+'"]').closest("[data-coeff-uuid]");i.each(e,function(e,t){t=i(t);"none"!=t.css("display")&&(o(t,"data-header-highlighted").addClass("header-highlighted"),o(t,"data-market-header-highlighted").addClass("header-highlighted"))})}i(document).on("selectionRowHeaderHighlighter.cleanAndHighlight",function(e,t){n(),Array.isArray(t)&&i.each(t,function(e,t){a(t)})}),i(document).on("selectionRowHeaderHighlighter.highlight",function(e,t){Array.isArray(t)&&i.each(t,function(e,t){a(t)})}),i(document).on("mouseenter","[data-header-highlighted-bounded] [data-coeff-uuid]:not([data-stop-mouseleave='stop-mouseleave']), [data-plus-players='plus-players'], [data-selection-link='selection-link']",function(){o(i(this),"data-header-highlighted").addClass("header-highlighted-hovered"),o(i(this),"data-market-header-highlighted").addClass("header-highlighted-hovered")}),i(document).on("mouseleave","[data-header-highlighted-bounded] [data-coeff-uuid]:not([data-stop-mouseleave='stop-mouseleave']), [data-plus-players='plus-players'], [data-selection-link='selection-link']",function(){o(i(this),"data-header-highlighted").removeClass("header-highlighted-hovered"),o(i(this),"data-market-header-highlighted").removeClass("header-highlighted-hovered")}),i(document).on("selection.clearHighlight",function(){n()})}(window.jQuery),function(i){function e(){return initData.isRussia?n.REGEX_ERROR_RUSSIA:n.DEFAULT_FIELD_ERR}var n=PanbetConst.Messages,t=(i.extend(i.validator.messages,{required:n.FIELD_REQUIRED,remote:n.FIELD_REMOTE,url:n.URL_ERR,date:n.DATE,dateISO:n.DATE,number:n.NUMBER,digits:n.DIGITS,creditcard:n.CREDITCARD,comparedFields:n.EQUALTO,accept:n.ACCEPT_EXT_ERR,maxlength:i.validator.format(n.MAX_LENGTH),minlength:i.validator.format(n.MIN_LENGTH),rangelength:i.validator.format(n.RANGE_LENGTH),range:i.validator.format(n.RANGE),max:i.validator.format(n.MAX),min:i.validator.format(n.MIN),nicknameAvailable:n.NICKNAME_TAKEN_ERROR}),{validDateFormat:function(e,t){return i.validator.format(n.DATE_WITH_FORMAT_ERR,t.format)},validDateLimit:function(e,t){return i.validator.format(n.DATE_RANGE_ERR,t.fromFormDate,t.toFormDate)}}),a={validDateFormat:function(e,t){return isPage(PAGES.JOIN)?n.DATE:n.DATE_OF_BITH_ERR},validDateLimit:function(e,t){return isPage(PAGES.JOIN)?t.isUpperLimit?n.BIRTH_DATE_LESS18_ERR:n.DATE:i.validator.format(n.DATE_RANGE_ERR,t.fromFormDate,t.toFormDate)}},o={validDateFormat:function(e,t){return n.DATE},validDateLimit:function(e,t){return t.isUpperLimit?n.DATE_IN_THE_PAST:n.DATE}},r={validDateFormat:function(e,t){return n.DATE},validDateLimit:function(e,t){return t.isUpperLimit?n.DATE:n.DATE_IN_THE_FUTURE}},t=(PanbetBaseMessages={street_header:n.STREET,age_less18:n.BIRTH_DATE_LESS18_ERR,date_in_past:n.DATE_IN_THE_PAST,date_in_future:n.DATE_IN_THE_FUTURE,dateISO:n.DATE,stake_limit_daily_field:{regex:n.DEFAULT_FIELD_ERR,accountLimitRequired:n.ACCOUNT_LOSS_LIMIT_REQUIRED},deposit_limit_daily_field:{regex:n.DEFAULT_FIELD_ERR,playerProtectionBaseValueValid:n.DEFAULT_FIELD_ERR,accountLimitRequired:n.ACCOUNT_DEPOSIT_LIMIT_REQUIRED,playerProtectionValueNotStartZero:n.NUMBER_CANNOT_START_FROM_ZERO},deposit_limit_weekly_field:{regex:n.DEFAULT_FIELD_ERR,playerProtectionBaseValueValid:n.DEFAULT_FIELD_ERR,accountLimitRequired:n.ACCOUNT_DEPOSIT_LIMIT_REQUIRED,playerProtectionValueNotStartZero:n.NUMBER_CANNOT_START_FROM_ZERO},deposit_limit_monthly_field:{regex:n.DEFAULT_FIELD_ERR,playerProtectionBaseValueValid:n.DEFAULT_FIELD_ERR,accountLimitRequired:n.ACCOUNT_DEPOSIT_LIMIT_REQUIRED,playerProtectionValueNotStartZero:n.NUMBER_CANNOT_START_FROM_ZERO},cvv:{regex:n.DEFAULT_FIELD_ERR},login:{regex:function(e,t){return-1!=t.value.indexOf("@")?n.USERNAME_INCORRECT:n.LOGIN_REGEXP_ERROR}},login_password:{regex:function(e,t){return n.PASSWORD_REGEXP_ERROR}},username:{regex:n.DEFAULT_FIELD_ERR},chineseFullName:{regex:n.CHINA_SYMBOL_REGEXP_ERROR,required:n.CHINESE_FULL_NAME_REQUIRED},check_password:{regex:n.DEFAULT_FIELD_ERR},password:{regex:function(e,t){return n.PASSWORD_REGEXP_ERROR}},oldpassword:{regex:n.PASSWORD_REGEXP_ERROR},confirmpassword:{required:n.FIELD_REQUIRED,comparedFields:n.CONFIRM_PASSWORD_ERR},maskedPhone:{regex:n.PHONE_REQUIRED,format:n.PHONE_REQUIRED},phone2:{regex:n.DEFAULT_FIELD_ERR},nameoncard:{regex:n.DEFAULT_FIELD_ERR},wmpurse:{regex:n.DEFAULT_FIELD_ERR},amount:{regex:n.AMOUNT_FIELD_ERR},amount_manual:{regex:n.DEFAULT_FIELD_ERR},number_document:{regex:n.DOCUMENT_VALID_NUMBER_ERROR,validDocumentNumber:n.DOCUMENT_VALID_NUMBER_ERROR},documentSeries:{regex:n.DEFAULT_FIELD_ERR},documentIssuedBy:{regex:n.DEFAULT_FIELD_ERR},documentDepartmentCode:{regex:n.DEFAULT_FIELD_ERR},aemail:{regex:n.EMAIL_REQUIRED},aemail2:n.CONFIRM_EMAIL_ERR,nickname:{minlength:n.NICKNAME_LENGTH_ERROR,regex:n.NICKNAME_REGEX_ERROR},secure_id:{regex:n.NETELLER_SECURE_ID_ERR},netellerpurse:{regex:n.DEFAULT_FIELD_ERR},postcode:n.POSTCODE_REQUIRED,email_purse:{regex:n.DEFAULT_FIELD_ERR},promo:{regex:n.PROMO_REQUIRED},mobile_phone:{regex:n.MOBILE_PHONE_REQUIRED},qiwi_mobile_phone:{regex:n.PHONE_REGEXP_ERROR},oneclickbetstakevalue:{regex:n.DEFAULT_FIELD_ERR},agreement_checkbox:{required:n.AGREEMENT_REQUIRED},card_number:{regex:n.CARD_NUM_REQUIRED},nip:{regex:n.DEFAULT_FIELD_ERR},country:{required:n.COUNTRY_REQUIRED},surname:{regex:e(),required:n.SURNAME_REQUIRED},surname2:{regex:e(),required:n.SURNAME_REQUIRED},middlename:{regex:e(),required:isPage(PAGES.ID_UPLOAD)?n.MIDDLENAME_REQUIRED:n.FIELD_REQUIRED},keyboardLayoutError:n.KEYBOARD_LAYOUT_ERR,fromDate:t,toDate:t,birthday:a,periodsefield:{validDateFormat:function(e,t){return i.validator.format(n.DATE_WITH_FORMAT_ERR,t.format)},validDateLimit:function(e,t){return n.SELFEXCLUSION_DATE_MIN}},addressAutocomplete:{required:n.AUTOCOMPLETE_ADDRESS_REQUIRED,checkSelectedAddress:n.AUTOCOMPLETE_ADDRESS_REQUIRED},addressAutocomplete_buildingnumber:{required:n.AUTOCOMPLETE_BUILDINGNUMBER_REQUIRED,checkManualAddressInput:n.AUTOCOMPLETE_BUILDINGNUMBER_REQUIRED},addressAutocomplete_postalCode:{required:n.AUTOCOMPLETE_POSTCODE_REQUIRED,checkManualAddressInput:n.AUTOCOMPLETE_POSTCODE_REQUIRED},addressAutocomplete_city:{required:n.AUTOCOMPLETE_CITY_REQUIRED,checkManualAddressInput:n.AUTOCOMPLETE_CITY_REQUIRED},addressAutocomplete_address1:{required:n.AUTOCOMPLETE_STREET_REQUIRED,checkManualAddressInput:n.AUTOCOMPLETE_STREET_REQUIRED},addressAutocomplete_address_building1:{required:n.AUTOCOMPLETE_STREET_AND_BUILDINGNUMBER_REQUIRED,checkManualAddressInput:n.AUTOCOMPLETE_STREET_AND_BUILDINGNUMBER_REQUIRED},address1:{required:n.ADDRESS_REQUIRED,regex:e(),validNoBankCardNumberInField:n.DEFAULT_FIELD_ERR},address2:{regex:e(),required:n.DEFAULT_FIELD_ERR},county:{regex:e(),required:n.DEFAULT_FIELD_ERR},captcha:{required:n.CAPTCHA_REQUIRED},birthPlace:{regex:e()},street:{required:n.FIELD_REQUIRED,regex:n.DEFAULT_FIELD_ERR},town:{required:n.TOWN_REQUIRED,regex:e()},registrationRegion:{regex:e()},buildingnumber:{regex:n.DEFAULT_FIELD_ERR,validNoBankCardNumberInField:n.DEFAULT_FIELD_ERR},registrationBuilding:{regex:n.DEFAULT_FIELD_ERR},registrationFlat:{regex:n.DEFAULT_FIELD_ERR},ccsanswer:{required:n.CCSANSWER_REQUIRED,regex:initData.isRussia?n.REGEX_ERROR_RUSSIA:n.CCSANSWER_REQUIRED},firstname:{regex:e(),required:n.FIRSTNAME_REQUIRED},walletonepurse:n.WALLET_ONE_PURSE_ERR,yandexpurse:{yandexPurseMainValid:n.YANDEX_PURSE_ALERT,yandexPursePrefixValid:n.YANDEX_PURSE_PREFIX_ALERT},dailyDepositLimit:{digitValueValid:n.NUMBER_CANNOT_START_FROM_ZERO},weeklyDepositLimit:{digitValueValid:n.NUMBER_CANNOT_START_FROM_ZERO},monthlyDepositLimit:{digitValueValid:n.NUMBER_CANNOT_START_FROM_ZERO},taxCode:n.TAX_CODE_ERROR,ecoPayzPurse:n.DIGITS,openbettimeout:{regex:n.DEFAULT_FIELD_ERR},promoCodeField:{regex:n.DEFAULT_FIELD_ERR},pp_payment_field_error:function(e,t,n,a){return e&&e.length?!0===t?i.validator.format(e,n):e:a},pp_payment_field_default_field_error:n.DEFAULT_FIELD_ERR,pp_payment_field_default_required_error:n.FIELD_REQUIRED,documentIssue:o,documentExpiry:r,CPRCode:n.CPR_CODE,fast_reg_punter_birth_day:n.DEFAULT_FIELD_ERR},PanbetConst.Date);DatepickerLocalization={days:[t.DAYS_SUN,t.DAYS_MON,t.DAYS_TUE,t.DAYS_WED,t.DAYS_THU,t.DAYS_FRI,t.DAYS_SAT,t.DAYS_SUN],daysShort:[t.DAYS_SH_SUN,t.DAYS_SH_MON,t.DAYS_SH_TUE,t.DAYS_SH_WED,t.DAYS_SH_THU,t.DAYS_SH_FRI,t.DAYS_SH_SAT,t.DAYS_SH_SUN],daysMin:[t.DAYS_MIN_SUN,t.DAYS_MIN_MON,t.DAYS_MIN_TUE,t.DAYS_MIN_WED,t.DAYS_MIN_THU,t.DAYS_MIN_FRI,t.DAYS_MIN_SAT,t.DAYS_MIN_SUN],months:[t.MONTH_JAN,t.MONTH_FEB,t.MONTH_MAR,t.MONTH_APR,t.MONTH_MAY,t.MONTH_JUN,t.MONTH_JUL,t.MONTH_AUG,t.MONTH_SEP,t.MONTH_OCT,t.MONTH_NOV,t.MONTH_DEC],monthsShort:[t.MONTH_SH_JAN,t.MONTH_SH_FEB,t.MONTH_SH_MAR,t.MONTH_SH_APR,t.MONTH_SH_MAY,t.MONTH_SH_JUN,t.MONTH_SH_JUL,t.MONTH_SH_AUG,t.MONTH_SH_SEP,t.MONTH_SH_OCT,t.MONTH_SH_NOV,t.MONTH_SH_DEC],weekMin:t.WEEK_MIN,dayWeekStart:t.FIRST_DAY_OF_WEEK-1,dateFormat:t.DATEPICKER_DATE_FORMAT,maskDay:t.DATE_MASK_DAY,maskMonth:t.DATE_MASK_SH_MONTH,maskYear:t.DATE_MASK_YEAR,monthsGenitive:t.MONTHS_GEN},CPRCodeLocalization={maskDay:t.DATE_MASK_DAY,maskMonth:t.DATE_MASK_SH_MONTH,maskYear:t.DATE_MASK_YEAR}}(jQuery),$.validator.addMethod("regex",function(e,t,n){return n.constructor!=RegExp?n=new RegExp(n):n.global&&(n.lastIndex=0),this.optional(t)||n.test(e)}),$.validator.addMethod("checkAge",function(e,t){return _validateDate({value:e,element:t,settings:this.settings,inThePast:!0,diff:-18})},PanbetBaseMessages.age_less18),$.validator.addMethod("dateInPast",function(e,t){return _validateDate({value:e,element:t,settings:this.settings,inThePast:!0,diff:0})},PanbetBaseMessages.date_in_past),$.validator.addMethod("dateInFuture",function(e,t){return _validateDate({value:e,element:t,settings:this.settings,inThePast:!1,diff:0})},PanbetBaseMessages.date_in_future),$.validator.addMethod("validDateFormat",function(e,t){var n="["+$.fn.PanbetDatepikerField.DATEPICKER_DATA_ATTR+"], ["+$.fn.PanbetDatepikerField.DATEPICKER_SELECT_DATA_ATTR+"]",n=$(t).closest(n).PanbetDatepikerField("isValid");return t.format=n.format,n.valid}),$.validator.addMethod("validDateLimit",function(e,t){var n="["+$.fn.PanbetDatepikerField.DATEPICKER_DATA_ATTR+"], ["+$.fn.PanbetDatepikerField.DATEPICKER_SELECT_DATA_ATTR+"]",n=$(t).closest(n).PanbetDatepikerField("isLimitValid");return n.valid||(t.fromFormDate=n.min,t.toFormDate=n.max,t.isUpperLimit=n.isUpperLimit),n.valid}),$.validator.addMethod("validDocumentNumber",function(e,t){return getDocumentValidator().validateDocumentNumber(e)}),$.validator.addClassRules("date",{validDateFormat:!0,validDateLimit:!0}),$.validator.addClassRules("autocomplete-input",{checkSelectedAddress:!0}),$.validator.addMethod("checkSelectedAddress",function(e,t){return!1}),$.validator.addClassRules("autocomplete-manual-input",{checkManualAddressInput:!0}),$.validator.addMethod("checkManualAddressInput",function(e,t){return(e||"").trim().length}),$.validator.addClassRules("checkPhone",{checkPhone:!0}),$.validator.addMethod("checkPhone",function(e,t){t=$(t).intlTelInput("getSelectedCountryData");return intlTelInputUtils.isValid(t,e)},PanbetBaseMessages.maskedPhone.format),$.validator.addMethod("yandexPurseMainValid",function(e,t,n){return(n=new RegExp(n)).test(e)}),$.validator.addMethod("yandexPursePrefixValid",function(e,t,n){return(n=new RegExp(n)).test(e)}),$.validator.addMethod("accountLimitRequired",function(e,t,n){return(!e?1:0)^(!$("[name="+n+"]").first().is(":checked")?1:0)}),$.validator.addMethod("requiredLength",function(e,t,n){return e.length==n}),$.validator.addMethod("panbet-dateISO",function(e,t){e=$.validator.methods.dateISO.call(this,e,t),t=$(t).parent().find("select");return e?this.settings.unhighlight(t,this.settings.errorClass,this.settings.validClass):this.settings.highlight(t,this.settings.errorClass,this.settings.validClass),e},PanbetBaseMessages.dateISO),$.validator.addMethod("comparedFields",function(e,t,n){var n=$(n),a=$(t),n=n.val()===a.val();return n||(this.invalid[t.name]=!1,this.showErrors()),n}),$.validator.addMethod("nicknameAvailable",_.throttle(function(e,a,t,i){if(this.optional(a))return"dependency-mismatch";i="string"==typeof i&&i||"nicknameAvailable";var o,r=this.previousValue(a,i);return r.old===e?(initData.availableNicknames=r.availableNicknames,r.valid):(r.old=e,(o=this).startRequest(a),$.ajax({url:initData.checkNicknameActionUrl,mode:"abort",port:"validate"+a.name,type:"POST",dataType:"json",data:{nickname:e},context:o.currentForm}).done(function(e){var t,n=e&&(!0===e.valid||"true"===e.valid);n?(initData.availableNicknames=[],t=o.formSubmitted,o.resetInternals(),o.prepareElement(a),o.formSubmitted=t,o.successList.push(a),o.invalid[a.name]=!1):(initData.availableNicknames=e.alternatives,o.settings.messages[a.name][i]=e.errorText,o.formatAndAdd(a,{method:i}),r.message=e.errorText,o.invalid[a.name]=!0),o.showErrors(),r.valid=n,r.availableNicknames=initData.availableNicknames,o.stopRequest(a,n)}),"pending")},300)),$.validator.addMethod("data-pp-validator-regexp",function(e,t,n){t=$(t);if("cvv"===t.attr("name")||"cvv"===t.attr("data-ong-name")){var a=$('[name="cardtype"]');if((a=0==a.length?$('[data-ong-name="cardtype"]'):a).length&&"MC"===a.val()&&""===e)return!1}if(""===e)return!0;a=t.parent().closest(".intl-tel-input");null!=a&&1===a.length&&(e=e.replace(/[\-\s]/g,"")),n=JSON.parse(n)||{};try{return new RegExp(n.regexp).test(e)}catch(e){return!0}},function(e,t){var n=(e=JSON.parse(e)||{}).msg,e=e.msgFormat,t=!0===e?$(t).val():"";return PanbetBaseMessages.pp_payment_field_error(n,e,t,PanbetBaseMessages.pp_payment_field_default_field_error)}),$.validator.addMethod("data-pp-validator-required",function(e,t,n){return""!==e&&0<(e||"").trim().length},function(e,t){return e=JSON.parse(e)||{},PanbetBaseMessages.pp_payment_field_error(e.msg,null,null,PanbetBaseMessages.pp_payment_field_default_required_error)}),$.validator.addMethod("data-pp-validator-range",function(e,t,n){var a,i,o;return""===e||!(!e.match(/^\d+$/)&&!e.match(/^\d+\.\d+$/)||(i=(n=JSON.parse(n)||{}).range||[],a=parseFloat(i[0]),i=parseFloat(i[1]),o=(n=n.rangeMode||[])[0],n=n[1],e=parseFloat(e),!isNaN(a)&&("EXCLUSIVE"===o&&e<=a||e<a))||!isNaN(i)&&("EXCLUSIVE"===n&&i<=e||i<e))},function(e,t){var n=(e=JSON.parse(e)||{}).msg,e=e.msgFormat,t=!0===e?$(t).val():"";return PanbetBaseMessages.pp_payment_field_error(n,e,t,PanbetBaseMessages.pp_payment_field_default_field_error)}),$.validator.addMethod("data-pp-validator-range-length",function(e,t,n){if(""===e)return!0;e=e.length;var a=(n=JSON.parse(n)||{}).range||[],i=parseInt(a[0],10),a=parseInt(a[1],10),n=n.rangeMode||[],o=n[0],n=n[1];return!(!isNaN(i)&&("EXCLUSIVE"===o&&e<=i||e<i)||!isNaN(a)&&("EXCLUSIVE"===n&&a<=e||a<e))},function(e,t){var n=(e=JSON.parse(e)||{}).msg,e=e.msgFormat,t=!0===e?$(t).val():"";return PanbetBaseMessages.pp_payment_field_error(n,e,t,PanbetBaseMessages.pp_payment_field_default_field_error)}),jQuery.validator.addClassRules("keyboardLayoutValidator",{keyboardLayoutValidator:!0}),$.validator.addMethod("keyboardLayoutValidator",function(e,t,n){for(var o={RU:"[-]",ENG:"[A-z]",GR:"[-]"},r=null,a=$(".keyboardLayoutValidator:not([disabled])").get().filter(function(e){return(e.value||"").trim().length}),i=0;i<a.length;i++){var s=function(e){for(var t=0;t<e.length;t++)for(var n=e.charAt(t),a=Object.keys(o),i=0;i<a.length;i++)if(n.match(o[a[i]])){if(r&&r!==a[i])return!1;r=a[i];break}return!0}(a[i].value);if($(t).is(a[i]))return s;if(!s)return!0}return!0},PanbetBaseMessages.keyboardLayoutError),$.validator.addMethod("nicknameAndAuthType",function(e,t){t=$(t);return!("NICKNAME"===$(this.currentForm).find("[name=authtype]:checked","[data-name=authtype]:checked").val()&&!t.val())},PanbetConst.Messages.NICKNAME_REQUIRED),$.validator.addMethod("checkAuthType",function(e,t){var n=$(this.currentForm),a=n.find("[name=nickname]","[data-name=nickname]"),n=n.find("[name=authtype]","[data-name=authtype]"),i=n.filter(":checked");return!(0<n.length&&0==i.length&&a.val())},PanbetConst.Messages.AUTHTYPE_REQUIRED);var updateSticky,stickybitsListtoBeUpdated,stickybitsInstancetoBeUpdated,LoginDialogSessionStorageFacade,passwordValidatorStates={READY:"0",VALIDATE_DELAY:"1",VALIDATE:"2",VALIDATE_PROCESS:"3",SHOW_RESULTS:"4"};function reloadDepositPaymentsTable(){var e=$("#payment_options_wrapper"),t=$.PanbetLoadingStatus.setOn(e);$.Page.location(initData.base_dir+"/myaccount/createpaymentsource.htm","getDepositPaySysTable",{ignorePushHistory:!0}).updateContent(function(e){e&&0<e.length&&$("#payment_options_table").html(e),t.remove()})}function resizeCalc(){checkView()}function panbetInit(e){generateAndSaveTabUuid(),window.addEventListener("beforeunload",function(){isCurrentTabLockRefreshJWTTokensRequest()&&unlockRefreshJWTTokensRequest()}),(IS_MARATHON_CLIENT=void 0!==$("body").data("marathonClient"))||(resizeCalc(),window.addEventListener("resize",_.throttle(resizeCalc,300))),setPanbetAJAXSettings(),IS_MARATHON_CLIENT||(getSessionControl().initSessionUpdate(),e&&(getSessionControl().registerProlongateClientSessionOnAjax(),initData.endlessSessionEnabled)&&RefreshTokenUtils.initRefreshJWTTokens()),initFormValidator(),filterTopLinks();var t=!1;if(initData.persData){var n,a=new evercookie;for(n in initData.persData)a.set(n,initData.persData[n]),n==Panbet.BONUS_MARK&&(t=!0)}e||t||(a=new evercookie).get(Panbet.BONUS_MARK,function(e,t){void 0!==e&&a.set(Panbet.BONUS_MARK,e)},1),showRedirectMessage(),e||showLoginDialogIfNeeded()}function sendDeliveryTime(t,n){initData.deliveryTimeTrackingEnabled&&setTimeout(function(){try{var e;n&&n.timestamp&&(e={type:t,destination:n.destination,time:SyncTime.getTime()-n.timestamp,length:n["content-length"]},$.post(initData.deliveryTimeUrl,e,null,"json"))}catch(e){}},0)}function showRedirectMessage(){0<$("#errorRedirectInfo").length&&$("#errorRedirectInfo").modal({position:["20%"]})}function searchAttribute(e,t){for(var n=e.attributes,a=0;a<n.length;a++){var i=n[a];if(t.test(i.name))return!0}return!1}function initFormValidator(){for(var e=document.forms,t=0;t<e.length;t++)-1!=jQuery.inArray(e[t].id,Panbet.EXCLUDE_FORM)||searchAttribute(e[t],/^data-v-.*$/)||panbetValidate($(e[t]))}function setPanbetAJAXSettings(){$.ajaxSetup({converters:{"text json":function(e){return e?JSON.parse(e):null}},cache:!1}),$.ajaxPrefilter(function(e,n,a){var i=$.Deferred();a.done(i.resolve),a.fail(function(){var t=Array.prototype.slice.call(arguments);switch(a.status||0){case 401:initData.endlessSessionEnabled&&!e.retryRequest?RefreshTokenUtils.tryRestoreLoginSession().then(function(){$.ajax($.extend({},n,{retryRequest:!0})).then(i.resolve,i.reject)}).catch(function(e){window.Emitter.emit("logout"),i.rejectWith(a,t)}):(window.Emitter.emit("logout"),i.rejectWith(a,t));break;case 403:handle403Error(),i.rejectWith(a,t);break;default:i.rejectWith(a,t)}}),i.promise(a)});var t=$.Page.location().href;$.ajaxPrePostSuccess({preSuccess:function(e,t,n){return!n.getResponseHeader("X-RedirectUrl")||($.Page.location().href=n.getResponseHeader("X-RedirectUrl"),!1)},postSuccess:function(){var e=$.Page.location().href;$.Page.isUrlChanged(t,e)&&(TrackingEngine.trigger(TrackingEngine.EVENT.VISIT_DYNAMIC_PAGE,[t,e]),t=e)}})}function handle403Error(){$.modal.close(),$("#forbidden").find("button").on("click",replacePage),$("#forbidden").modal({position:["20%"],escClose:!1})}function checkView(){BROWSER.isIE&&updateSticky()}function openWindow(e,t){var n=t.width||840,a=screen.width-n-20,i=t.height||.65*screen.height;return(w=open(e,t.name||"help","location=0,menubar=0,toolbar=0,scrollbars=yes,resizable=yes,top=0,left="+a+",height="+i+",width="+n)).focus(),w}function showHelpForURL(e){window.open(e,"help","width=1040, height=600, resizable=yes, scrollbars=yes").focus()}function showChat(e,t){var n=screen.width/2-300;return e.stopPropagation(),e.preventDefault(),window.open($(t).attr("href"),"chat","width=600,height=600,top=0,left="+n),!1}function initAgreeTermsDialog(){$(document).on("click","#agree-terms-dialog [data-agree-dialog-ok]",function(){var e;this.agree||((e=this).agree=!0,$.post(initData.base_dir+"/agreeterms.htm").always(function(){e.agree=!1,location.reload(!0)}))}),$(document).on("click","#agree-terms-dialog [data-agree-dialog-cancel]",function(){$.modal.close()});var e=$("#agree-terms-dialog");e.length&&e.addModalToViewQueue(),$(document).on("click","[data-show-link]",function(e){if(!IS_MARATHON_CLIENT)return e.preventDefault(),window.open($(this).attr("data-show-link"),"_blank"),!1})}function preventPrecedingToPasswordInputAutocomplete(e){var t=navigator.userAgent.toLowerCase();(0<=t.indexOf("chrome")||0<=t.indexOf("mozilla"))&&$('input[type=password][name="'+e+'"]:not(.hidden)').each(function(){for(var e=this.form,t=$("input",e),n=t.index(this);0<n;){var a=t.eq(--n);if("text"==a.attr("type")){if("off"==a.attr("autocomplete")){a.after('<input type="text" class="hidden">');break}if(a.hasClass("hidden"))break}}})}$.validator.addMethod("data-password-regex-persdataforbriden",function(e,t,n){e=$.validator.methods.regex.call(this,e,t,n);if(!initData.isPasswordRegexPassed){if(!e)return e;initData.isPasswordRegexPassed=!0}n=$(t).is(":focus");return initData.passwordValidatorState&&initData.passwordValidatorState!==passwordValidatorStates.READY||(initData.passwordValidatorState=passwordValidatorStates.VALIDATE_DELAY),initData.passwordValidatorState===passwordValidatorStates.SHOW_RESULTS&&(initData.passwordValidatorState=passwordValidatorStates.READY),initData.passwordValidatorState!==passwordValidatorStates.VALIDATE&&(n||initData.passwordValidatorState!==passwordValidatorStates.VALIDATE_DELAY)||(initData.passwordValidatorState=passwordValidatorStates.VALIDATE_PROCESS,getPassPersonalDataInclusion().validate(t).done(function(e){initData.passwordErrors=e}).fail(function(){initData.passwordErrors=[]}).always(function(){document.dispatchEvent(new CustomEvent("passPersonalDataInclusion.validated")),initData.passwordValidatorState=passwordValidatorStates.SHOW_RESULTS,$(t).valid()})),initData.passwordValidatorState===passwordValidatorStates.VALIDATE_DELAY&&n&&setTimeout(function(){initData.passwordValidatorState===passwordValidatorStates.VALIDATE_DELAY&&(initData.passwordValidatorState=passwordValidatorStates.VALIDATE,$(t).valid())},2e3),e&&(!initData.passwordErrors||0===initData.passwordErrors.length)},function(e,t){if(initData.passwordErrors&&0<initData.passwordErrors.length){var n=initData.passwordErrors[0];if("NOT_CONTAINS_PERSONAL_DATA"==n)return reactData.passwordStrengthModel.popupPasswordContainInformation;if("NOT_MATCH_LAST_PASSWORDS"==n)return reactData.passwordStrengthModel.checkUsedLastPasswordsMessage}return PanbetBaseMessages.password.regex()}),$.validator.addMethod("digitValueValid",function(e,t){return(regexp=/^[1-9]\d*$/).test(e)}),$.validator.addMethod("playerProtectionBaseValueValid",function(e,t){return(regexp=/[0-9]{1,10}([\\.][0-9]{0,2})?$/).test(e)}),$.validator.addMethod("playerProtectionValueNotStartZero",function(e,t){return(regexp=/^[1-9][0-9]{0,9}([\\.][0-9]{0,2})?$/).test(e)}),$.validator.addMethod("validNoBankCardNumberInField",function(e,t){var n=new RegExp("[0-9]{15,}","g"),e=e.replace(/\s/g,"");return!n.test(e)}),(CashsourceHelper=function(){}).onDepositValueClick=function(e){isNaN(parseMoneyString(e))?($$(CashsourceHelper.AMOUNT_MANUAL_ID).disabled=!1,$$(CashsourceHelper.AMOUNT_ID).value=$$(CashsourceHelper.AMOUNT_MANUAL_ID).value):($$(CashsourceHelper.AMOUNT_MANUAL_ID).disabled=!0,$$(CashsourceHelper.AMOUNT_ID).value=e,$("#"+CashsourceHelper.AMOUNT_MANUAL_ID).removeClass("error")),CashsourceHelper._highlightCommonValue(e)},CashsourceHelper.onSubmitClick=function(){""==$$(CashsourceHelper.AMOUNT_ID).value&&($$(CashsourceHelper.AMOUNT_MANUAL_ID).disabled=!1)},CashsourceHelper._highlightCommonValue=function(e){$("[id^=c_value_]").removeClass("selected"),$("[id=c_value_"+e+"]").addClass("selected")},CashsourceHelper.showWindow=function(e){$("#"+e).modal({position:["20%"]}),$("#"+e).find(".no").trigger("focus")},CashsourceHelper.onWithdrawFormSubmit=function(){CashsourceHelper.fillHiddenPassInput();var e=$$(CashsourceHelper.FORM_ID).amount,t="withdraw_confirm";return!e||(e=parseMoneyString(e.value),initData.isAlderney&&(e=e.toFixed(2)),panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&($("#"+t+" .message_withdraw_sum").html(e),CashsourceHelper.showWindow(t)),window.event&&(window.event.returnValue=!1),!1)},CashsourceHelper.onSimpleFormSubmit=function(){$$(CashsourceHelper.FORM_ID);return panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&CashsourceHelper.showWindow("simple_confirm"),window.event&&(window.event.returnValue=!1),CashsourceHelper.fillHiddenPassInput(),!1},CashsourceHelper.onMarathonSubmitForm=function(){var e=panbetValidate($("#"+CashsourceHelper.FORM_ID)).form();return e&&(CashsourceHelper.showProgress(),CashsourceHelper.triggerDepositFormSubmitEvent()),CashsourceHelper.fillHiddenPassInput(),window.event&&(window.event.returnValue=e),e},CashsourceHelper.proceedSubmitForm=function(e){e?window.Emitter.emit("modal.open",{type:"WAITING_DIALOG"}):CashsourceHelper.showProgress(),(!initData.isCuracaoPlatform||initData.isItaly||initData.isSpain||initData.isCuracao&&initData.isResponsibleGamblingPolicyEnabled)&&(CashsourceHelper.triggerDepositFormSubmitEvent(),$$(CashsourceHelper.FORM_ID).submit())},CashsourceHelper.simpleProceedSubmitForm=function(){CashsourceHelper.showProgress(),CashsourceHelper.triggerDepositFormSubmitEvent(),$$(CashsourceHelper.FORM_ID).submit()},CashsourceHelper.showProgress=function(){CashsourceHelper.SHOW_PROGRESS&&showProgressModal()},CashsourceHelper.hideProgress=function(){CashsourceHelper.SHOW_PROGRESS&&closeModal()},CashsourceHelper.updateCheckPromoCodeInputHidden=function(e){$("#"+CashsourceHelper.FORM_ID+' input[name="check_promo_code_on_deposit"]').val(e)},CashsourceHelper.triggerDepositFormSubmitEvent=function(){try{var e,t;initData&&initData.trackDepositFormSubmit&&(initData.trackDepositAdditionalData?(t=0<(e=$("#form_amount")).length?e.val():"not_set",TrackingEngine.trigger(TrackingEngine.EVENT.DEPOSIT_FORM_SUBMIT,[t,initData.punterCurrencyCode])):TrackingEngine.trigger(TrackingEngine.EVENT.DEPOSIT_FORM_SUBMIT))}catch(e){logger.error("Deposit form submit tracking error.\n"+e.message)}},CashsourceHelper.fillHiddenPassInput=function(){var e,t="form_check_password";"function"==typeof getPaymentsHelper&&getPaymentsHelper()?getPaymentsHelper().fillHiddenPassInput($('[data-id="'+t+'"]')):(e=document.querySelector('[data-id="'+t+'"]'),t=document.querySelector("#"+t),e&&t&&(t.value=e.value))},CashsourceHelper.FORM_ID="form",CashsourceHelper.AMOUNT_ID=CashsourceHelper.FORM_ID+"_amount",CashsourceHelper.AMOUNT_MANUAL_ID=CashsourceHelper.FORM_ID+"_amount_manual",CashsourceHelper.SHOW_PROGRESS=!0,$(document).on("click","#deposit_promo_code_alert_window_btn_yes",function(){CashsourceHelper.updateCheckPromoCodeInputHidden(!1),$("#"+CashsourceHelper.FORM_ID).trigger("submit")}),$(document).on("click","#deposit_promo_code_alert_window_btn_no",function(){var e=$("#"+CashsourceHelper.FORM_ID+' input[name="promo"]');0<e.length&&e.val("")}),$(document).on("click","#deposit_promo_code_alert_window_btn_no[data-promo-code-error-type='DEPOSIT_VALUE_TOO_LOW']",function(){var e=$("#"+CashsourceHelper.FORM_ID+"_amount");0<e.length&&e.trigger("focus")}),document.addEventListener("client.loaded",function(){function i(){$("#form").find("[data-punter-balance-value]").each(function(){var e=$(this),t=window.PanbetPunterBalance.getBalanceValue(e);e.parent().toggleClass("disabled",!t)})}function t(e){if(e){e=e.keyCode||e.which;if("37"==e||"39"==e)return}l.val(l.val().replace(/[^\d\.]/g,""));var t=parseFloat(l.val());if(t<(u=null==u?0:u)||null!=h&&h<t)c.val("");else{u<=t&&c.val(t.toFixed(2));for(var n=0;n<d.length;n++){var a,i=d[n],o=i.commissionThreshold,r=!0,s=void 0;null!=o&&(a=parseFloat(o.threshold),"less"==(o=o.strategy)?r=t<a:"lessOrEqual"==o?r=t<=a:"more"==o?r=a<t:"moreOrEqual"==o&&(r=a<=t)),r&&("percent"==i.type?s=t*i.commission:"fixedValue"==i.type&&(s=i.commission),u<=t&&s<t?(null!=i.minCommission&&s<(o=parseFloat(i.minCommission))&&(s=o),t-=s=null!=i.maxCommission&&(a=parseFloat(i.maxCommission))<s?a:s,c.val(t.toFixed(2))):c.val(""))}}}var l,c,d,u,h,e=$("#deposit_promo_code_alert_window"),e=(e.length&&panbetModal(e),$(":radio[name = permanent]").on("click",function(){var e=1==this.value;e&&($("#"+CashsourceHelper.FORM_ID).validate().resetForm(),$("#"+CashsourceHelper.FORM_ID+" .error").removeClass("error")),$("["+$.fn.PanbetDatepikerField.DATEPICKER_DATA_ATTR+"]").PanbetDatepikerField("disabled",e)}),initData.showBalanceWithdrawRestrictions),n=initData.withdrawalBalanceEnabled,n=(PunterBalanceRefreshSubscriber.subscribe({loggerName:"WithdrawPageWithdrawableMainBalanceRefresh",enabled:e,destination:initData.stomp.punterMainBalanceChangesPath,containerId:"form",onBalanceUpdated:function(e,t,n){var a;t=t,(a=$("#form").find("[data-deposit-bonuses-blocked-sum]")).data("depositBonusesWithdrawForbidden")||(t=t-window.PanbetPunterBalance.parseBalanceValue(a.data("depositBonusesBlockedSum")),a.data("punterBalanceValue",t=t<0?0:t).html(window.PanbetPunterBalance.formatFloat(t))),i()}}),PunterBalanceRefreshSubscriber.subscribe({loggerName:"WithdrawPageWithdrawableBalanceRefresh",enabled:e&&n,destination:initData.stomp.punterWithdrawableBalanceChangesPath,containerId:"form"}),e&&(i(),$(document).on("click","#form [data-withdraw-balance-link]",function(e){var t,n=$(this);n.hasClass("disabled")||(n=window.PanbetPunterBalance.getBalanceValue(n.find("[data-punter-balance-value]")),t=$("#form_amount"),window.PanbetPunterBalance.parseBalanceValue(t.val())!=n&&(t.val(n),t.trigger("amountFieldChanged")))})),"undefined"!=typeof initData&&initData.commissionData||void 0),e=(null!=n&&(l=$("#form_amount"),c=$("[data-with-commission]"),d=n.commissions,u=n.minAmount,h=n.maxAmount,l.length)&&c.length&&null!=d&&d.length&&(l.val()&&t(),l.on("keyup amountFieldChanged",function(e){t(e)})),0<$("[data-pp-key-field]").length&&CashsourceHelper.onKeyFieldKeyUp(),$("#neteller_address_error_popup"));e.length&&panbetModal(e,{}),window.ChatManager.doAfterInit(function(){window.initData.openChatOnDepositFail&&window.ChatManager.openChat(),window.Emitter.emit("live.chat.ready")}),window.Emitter.on("paymentRippleDialogSubmit",function(){(initData.isCuracaoPlatform?CashsourceHelper.onMarathonSubmitForm():CashsourceHelper.onWithdrawFormSubmit())&&$$(CashsourceHelper.FORM_ID).submit()})}),CashsourceHelper.onKeyFieldKeyUp=function(e){var t,n,a,i;!e||"37"==(t=e.keyCode||e.which)||"39"==t||(t=$("#form_type").val(),n=$("[data-pp-key-field]"),a=!0,$.each(n,function(e,t){0<n.val().length&&(a=!1)}),a)||initData.ppGetTransferFormAction&&!n.valid()||(e=$.event.fix(e||window.event),e=$(e.target.form),i={},$.each(e.serializeArray(),function(e,t){i[t.name]=t.value}),0===$("[data-pp-key-field-after]").length&&n.last().parents("tr").attr("data-pp-key-field-after","true"),jQuery.ajax({method:"GET",data:{pageAction:initData.ppGetTransferFormAction||"getCommissionInfo",type:t,csId:$('input[name="csId"]').val(),transferFormData:JSON.stringify(i)},success:function(e){e&&($("[data-field-update-by-key-field]").remove(),$("[data-pp-key-field-after]").after(e))}}))},$(document).on("keyup amountFieldChanged","[data-pp-key-field]",_.debounce(CashsourceHelper.onKeyFieldKeyUp,300)),$(document).on("change","select[data-pp-key-field]",_.debounce(CashsourceHelper.onKeyFieldKeyUp,300)),CashsourceHelper.onDeleteCSFormSubmit=function(e){return document.querySelector("[data-btn-delete-cashsource]").disabled=!0,document.querySelector("[data-btn-delete-cashsource]").classList.add("in-progress"),!0},CashsourceHelper.stringifyFormData=function(){var e=$('form[name="form"] [data-pp-key-field="true"]'),t={};e.length&&e.each(function(){t[this.name]=this.value}),$('form[name="form"] input[name="ppKeyFieldValues"]').val(JSON.stringify(t))},$(document).on("keyup amountFieldChanged","[data-pp-key-field]",CashsourceHelper.stringifyFormData),$(document).on("change","select[data-pp-key-field]",CashsourceHelper.stringifyFormData),CashsourceHelper.onRippleWithdrawFormSubmit=function(){$$(CashsourceHelper.FORM_ID);return panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&window.Emitter.emit("modal.open",{type:"PAYMENTS_RIPPLE_CONFIRM_DIALOG"}),window.event&&(window.event.returnValue=!1),!1},initData.newPaymentsEnabled||document.addEventListener("client.loaded",function(){window.Emitter.on("currency.changed.payments",reloadDepositPaymentsTable)}),document.addEventListener("client.loaded",function(){try{var e,t,n,a=$("#form_fast_reg_punter_phone");a.length&&a.intlTelInput&&(a.attr("disabled","true"),e=a.val(),a.initMaskedPhone(!0),e?a.intlTelInput("setNumber",e):("NN"===(t=window.initData.countryCode)&&(t="GB"),a.intlTelInput("setCountry",t)),(n=a.closest("form")).length&&n.on("submit",function(){var e;n.valid()&&((e=a.intlTelInput("getNumber"))&&0<e.length&&(e=e.replaceAll(" ","")),a.val(e))}),a.removeAttr("disabled"))}catch(e){}}),CashsourceHelper.openPersonalModal=function(e){var t=$.event.fix(e||window.event);t.stopPropagation(),t.preventDefault();var n,t=e.target.getAttribute("href");showFillingPersonalDetailsDialog((n=t,function(){n&&0<n.length&&(window.location=n)}),void 0,TrackingEnginePersonalDetailPopupSource.DEPOSIT)},CashsourceHelper.openWithdrawPersonalModal=function(e,t,n){var a,e=$.event.fix(e||window.event);e.stopPropagation(),e.preventDefault();showFillingPersonalDetailsDialog((a=n,function(){a&&0<a.length&&(window.location=a)}),t,TrackingEnginePersonalDetailPopupSource.WITHDRAW)},$(document).on("keyup","[data-amount-format-on-input] input",function(){var e=$("input",'[data-amount-format-on-input="true"]'),t=e.val();t&&0<t.length&&(e.val(t.replaceAll(",","")),e.trigger("amountFieldChanged"))}),function(){o=!1,e={show:function(e,t){var n;this.isOpen()||(o=!0,$.modal.close(),n=this,a=setTimeout(function(){n.hide(),"function"==typeof t&&t()},initData.sessionAlertInterval+initData.sessionAlertDelay),$("#session_timeout").modal({position:["20%"],escClose:!1}),$("#session_timeout [data-submit-btn]").on("click",function(){clearTimeout(a),n.hide(),"function"==typeof e&&e()}))},hide:function(){this.isOpen()&&(o=!1,$.modal.close())},refresh:function(e,t){var n;clearTimeout(i),initData.timeout&&0!=initData.timeout&&(n=this,i=window.setTimeout(function(){n.show(e,t)},initData.timeout-initData.sessionAlertInterval-initData.sessionAlertDelay))},isOpen:function(){return o}},t=function(e){return $.ajax({type:"POST",dataType:"json",url:e}).done(function(e){s(e)})};var a,i,o,e,t,n={initSessionUpdate:function(){var e=this;initData.loginSessionTouchInterval&&0<initData.loginSessionTouchInterval&&setInterval(function(){e.updateSession()},1e3*initData.loginSessionTouchInterval),r()},registerProlongateClientSessionOnAjax:function(){$(document).on("ajaxComplete",function(e,t,n){if(t&&t.responseText)try{s(JSON.parse(t.responseText))}catch(e){}})},updateSession:function(){return t(initData.seance_preference_update_url)},prolongateSession:l,alertWindowOpened:function(){return e.isOpen()}};function r(){initData.endlessSessionEnabled||e.refresh(l,function(){window.Emitter.emit("logout")})}function s(e){e&&(e.sessionExpire&&(initData.timeout=e.sessionExpire),r())}function l(){return t(initData.seance_prolongate_url)}window.getSessionControl=function(){return n}}(jQuery),window.StringBuilder=function(){var n=[];return{append:function(e){var t;return null==(t=e)||void 0===t||t.length<=0||(n[n.length]=e),this},clear:function(){return n=[],this},isEmpty:function(){return 0==n.length},toString:function(){return n.join("")}}},function(r){function t(e){return e<10?"0"+e:e}(Markets=function(){}).ShortCutsLinksInfo=[],Markets.ATTRIBUTE_BLOCK_ID="blockid",Markets.ATTRIBUTE_EVENT_ID="eventid",Markets.ATTRIBUTE_TREE_ID="treeid",Markets.IMG_LOADING_POSTFIX="_loading",Markets.IMG_LOADING_ATTR="process",Markets.SHORTCUTS_ACTIVE="active-shortcut-menu-link",Markets.SHORTCUTS_LINK="shortcutLink_event",Markets.SHORTCUTS_TYPE="type",Markets.SHORTCUTS_BLOCK="block",Markets.SHORTCUTS_ID="shortcutsMenuTreeId",Markets.SHORTCUTS_ID_WRAPPED="[id^='shortcutsMenuTreeId']",Markets.SHORTCUTS_ALL="10",Markets.SHORTCUTS_SELECTED="11",Markets.SHORTCUTS_FIRST="1",Markets.SHORTCUTS_OTHER="9",Markets.SHORTCUTS_MARKET_ID="marketId",Markets.SLASH="/",Markets.COLON=":",Markets.SEMICOLON=";",Markets.COMMA=",",Markets.CHECKBOX="checkbox_",Markets.BLOCK_ID="blockId",Markets.ONLY_ONE_EVENT_OPEN_AM=!1,Markets.MORE_VIEW_PREF="event-more-view-",Markets.NEED_PROCESS_OPENED_MARKETS=!1,Markets.OPENED_MARKETS="marketIds",Markets.UPDATE_COUPON_MAIN_ROW_EVENT="preferences_couponMainRow_update",Markets.MENU_LINK_SELECT_EVENT="shortcutMenu_menuLink_select",EventView=function(e){this.oView=e,this.getEventID=function(){return this.oView.getAttribute(Markets.ATTRIBUTE_EVENT_ID).split("_").shift()},this.getTreeID=function(){return this.oView.getAttribute(Markets.ATTRIBUTE_TREE_ID)},this.isLive=function(){var e=this.oView.getAttribute("isLive");return e&&"true"==e.toLowerCase()},this.isVisible=function(){return this.oView.eventState||(this.oView.eventState=0!=this.getDetails().length),this.oView.eventState},this.setVisibility=function(e){this.oView.eventState=e},this.close=function(){var e=this;return this.hideViewDetails().done(function(){e.setVisibility(!1)})},this.applyDetails=function(){Markets.hideProcess(this.oView),this.setVisibility(!0),r(document).trigger("content.loaded"),window.Emitter.emit("content.loaded")},this.show=function(){Markets.showProcess(this.oView);function n(){Markets.hideProcess(a.oView),r(a.oView).show()}var a=this,e=this.getTreeID();return r(document).trigger("beginAdditionalMarketsUpdate",[a.getTreeID(),this.isLive()]),window.Emitter.emit("beginAdditionalMarketsUpdate",[a.getTreeID(),this.isLive()]),r.ajax(makeCacheableAjaxRequestSettings({url:initData.base_dir+"/"+(this.isLive()?"live":"")+"markets.htm",type:"GET",dataType:"json",data:{treeId:this.getTreeID()},success:function(e){var t;e?("COUNT"in e&&r(a.oView).find("span").text("+"+e.COUNT),"ADDITIONAL_MARKETS"in e?(t=r(e.ADDITIONAL_MARKETS),panbet.PreferencesApplier&&panbet.PreferencesApplier.apply?a.updateContent(t):"complete"!==document.readyState&&"loaded"!==document.readyState?window.addEventListener("DOMContentLoaded",function(){a.updateContent(t)}):setTimeout(a.updateContent(t),1e3)):(r(a.oView).siblings().remove(),r(a.oView).remove()),a.applyDetails()):(n(),r('[id*="'+Markets.MORE_VIEW_PREF+'"]',a.oView.parentNode).remove())},error:n})).then(function(){return Markets.ONLY_ONE_EVENT_OPEN_AM?a.hideOtherViewDetails():r.Deferred().resolve().promise()}).then(function(){return Markets.addToOpenedIdsInTheUrl(e)}).always(function(){r(document).trigger("successAdditionalMarketsUpdate",[e,a.isLive()]),window.Emitter.emit("successAdditionalMarketsUpdate",{treeId:e,isLive:a.isLive()})})},this.updateContent=function(e){var t=r(this.oView).closest("[data-sport-treeid]").data("sport-treeid");e=panbet.PreferencesApplier.apply(r(e),t,this.getTreeID()),r("[data-event-statistics-container]:first",r(this.oView).parents("[data-event-name]")).after(e),this.setVisibility(!0),EventsViewHelper.isLastEventInCoupone(this.oView)||EventsViewHelper.addEventFooter(this.oView)},this.getDetails=function(){return r("[data-market-details]",r(this.oView).parents(".coupon-row[data-event-treeid]:first"))},this.hideViewDetails=function(){this.getDetails().remove();var e=this.getTreeID();return r(".coupon-row[data-event-treeid="+e+"] [data-event-statistics-container]:first").hasClass("show-statistics")||EventsViewHelper.removeEventFooter(this.oView),Markets.removeIdsFromUrl([e])},this.getViewDetailsHeight=function(){var e=0;return this.getDetails().each(function(){e+=r(this).outerHeight()}),e+=EventsViewHelper.getEventFooterHeight(this.oView)},this.hideOtherViewDetails=function(){var e,t,n=r.Deferred().resolve().promise(),a=this.getTreeID(),i=0,o=!0;return r('[id*="'+Markets.MORE_VIEW_PREF+'"]').each(function(e,t){r(t).attr("treeid")!=a?(t=new EventView(t))&&t.isVisible()&&(o&&(i+=t.getViewDetailsHeight()),n=t.close()):o=!1}),0<i&&(t=(e=r(".main-container")).scrollTop()-i,e.scrollTop(0<t?t:0)),n}},Markets.showDelimiterAndMarketsHeaderForStatistics=function(e){EventsViewHelper.isLastEventInCoupone(e)||EventsViewHelper.addEventFooter(e)},Markets.hideDelimiterAndMarketsHeaderForStatistics=function(e,t){0==r(".coupon-row[data-event-treeid="+t+"] .market-details-"+t+":last").length&&EventsViewHelper.removeEventFooter(e)},Markets.parseEventID=function(e){return e.split("_").shift()},Markets.getVisibleMarkets=function(){var n=[];return r('[id*="'+Markets.MORE_VIEW_PREF+'"]').each(function(e,t){t=new EventView(t);t&&t.isVisible()&&n.push(t.getTreeID())}),n},Markets.applyView=function(e){e=new EventView(e);this.isLoading(e)||(e.isVisible()?e.close():e.show())},Markets.updateContent=function(e,t){new EventView(e).updateContent(t)},Markets.openDetailsById=function(n){var e;isNaN(parseInt(n,10))||(Markets.ONLY_ONE_EVENT_OPEN_AM&&r('[id*="'+Markets.MORE_VIEW_PREF+'"]').each(function(e,t){t=new EventView(t);t&&t.isVisible()&&t.getTreeID()!=n&&t.close()}),null==(e=document.getElementById(Markets.MORE_VIEW_PREF+n)))||(e=new EventView(e)).isVisible()||e.show()},Markets.isLoading=function(e){return r(e.oView).hasClass("loading")},Markets.showProcess=function(e){r(e).addClass("loading")},Markets.hideProcess=function(e){r(e).removeClass("loading")},Markets.showModalPopup=function(e,t){(e=r.event.fix(e||window.event)).stopPropagation(),e.preventDefault();var e=e.target,n=r(e.parentNode).find(".score-popup"),a=n.find("IMG.score-popup-info"),i=n.find(".score-popup-content");panbetModal(n),t?(n=r("#"+t).html(),i.html(n),Markets.applyScoreInfo(a,i)):i.load(e.href,function(){Markets.applyScoreInfo(a,i)})},Markets.applyScoreInfo=function(e,t){e.css("display","none"),t.css("display","");e=t.find(".scorecast-player-table").width();t.css("width",e),r(document).trigger("content.loaded"),window.Emitter.emit("content.loaded")},Markets.closePopup=function(e){e=r.event.fix(e||window.event),e.preventDefault(),e=r(e.target.parentNode).find(".score-popup-content");r.modal.close(),e.html("")},Markets.onChangeScorecastPlayer=function(e){Markets.hideScorecastPlayersTable(e),$$("scorecast_"+e.options[e.selectedIndex].value).style.display=""},Markets.hideScorecastPlayersTable=function(e){r(e).parent().parent().find(".scorecast-player-table").css("display","none")},Markets.onShortcutMenulinkSelect=function(e,t){r(document).trigger(Markets.MENU_LINK_SELECT_EVENT,[e,t]),t==Markets.SHORTCUTS_ALL&&TrackingEngine.trigger(TrackingEngine.EVENT.EVENT_OPEN_ALL_MARKETS)},Markets.getEventIdFormShortcutId=function(e){var t=e.indexOf(Markets.SHORTCUTS_TYPE);return e.substring(e.indexOf(Markets.SHORTCUTS_ID)+Markets.SHORTCUTS_ID.length,0<t?t:e.length)},Markets.setRowspans=function(n){var a={};r("td[data-id = '"+n+"']").parents("table").find("tr.rows-with-coeffs:visible").each(function(){var e,t=r(this).attr("data-type");a[t]||(e=r("td[data-id = '"+n+"']").parents("table").find("tr.rows-with-coeffs:visible").filter("[data-type='"+t+"']").length,r(this).find("[data-left-column-name]").attr("rowspan",e),a[t]=t)})},Markets.getURLState=function(){var e=r.URLCodec.toObject(r.Page.location().search.substr(1))[Markets.OPENED_MARKETS],t=[];if(e)for(var n=0;n<e.length;n++){var a=parseInt(e[n],10);isNaN(a)||-1!=r.inArray(a,t)||t.push(a)}return t},Markets.setURLState=function(e){var t=r.URLCodec.toObject(r.Page.location().search.substr(1));return t[Markets.OPENED_MARKETS]=e,r.Page.replaceState(null,null,{search:r.URLCodec.fromObject(t)})},Markets.addToOpenedIdsInTheUrl=function(e){if(!Markets.NEED_PROCESS_OPENED_MARKETS)return r.Deferred().resolve().promise();e=parseInt(e,10);var t=Markets.getURLState();return-1==r.inArray(e,t)&&t.push(e),Markets.setURLState(t)},Markets.removeIdsFromUrl=function(e){if(!Markets.NEED_PROCESS_OPENED_MARKETS)return r.Deferred().resolve().promise();for(var t=Markets.getURLState(),n=0;n<e.length;n++){var a=r.inArray(parseInt(e[n],10),t);-1!==a&&t.splice(a,1)}return Markets.setURLState(t)},Markets.eventIsLive=function(e){e=e.getAttribute("isLive");return e&&"true"==e.toLowerCase()},Markets.isSeparatedButton=function(e){e=e.getAttribute("isSeparatedButton");return e&&"true"==e.toLowerCase()},Markets.onMembersClick=function(e){var t=r(e).parents(".coupon-row[data-event-treeid]:first"),n=t.data("eventTreeid"),a={preventDefault:!1,treeId:n},e=(r(document).trigger("markets.members.click",[a]),window.Emitter.emit("markets.members.click",a),r(e).closest(".coupon-row").find(".event-more-view").length);!a.preventDefault&&e&&t.find('[id*="'+Markets.MORE_VIEW_PREF+n+'"]:first').each(function(){Markets.applyView(this)})},Markets.onEventMoreViewClick=function(e){var t={preventDefault:!1,treeId:new EventView(e).getTreeID()};r(document).trigger("markets.event-more-view.click",[t]),window.Emitter.emit("markets.event-more-view.click",t),t.preventDefault||Markets.applyView(e)},Markets.getDelimiter=function(e){return r(e).parents(".coupon-row[data-event-treeid]").find(".event-delimiter")},r(document).on("mouseover","[data-members]",function(){r("[data-members]",r(this).parents("[data-member-area]")).addClass("text-underline")}),r(document).on("mouseout","[data-members]",function(){r("[data-members]",r(this).parents("[data-member-area]")).removeClass("text-underline")}),r(document).on("click","[data-members]",function(){return Markets.onMembersClick(this),!1}),r(document).on("click","[data-member-link]",function(){Markets.onMembersClick(r(this).parents("[data-members]")[0]);var e=r(this).parents(".coupon-row[data-event-treeid]:first").data("eventTreeid");return window.Emitter.emit("markets.members.click",{preventDefault:!1,treeId:e}),!1}),document.addEventListener("client.loaded",function(){r(document).on("click","[data-event-more-view]",function(){return Markets.onEventMoreViewClick(this),!1})}),Markets.toMMSS=function(e){e=new Date(e);return t(e.getMinutes())+":"+t(e.getSeconds())},Markets.updatePreliveTimers=function(e){var t=(new Date).getTime();return r("[data-before-live-countdown], [data-waiting-for-result]",e).filter(function(){var e=r(this).data("beforeLiveCountdown");return e?1e3<(e-=t)?(r(this).removeClass("hidden").find("[data-value]").text(Markets.toMMSS(e)),!0):(r(this).addClass("hidden"),!1):!(r(this).data("waitingForResult")-t<1e3&&(r(this).removeClass("hidden"),1))}).length},Markets.updatePreliveTimersByInterval=function(){var e;Markets.beforeLiveTimersTickerId||(e=function(){Markets.updatePreliveTimers(r("[data-live-events-container]"))||(clearInterval(Markets.beforeLiveTimersTickerId),Markets.beforeLiveTimersTickerId=void 0)},Markets.beforeLiveTimersTickerId=setInterval(e,1e3),e())},Markets.initLazyload=function(){r(".lazyload").lazyLoadXT()},Markets.init=function(){Markets.initLazyload(),Markets.updatePreliveTimersByInterval()},document.addEventListener("content.loaded",Markets.init),document.addEventListener("client.loaded",function(){Markets.init(),window.Emitter.on("next-page-loaded",Markets.init),window.Emitter.on("collapsibleManager.stateChanged",Markets.init),window.Emitter.on("content.loaded",Markets.init)})}(window.jQuery),function(o){function a(e,t){var e=o(e).parents("[data-event-name]").first(),n=!1,a=o(e).find("[data-hidden-views]"),i=o(e).find("[data-visible-views]");0<o(i).children().length&&o(i).children().filter('[data-coupone-selector!="true"]').each(function(){o(this).data("market-type")!=t&&(n=!0,o(this).detach().appendTo(a))}),!n&&0!=o(i).children().length||o(a).children().each(function(){o(this).data("market-type")==t&&o(this).detach().appendTo(i)})}window.SimpleLiveDropDownHelper=(_saveSelectedDropdownItemState=function(e,t){o(document).trigger(Markets.UPDATE_COUPON_MAIN_ROW_EVENT,[+e,t])},_hideSelectedTypeInList=function(e){var t=o("[data-dt] [data-link]",e).removeData("coupon-market-type").data("coupon-market-type");o("[data-ul] [data-li]",e).each(function(){o("[data-link]",this).data("coupon-market-type")==t?o(this).hide():o(this).show()})},{getSelectedDropDownValue:function(e){return o("[data-dt] [data-link]",e).data("coupon-market-type")},setSelectedDropDownValue:function(t,n){o(t).each(function(){o("[data-dd] [data-link]",t).each(function(){var e;n.trim()==o(this).data("coupon-market-type")&&(e=o(this).clone(),o("[data-dt]",t).html(e),o("[data-dd] [data-ul]",t).hide(),a(t,n))})})},saveSelectedDropdownItemState:_saveSelectedDropdownItemState,setCouponSelectListState:a,hideSelectedTypeInList:_hideSelectedTypeInList}),o(document).on("click","[data-dropdown-coupon] [data-dt] [data-link]",function(){var e=o(this).closest("[data-event-treeid]");o("[data-dropdown-coupon] [data-dd] [data-ul]").is(":visible")?(o("[data-dropdown-coupon] [data-dd] [data-ul]").hide(),o(document).trigger("successAdditionalMarketsUpdate",[e.data("eventTreeid"),e.data("live")]),window.Emitter.emit("successAdditionalMarketsUpdate",{treeId:e.data("eventTreeid"),isLive:e.data("live")})):(o(document).trigger("beginAdditionalMarketsUpdate",[e.data("eventTreeid"),e.data("live")]),window.Emitter.emit("beginAdditionalMarketsUpdate",{treeId:e.data("eventTreeid"),isLive:e.data("live")}),o("[data-dropdown-coupon] [data-dd] [data-ul]").hide(),SimpleLiveDropDownHelper.hideSelectedTypeInList(o(this).parents("[data-dropdown-coupon]")),e=o(this).parents("[data-dropdown-coupon]"),o("[data-dd] [data-ul]",e).toggle())}),o(document).on("click","[data-dropdown-coupon] [data-dd] [data-ul] [data-li] [data-link]",function(){var e=o(this),t=e.html(),n=e.data("coupon-market-type"),e=e.closest("[data-dropdown-coupon]"),t=(e.find("[data-dt] [data-link]").html(t).removeData("coupon-market-type").attr("data-coupon-market-type",n),e.find("[data-dd] [data-ul]").hide(),e.closest("[data-event-treeid]")),e=t.data("eventTreeid"),t=t.data("live");SimpleLiveDropDownHelper.saveSelectedDropdownItemState(e,n),SimpleLiveDropDownHelper.setCouponSelectListState(this,n),o(document).trigger("successAdditionalMarketsUpdate",[e,t]),window.Emitter.emit("successAdditionalMarketsUpdate",{treeId:e,isLive:t})}),o(document).on("mouseleave","[data-dropdown-coupon]",function(){var e=o(this).closest("[data-event-treeid]"),t=o(this).find("[data-dd] [data-ul]");t.is(":visible")&&(t.hide(),o(document).trigger("successAdditionalMarketsUpdate",[e.data("eventTreeid"),e.data("live")]),window.Emitter.emit("successAdditionalMarketsUpdate",{treeId:e.data("eventTreeid"),isLive:e.data("live")}))})}(window.jQuery),Panbet={EXCLUDE_FORM:["ticket_form","accountLimitsForm","global_countries_form","consent_withdrawal_form","changeEmailForm"],BONUS_MARK:"bonusMark"},IS_MARATHON_CLIENT=!1,$.uaMatch||($.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}}),$.browser||(matched=$.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),$.browser=browser),showLoginDialogIfNeeded=function(){var e=LoginDialogSessionStorageFacade.controller.getAndRemoveShowLoginDialogInfo();e&&e.showLoginDialog&&!initData.punterProfileRemoved&&showLoginDialog({showDialogReason:e.reason})},replacePage=function(){$.modal.close(),initData&&initData.afterForbiddenRedirectUrl?window.location.href=initData.afterForbiddenRedirectUrl:window.location.reload()},BROWSER.isIE&&(updateSticky=function(){BROWSER.isIE&&Array.from(stickybitsListtoBeUpdated).forEach(function(e){var t=getComputedStyle(e.parentNode);e.style.width=e.parentNode.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)+"px"})},stickybitsListtoBeUpdated=document.querySelectorAll(".sticky"),stickybitsInstancetoBeUpdated=stickybits(".sticky",{scrollEl:"#main_container",stickyBitStickyOffset:offsetTop()})),window.addEventListener("containerMounted",function(e){checkView()}),document.addEventListener("client.loaded",function(){initAgreeTermsDialog();var e=$("#nickname_suggestion");e.length&&e.addModalToViewQueue({onShow:()=>httpCall("/react/site/showNicknameSuggestion")})}),document.addEventListener("client.loaded",function(){var e;/(android)/i.test(navigator.userAgent)&&window.overthrow&&"none"===window.overthrow.support&&(e=$("#header_container").css("z-index")-5||65,$(".grid-leftbar").niceScroll({cursoropacitymin:1,cursorcolor:"#c2c2c2",cursorwidth:"8px",background:"#f7f7f7",zindex:e}),$(".grid-main").niceScroll({cursoropacitymin:1,cursorcolor:"#c2c2c2",cursorwidth:"8px",background:"#f7f7f7",zindex:e})),$("body").css("touch-action","auto"),$(".grid-leftbar").css("touch-action","auto"),$(".grid-main").css("touch-action","auto")}),function(e){var t=window.navigator.userAgent,n=0<t.indexOf("Edge")||0<t.indexOf("MSIE ")||!!t.match(/Trident.*rv\:11\./),a=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&!window.MSStream;document.addEventListener("client.loaded",function(){n||a?e("[data-prevent-autocomplete]").each(function(){e(this).attr("readonly",!1)}):(e("[data-prevent-autocomplete]").filter(function(){return this.value.length&&this.classList.contains("error")}).attr("readonly",!1),e(document).on("focus","[data-prevent-autocomplete]",function(){e(this).attr("readonly",!1)}),e(document).on("blur","[data-prevent-autocomplete]",function(){e(this).attr("readonly",!0)}),e(document).on("focus","input[type=password][autocomplete=off]",function(){e("input[type=text][data-prevent-autocomplete!=true], input[type=tel]",this.form).attr("readonly",!0)}),e(document).on("blur","input[type=password][autocomplete=off]",function(){e("input[type=text][data-prevent-autocomplete!=true], input[type=tel]",this.form).attr("readonly",!1)})),e(document).on("cut copy paste","[data-prevent-copy-paste]",function(e){e.preventDefault()}),e(document).on("blur keydown input","[data-prevent-autocomplete-field]",function(e){var e=e.target,t=document.querySelector("input#"+e.getAttribute("data-id"));t&&(t.value=e.value)});function t(e,t){var n=t?"":"data-",t=t?"data-":"";"input"!==(e=e.target).tagName.toLowerCase()||e.getAttribute(n+"id")||(e.setAttribute(n+"id",e.getAttribute(t+"id")),e.setAttribute(n+"name",e.getAttribute(t+"name")),e.removeAttribute(t+"id"),e.removeAttribute(t+"name"))}e(document).on("focus","[data-prevent-autocomplete-textfield]",function(e){t(e,!1)}),e(document).on("blur","[data-prevent-autocomplete-textfield]",function(e){t(e,!0)}),e(document).on("keydown","[data-prevent-autocomplete-textfield]",function(e){"enter"==e.key.toLowerCase()&&t(e,!0)})})}(jQuery),$(document).on("click","[data-show-help]",function(e){if(!IS_MARATHON_CLIENT)return e.preventDefault(),window.open($(this).attr("data-show-help"),"_blank"),!1}),function(v){window.BaseUpdateHelper=function(){function l(e,t,n){return panbet.PreferencesApplier.apply(e,t,n)}function r(e,t){function n(e){var t=v("[data-collapsible]",e).toArray();return e.is("[data-collapsible]")&&t.push(e),t}e=v(e);var a={};return n(t).forEach(function(e){a[v(e).data("collapsible")]=Collapsible.CollapseControl.getState(v(e))}),n(e).forEach(function(e){var t=a[v(e).data("collapsible")];t||(v(e).is("[data-sport-treeId]")&&Collapsible.isAllSportsCollapsed()||v(e).is("[data-category-treeId]")&&Collapsible.isAllCategoriesCollapsed())&&(t=Collapsible.CollapseControl.STATE.COLLAPSED),t&&(Collapsible.CollapseControl.setState(v(e),t),t==Collapsible.CollapseControl.STATE.COLLAPSED)&&v("[data-content]:first",v(e)).attr("data-content","absent").empty()}),e}function c(e){var t=v(e);return Markets.updatePreliveTimers(e)&&Markets.updatePreliveTimersByInterval(),t}function d(e,t,n){return PriceHighlighter.highlightPrice({html:e,currentDomEl:t,inMainRow:n})}function e(){return v('[data-id="container_POPULAR_EVENTS"]',u())}function t(){return v('[data-id="container_EVENTS"]',u())}var s={event:function(e){var t=v("[data-event-treeId="+e.treeId+"]",u());{if(!t.length)return Log.warn('Unable apply update to event, node by [data-event-treeId="'+e.treeId+'"] not found'),!1;var n=t.closest("[data-sport-treeid]").data("sport-treeid");t.replaceWith(l(c(applyFavorites(d(e.html,t))),n,e.treeId))}return!0},popularRoot:g(e,!0),popularSport:E(e,!0),popularCategory:f(e,!0),popularCategoryEventsLink:p(e),root:g(t,!1),sport:E(t,!1),category:f(t,!1),categoryEventsLink:p(t),categoryBlurb:function(e){return v("[data-category-treeId='"+e.treeId+"'] .category-blurb",u()).html(e.html),!0},mutableUpdates:function(e){var t=v('[data-event-treeId="'+e.treeId+'"]',u());if(t.length){var n,a=e.updates,i=e.treeId,o=t.closest("[data-sport-treeid]").data("sport-treeid");for(n in a){var r=a[n],s=v('[data-mutable-id="'+r.id+'"]',t);s.length?v(s).each(function(){"CHANGE"==r.op||"NEW"==r.op?(v(this).replaceWith(l(c(applyFavorites(d(r.html,this,!!r.mr))),o,i)),Log.debug("Applied mutable update: ",r)):(v(this).remove(),Log.debug("Applied mutable update - removed ",v(this)))}):Log.warn("Unable apply mutable update: ",r," for event treeId: "+i+', taregt node by [data-mutable-id="'+r.id+'"] not found')}}else Log.warn('Unable to apply mutable updates, node by [data-event-treeId="'+e.treeId+'"] not found');return!0},refreshPage:function(e){return Log.warn("Received refreshPage update"),function(){v(document).trigger("content.needReload",[{refreshPageUpdate:!0}]),window.Emitter.emit("content.needReload",[{refreshPageUpdate:!0}])}},removedEventMenuItem:_,modifiedEventMenuItem:_,addedEventMenuItem:_},n=null,u=function(){return n||(n=v("[data-live-events-container]"),u=function(){return n}),n},a=u;function o(){n=null,u=a}function h(e,t){(e=e||[]).length?/union\//.test(v.Page.location().href)&&e.filter(function(e){return"root"===e.type||"sport"===e.type||"category"===e.type}).length?t(!1):(o(),function t(n,a){for(var i,o;i=n.shift(),o=s[i.type],n.length&&!o;);o||setTimeout(function(){a(!0)},0),setTimeout(function(){var e=!0;try{e=o(i)}catch(e){Log.error(e)}finally{!0===e&&n.length?t(n,a):setTimeout(function(){a(e)},0)}},0)}(e.slice(),t)):t(!0)}function p(n){return function(e){var t=v('[data-category-treeId="'+e.treeId+'"]',n());return t.length&&FullCategoryLinks.getState(t)!=FullCategoryLinks.STATE.SHOW_SELECTED_EVENTS&&FullCategoryLinks.setState(t,e.filteredCategory?FullCategoryLinks.STATE.SHOW_FULL_CATEGORY:FullCategoryLinks.STATE.HIDE),!0}}function f(i,o){return function(e){var t,n,a=v('[data-category-treeId="'+e.treeId+'"]',i());return a.length?(t=a.closest("[data-sport-treeid]").data("sport-treeid"),a.replaceWith(l(c(applyFavorites((n=r(d(e.html,a),a),a=a,n=v(n),FullCategoryLinks.getState(a)==FullCategoryLinks.STATE.SHOW_SELECTED_EVENTS&&FullCategoryLinks.setState(n,FullCategoryLinks.STATE.SHOW_SELECTED_EVENTS),n))),t)),!0):(Log.warn("Unable to apply update to "+(o?"popular ":"")+'category, node by [data-category-treeid="'+e.treeId+'"] not found'),!1)}}function g(n,a){return function(e){var t=n();return t.length?(e=v(e.html),e=v("<div/>").html(e),t.html(c(applyFavorites(d(r(e,t),t))).html()),!0):(Log.warn("Unable to apply update to "+(a?"popular ":"")+"root, node not found."),!1)}}function E(a,i){return function(e){var t,n=v('[data-sport-treeid="'+e.sportId+'"]',a());return n.length?(t=n.data("sport-treeid"),n.replaceWith(l(c(applyFavorites(d(r(e.html,n),n))),t)),!0):(Log.warn("Unable to apply update to "+(i?"popular ":"")+'sport, node by [data-sport-treeid="'+e.sportId+'"] not found'),!1)}}function _(e){return window.Emitter.emit("liveUpdate.onModification",e),!0}var m=[];return{UPDATE_REQUEST_TIMEOUT:18e4,pushState:function(){var e;m.push({openMatchBettingsSilks:(e=[],v(".mb-silk").not(":has(a)").each(function(){e.push(v(this).attr("id"))}),e),scorecastState:function(){if(void 0!==window.ScorecastManager)return window.ScorecastManager.save()}()})},popState:function(){if(0!=m.length){for(var e=m.pop(),t=e.openMatchBettingsSilks,n=0;n<t.length;n++)v("#"+t[n]).find("a").trigger("click");e=e.scorecastState,void 0!==window.ScorecastManager&&window.ScorecastManager.restore(e)}},needProcessing:function(e){return!!e},needUpdate:function(e){return e&&(e.modified||e.removed||e.removedPopular)},setContent:function(t,n,a){var i=this;h(n.modified,function(e){(!0!==e?("function"==typeof e?e():(v(document).trigger("content.needReload",[{liveupdatesFailedProcessing:!0}]),window.Emitter.emit("content.needReload",[{liveupdatesFailedProcessing:!0}])),o):(n.removed&&function(e,t){if(1==t.length){var n=t[0],e=v.URLCodec.parse(e).pathSegments();if(e.length&&""+n==e[e.length-1])return t=EventsViewHelper.removeSportWithLinkedCategories(n),Log.debug("Single treeId to remove: "+n+", finally removed: "+t),v(document).trigger("liveUpdate.removedIds",[t]),window.Emitter.emit("liveUpdate.removedIds",[t])}t=EventsViewHelper.remove(t),Log.debug("Removed: "+t),v(document).trigger("liveUpdate.removedIds",[t]),window.Emitter.emit("liveUpdate.removedIds",[t])}(t,n.removed),n.removedPopular&&(Log.debug("Removed popular: "+n.removedPopular),e=EventsViewHelper.removePopular(n.removedPopular),v(document).trigger("liveUpdate.removedPopular",[e])),i.popState(),EventsViewHelper.cleanOldEventFooters(),v(document).trigger("content.loaded",[n]),window.Emitter.emit("content.loaded",[n]),o(),a))()})},getFullUrl:function(){var e=v.Page.location(),t=initData.liveUpdateDomain||e.host,n=initData.liveUpdatePath;return-1!=n.indexOf("liveupdate/favorites")&&(n+=initData.favorites.favoriteTreeIds.join(",")),e.protocol+"//"+t+n+e.search},successResult:function(e,t){var n=v.Deferred();return(this.needProcessing(t)&&(t&&t.updated&&(window.initData.updated=t.updated),this.needUpdate(t))?(this.pushState(),this.setContent(e,t,n.resolve),n):n.resolve()).promise()},sendRequest:function(){var e=Collapsible.getCollapsibleState(),t=Collapsible.getPopularCollapsibleState(),n=this,a=n.getFullUrl(),i=v.Deferred(),e={type:"POST",url:a,dataType:initData.liveUpdateTransport||"JSON",data:{markets:Markets.getVisibleMarkets().toString(),expandedSportIds:e.expandedSports.toString(),expandedCategoryIds:e.expandedCategories.toString(),popularExpandedSportIds:t.expandedSports.toString(),popularExpandedCategoryIds:t.expandedCategories.toString(),updated:window.initData.updated||0,oddsType:window.initData.oddsType,siteStyle:window.initData.siteStyle,timeZone:window.initData.timeZoneId},timeout:n.UPDATE_REQUEST_TIMEOUT,success:function(e){n.successResult(a,e).done(i.resolve).fail(i.reject)},error:function(e){i.reject(e.status)}},t=("JSONP"===initData.liveUpdateTransport&&(e.jsonpCallback="liveUpdate"),v.ajax(e));return{promise:i.promise.bind(i),abort:t.abort.bind(t)}},extend:function(e){for(i in e)this[i]=e[i];return this},Init:function(){}}}}(jQuery),PollingUpdateHelper=function(){},getPollingUpdateHelper=function(){return PollingUpdateHelper._instance||(PollingUpdateHelper._instance=(new BaseUpdateHelper).extend({subscribe:function(){if(!initData||!initData.update_interval)throw Error("Required property initData.update_interval not set.");var a;this.deferred||(a=function(){var e,t,n=$.Deferred();initData.stopLiveUpdate?e=setTimeout(n.resolve,initData.update_interval):(t=this.sendRequest()).promise().always(function(){e=setTimeout(n.resolve,initData.update_interval)}),this.deferred=n.done(a).fail(function(){t&&t.abort(),clearTimeout(e)})}.bind(this))()},unsubscribe:function(){this.deferred&&(this.deferred.reject(),this.deferred=null)},Init:function(){}})),PollingUpdateHelper._instance},function(c){function s(t,a){var i,o=0;function r(e){d&&d.showUp(e)}function s(e){d&&d.showDown(e)}function l(e){o=0,clearTimeout(i),d&&c('[data-selection-key="'+t+'"]',e).each(function(e,t){d.clear(t)})}return function(e,t,n){n!==t?(l(e),(t<n?(o=1,r):(o=-1,s))(e),i=setTimeout(function(){l(),a()},initData.liveTrendsVisualization.visibleTime)):0!=o&&(0<o?r:s)(e)}}var d,l={},t={showUp:function(e){c(e).closest("[data-coeff-uuid]").addClass("lt-text-color price-up")},showDown:function(e){c(e).closest("[data-coeff-uuid]").addClass("lt-text-color price-down")},clear:function(e){c(e).closest("[data-coeff-uuid]").removeClass("lt-text-color price-down price-up")}},n={showUp:function(e){c(e).closest("[data-coeff-uuid]").addClass("lt-arrow price-up")},showDown:function(e){c(e).closest("[data-coeff-uuid]").addClass("lt-arrow price-down")},clear:function(e){c(e).closest("[data-coeff-uuid]").removeClass("lt-arrow price-down price-up")}};function i(e,n,a){null==a?(c("[data-selection-price][data-selection-key]:not([data-market-details] [data-selection-price][data-selection-key])",e).each(function(e,t){n(!0,t)}),c("[data-market-details] [data-selection-price][data-selection-key]",e).each(function(e,t){n(!1,t)})):c("[data-selection-price][data-selection-key]",e).each(function(e,t){n(a,t)})}function a(e){c("[data-visualization-type-selected=true]").removeClass("select-item").attr("data-visualization-type-selected",!1),c("span:first",c("[data-visualization-type="+e+"]")).addClass("select-item").attr("data-visualization-type-selected",!0),d="ARROW"==e?n:"TEXT_COLOR"==e?t:void 0}window.PriceHighlighter={highlightPrice:function(e){var t,n,r,a="";return t=c(e.html),n=e.currentDomEl,e=e.inMainRow,d&&(r={mainRow:{},additionMarkets:{}},i(n,function(e,t){r[e?"mainRow":"additionMarkets"][c(t).data("selection-key")]=t},e),i(t,function(e,t){var n,a,i=c(t).data("selection-key"),o=r[e?"mainRow":"additionMarkets"][i];o&&(o=parseFloat(c(o).data("selection-price")),n=parseFloat(c(t).data("selection-price")),(e=l[a=i+"_"+e])||(e=s(i,function(){delete l[a]}),l[a]=e),e(t,o,n))},e)),t.each(function(){var e=c(this).prop("outerHTML");e&&(a+=e)}),a}},document.addEventListener("client.loaded",function(){a(window.initData.visualizationType),window.Emitter.on("settings.updated",function(e){_.has(e,"visualizationType")&&a(e.visualizationType)})})}(jQuery),function(o){o(document).on("focus","[data-page-navigator] input[type=text]",function(){var a=o(this).data("pageUrl"),i=o(this).data("totalPages");this.onkeydown=function(e){var t,n=(e=e||window.event).keyCode||e.which;{if(13!=n||isNaN(o(this).val())||""==o(this).val().trim())return e=e,n=n,n=String.fromCharCode(96<=n&&n<=105?n-48:n),t=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey,!(!/[\d]|[\x00-\x1F\x7F\x2E\x25\x27]/.test(n)||/[\d]/.test(n)&&t)||(e.returnValue=!1,e.preventDefault&&e.preventDefault(),!1);0<(n=parseInt(o(this).val(),10))&&n<=i&&o("<a data-pager-link href='"+a.replace("%{0}",n)+"' style='display:none'></a>").insertAfter(this).trigger("click")}},this.onchange=this.onkeyup=function(){var e=parseInt(o(this).val(),10);/[\d]+/.test(o(this).val())&&0<e&&e<=i?o(this).removeClass("error"):o(this).addClass("error")},this.onfocus=function(){o(this).val("").hasClass("error")&&o(this).removeClass("error")}})}(jQuery),function(e){function a(e){return 0<e.length&&0!=e.indexOf("?")?"?"+e:e}var i=document.createElement("a");e.extend({URLCodec:{toObject:function(e){var t={};if(e&&""!=e.trim()){var n=e.trim();if(0!=n.length)for(var a in n=n.split("&"))n.hasOwnProperty(a)&&(void 0===(a=n[a].split("="))[1]?t.default=a[0]:t[a[0]]="string"==typeof(a=a[1])?a.split(","):[])}return t},fromObject:function(e){var t,n,a,i=[];for(t in e)e.hasOwnProperty(t)&&(n="default"!=t?t+"=":"",a=e[t],a=((Array.isArray(a)?a.join(","):a)||"").toString().trim())&&""!=a&&i.push(n+a);return i.join("&")},parse:function(e){var t,n=i,a=(n.href=e,this),e=0===e.indexOf("/");return{hash:n.hash,host:(e?window.location:n).host,hostname:(e?window.location:n).hostname,href:n.href,origin:n.origin,pathname:null!=(t=n.pathname)&&"/"!=t[0]?"/"+t:t,port:(e?window.location:n).port,protocol:(e?window.location:n).protocol,search:n.search,getParams:function(){return a.toObject(this.search.replace(/^\?/,""))},hashParams:function(){return a.toObject(this.hash.replace(/^#/,""))},pathSegments:function(){return this.pathname.replace(/^\//,"").split("/")}}},updateURL:function(e,t){for(var n in"string"==typeof e&&(e=this.parse(e)),t)null!=e[n]&&(e[n]=t[n]);return e.host=e.hostname+(e.port?":"+e.port:""),e.search=a(e.search),e.href=e.protocol+"//"+e.host+e.pathname+e.search+("#"!==e.hash&&e.hash||""),e},updateSearchParams:function(e,t){return"string"==typeof e&&(e=this.parse(e)),t&&(e.search=a(this.fromObject(t(this.toObject(e.search.replace(/^\?/,"")))))),e.href=e.protocol+"//"+e.host+e.pathname+e.search+("#"!==e.hash&&e.hash||""),e}}})}(jQuery),function(o){function r(e,t,n){var a=o.Deferred(),i=o.Callbacks("once");return d.call(this,e,t,n).done(function(){i.fire.apply(i,arguments),a.resolve.apply(this,arguments)}).fail(function(){a.reject.apply(this,arguments)}),o.extend({},a.promise(),{updateContent:i.add,abort:function(){l&&l.abort()}})}function s(t,e,n){var a=o.Deferred(),i=(t.startsWith(location.origin)&&(t=t.substring(location.origin.length)),initData.base_dir);return t.startsWith(i)&&(t=t.substring(i.length)),window.router[n?"replace":"push"]({path:t,query:{pageAction:e}}).catch(e=>{if(4!==e.type)throw e;window.router[n?"replace":"push"]({path:t}).then(a.resolve)}),a.promise()}function a(e){for(var t=window.location,n=["hash","hostname","pathname","port","protocol","search"],a=0;a<n.length;a++){var i=n[a];void 0===e[i]&&(e[i]=t[i])}return e.host=e.hostname+(e.port?":"+e.port:""),e.search=0<e.search.length&&0!=e.search.indexOf("?")?"?"+e.search:e.search,e.href=e.protocol+"//"+e.host+e.pathname+e.search+("#"!==e.hash&&e.hash||""),e}function t(e,t,n){for(var a=c[e],i=0;i<a.length;i+=1)a[i](t,n)}var l,c={popstate:[],"hashhange":[]},n=new RegExp("#.*"),d=function(e,t,n){return n=o.extend(!0,{},n||{},{url:e,data:{pageAction:t||"default"}}),l&&!n.allowParallelRequests&&l.abort(),l=o.ajax(n).always(function(){l=null})},u=(o.extend({Page:{location:function(){var e;return 0==arguments.length?window.location:("object"==typeof(e=arguments[0])&&(e=a.call(this,e).href),function(e,t,n){var a=o.Deferred(),i=r.call(this,e,t,n).done(function(){h&&u!=e&&!n.ignorePushHistory?s(e,t).done(function(){u=window.location.href}).done(a.resolve):a.resolve()});return o.extend(i,a.promise())}.call(this,e.trim(),arguments[1],arguments[2]))},getHref:function(){return(1==arguments.length&&"object"==typeof arguments[0]?a.call(this,arguments[0]):window.location).href},reload:function(e,t){return r.call(this,this.location().href,e,t)},on:function(e,t){if("function"!=typeof t)throw new Error("Listener must be function.");if(!((e=e.toLowerCase())in c))throw new Error('Event "'+e+'" not find.');c[e].push(t)},off:function(e,t){(e=e.toLowerCase())in c&&-1!=(t=o.inArray(t,c[e]))&&c[e].splice(t,1)},pushState:function(e,t,n){return"object"==typeof n&&(n=a.call(this,n).href),u!==n?s(n,"default").done(function(){u=window.location.href}):o.Deferred().resolve().promise()},replaceState:function(e,t,n){return"object"==typeof n&&(n=a.call(this,n).href),u!==n?s(n,"default",!0).done(function(){u=window.location.href}):o.Deferred().resolve().promise()},startAutoPushHistory:function(){h=!0},stopAutoPushHistory:function(){h=!1},isUrlChanged:function(e,t){return e.replace(n,"")!=t.replace(n,"")},getSearchParams:function(){return o.URLCodec.toObject(this.location().search.substr(1))}}}),window.location.href),h=!0;o(window).on("popstate",function(){var e=window.location.href;o.Page.isUrlChanged(e,u)&&t("popstate",e,u),u=e}),o(window).on("hashchange",function(e){t("hashchange",e.originalEvent.newURL,e.originalEvent.oldURL)}),document.addEventListener("client.loaded",function(){o.Page.isUrlChanged(location.href,o.Page.location().href)&&t("popstate",window.location.href,u)})}(jQuery),function(i){var o=/^(javascript:|#)/i,r=[];function s(e){for(var t=0;t<r.length;t++)if(r[t].regex.source===e.source)return t;return-1}i.extend({Links:{click:function(e,t){if(!e instanceof RegExp||"function"!=typeof t)throw new Error("Wrong method arguments. First must be regex, second - function.");var n=s(e),a=null;-1!=n?a=r[n]:r.push(a={regex:e,listeners:[]}),a.listeners.push(t)},offClick:function(e,t){var e=s(e),n=null;-1!=e&&(n=r[e],-1!=(t=i.inArray(t,n.listeners))&&n.listeners.splice(t,1),0==n.listeners.length)&&r.splice(e,1)}}}),i(document).on("click","a",function(){var e=!0;if(0!=r.length&&"A"===this.tagName&&this.href&&function(e){var t;if(""!==(e=e.trim()))return t=i.Page.location().href.replace(/#.*/,""),0==e.indexOf(t)&&""===(e=e.substr(t.length))||!o.test(e)}(this.href))for(var t=0;t<r.length;t++)if(r[t].regex.test(this.href))for(var n=r[t].listeners,a=0;a<n.length;a++)!1===n[a].call(this,this)&&(e=!1);return e})}(jQuery),window.DomainHelper=function(){var a;return{addAuthTokenAndFollowLink:function(e){var n;a=$.URLCodec.parse(e),n={always:function(){window.location=a.href}},$.ajax({url:initData.base_dir+"/myaccount/authToken.htm",type:"POST",dataType:"json",success:function(t){t&&t.authToken&&$.URLCodec.updateSearchParams(a,function(e){return e.loginAuthToken=t.authToken,e}),n.success&&n.success()},complete:n.always})}}}(),$(document).on("click",".js-phone-prefix-widget .js-prefix-placeholder",function(e){e.stopPropagation();var t=$(this).siblings(".js-dropdown").first();t.length&&(void 0===t.data("isMenuOpen")?(t.data("isMenuOpen",!0),t.css("display","block"),$(document).on("click","body",function(){t.data("isMenuOpen")&&(t.data("isMenuOpen",!1),t.css("display","none"))}),$(document).on("click",".js-phone-prefix-widget .js-dropdown li",function(){var e,t,n,a=$(this).data("country"),i=$(this).data("prefix"),o=$(this).parents(".js-phone-prefix-widget");o.length&&(n=$(".js-prefix-placeholder .flag",o),e=$(".js-prefix-placeholder .prefix-code",o),t=$('input[type="hidden"]',o),n.length&&e.length&&t.length&&(n.removeClass().addClass("flag flag-"+a),e.html("+"+i),t.val(i)),(n=$(o).parents("form").find("input:visible")).length)&&n.first().trigger("focus")})):t.data("isMenuOpen")?(t.data("isMenuOpen",!1),t.css("display","none")):(t.data("isMenuOpen",!0),t.css("display","block")))}),function(a){a.extend({blink:{run:function(e,t,n){return setInterval(function(){a(e).toggleClass(n)},t)}}}),document.addEventListener("client.loaded",function(){a("[data-blink]").each(function(){a.blink.run(this,a(this).data("blink"),"blink")})})}(jQuery),function(e){var t,n,a,i,o=e.document,r=o.documentElement,o="ontouchmove"in o,s="WebkitOverflowScrolling"in r.style||"msOverflowStyle"in r.style||!o&&800<e.screen.width||(t=e.navigator.userAgent,n=t.match(/AppleWebKit\/([0-9]+)/),a=n&&n[1],i=n&&534<=a,t.match(/Android ([0-9]+)/)&&3<=RegExp.$1&&i)||t.match(/ Version\/([0-9]+)/)&&0<=RegExp.$1&&e.blackberry&&i||-1<t.indexOf("PlayBook")&&i&&-1===!t.indexOf("Android 2")||t.match(/Firefox\/([0-9]+)/)&&4<=RegExp.$1||t.match(/wOSBrowser\/([0-9]+)/)&&233<=RegExp.$1&&i||t.match(/NokiaBrowser\/([0-9\.]+)/)&&7.3===parseFloat(RegExp.$1)&&n&&533<=a;e.overthrow={},e.overthrow.enabledClassName="overthrow-enabled",e.overthrow.addClass=function(){-1===r.className.indexOf(e.overthrow.enabledClassName)&&(r.className+=" "+e.overthrow.enabledClassName)},e.overthrow.removeClass=function(){r.className=r.className.replace(e.overthrow.enabledClassName,"")},e.overthrow.set=function(){s&&e.overthrow.addClass()},e.overthrow.canBeFilledWithPoly=o,e.overthrow.forget=function(){e.overthrow.removeClass()},e.overthrow.support=s?"native":"none"}(this),function(n){var a="data-favorites-state";window.FavoritesSelector={CHECKED:{toString:function(){return this.valueOf()},valueOf:function(){return"CHECKED"},css:"checked"},UNCHECKED:{toString:function(){return this.valueOf()},valueOf:function(){return"UNCHECKED"},css:"unchecked"},HALF:{toString:function(){return this.valueOf()},valueOf:function(){return"HALF"},css:"half-checked"},setState:function(e,t){n(e).removeClass(this.CHECKED.css+" "+this.UNCHECKED.css+" "+this.HALF.css).addClass(this[t].css).attr(a,t)},getState:function(e){e=n(e);if(0<e.length)return this[n(e.get(0)).attr(a)]}},document.addEventListener("client.loaded",function(){window.Emitter.on("favoritesTreeStateInfo.updated",function(e){var t,n=e.stateDiff;for(t in n)n.hasOwnProperty(t)&&FavoritesSelector.setState("[data-favorites-selector="+t+"]",n[t])})})}(jQuery),function(r){function e(a){return function(e,t,n){return r(e).filter(function(){return!a(this,t,n)}).toArray()}}function a(e,t){var n=!!e.length;return e.each(function(){t(r(this))}),e.remove(),n}function s(e,t,n){e=e.hasClass?e:r('[data-category-treeid="'+e+'"]',t),t=!!e.length;return e.each(function(){var e=r(this),t=e.closest("[data-sport-treeid]");n(e),e.next(".link-top").remove(),e.remove(),t.length&&!r("[data-category-treeid]",t).length&&a(t,n)}),t}function t(e,t){var i,o,n={};function a(e){n[e.data("eventTreeid")||e.data("categoryTreeid")||e.data("sportTreeid")]=!0,r("[data-event-treeid],[data-category-treeid],[data-sport-treeid]",e).each(function(){a(r(this))})}return e=u(d(e||[],t,a),t,a),i=t,o=a,r.each(e,function(e,t){t=r('[data-event-treeid="'+t+'"]',i);r.each(t,function(){var e=r(this),t=(o(e),e.prevAll("[data-event-treeid]:first")),n=e.closest("[data-category-treeid]"),a=e.closest(".foot-market-border");l(e),e.remove(),0<t.length&&c(t)&&l(t),a.each(function(){var e=r(this);e.find("[data-event-treeid]").length||e.remove()}),n.length&&!n.find("[data-event-treeid]").length&&s(n,i,o)})}),Object.keys(n)}function l(e){var e=r(e).closest("[data-event-treeid]"),t=e.attr("data-event-treeid");e.closest(".foot-market-border").find('[data-event-delimiter="'+t+'"], [data-event-header="'+t+'"]').remove()}function c(e){var e=r(e).closest("[data-event-treeid]"),t=e.closest(".foot-market-border").find(".coupon-row[data-event-treeid]:last").attr("data-event-treeid");return e.attr("data-event-treeid")===t}var d,u;window.EventsViewHelper=(d=e(function(e,t,n){return a(r('[data-sport-treeid="'+e+'"]',t),n)}),u=e(s),{remove:t,removeSportWithLinkedCategories:function(e){var t,n=[],a=r('[data-sport-treeid="'+e+'"]'),a=(a.length&&(a.remove(),Log.debug("Removed direct sport: "+e),n.push(e)),r("[data-linked-sport-"+e+"]"));return a.length?(t=a.map(function(){return r(this).data("sportTreeid")}).toArray(),a.remove(),Log.debug("Removed all linked sports: "+t+", by direct sport: "+e),n.concat(t)):this.remove(n=[e])},removePopular:function(e){return t(e,'[data-id="container_POPULAR_EVENTS"]')},isLastEventInCoupone:c,addEventFooter:function(e){var e=r(e).closest("[data-event-treeid]"),t=e.closest(".foot-market-border"),n=e.attr("data-event-treeid"),a=r('[data-event-delimiter="'+n+'"]',t);a.length||(a=r('<div class="coupon-row-item event-delimiter" data-event-delimiter="'+n+'"></div>'),e.after(a)),"SIMPLE"===initData.siteStyle&&e.data("live")||(e=r('[data-event-header="'+n+'"]',t)).length||((e=t.find(".coupone-labels").clone()).removeClass("coupone-labels").addClass("market_footer").attr("data-event-header",n),r(e).find("[data-tooltip-parent]").each(function(){var e,t=r(this);r(t).is("[data-hasqtip]")&&(t[0].isTooltip=!1,e="#"+r(t).attr("data-aria-describedby")+"-content",e=r(e).children().clone().css("display","none"),r(t).attr("data-hasqtip",null).attr("data-aria-describedby",null),r(e).appendTo(r(t)))}),a.after(e))},removeEventFooter:l,getEventFooterHeight:function(e){var e=r(e).closest("[data-event-treeid]"),t=e.attr("data-event-treeid"),n=0;return e.closest(".foot-market-border").find('[data-event-delimiter="'+t+'"], [data-event-header="'+t+'"]').each(function(){n+=r(this).outerHeight()}),n},cleanOldEventFooters:function(){r("[data-event-delimiter]").each(function(){var e=r(this).attr("data-event-delimiter"),e=r(this).closest(".foot-market-border").find("[data-event-treeid='"+e+"']");r("[data-market-details], [data-event-statistics-container]",e).filter(function(){return""!==r(this).html().trim()}).length||l(e)})}})}(jQuery),function(i){var e={VISIT_PAGE:"visit",VISIT_DYNAMIC_PAGE:"visitDynamicPage",LOGIN:"login",LOGIN_ERROR:"loginError",LOGOUT:"logout",JOIN:"join",DEPOSIT_FORM_SUBMIT:"depositFormSubmit",DEPOSIT_SEND:"depositSend",DEPOSIT:"deposit",BET_PLACED:"betPlaced",BET_ABORTED:"betAborted",TOTO_BET_PLACED:"totoBetPlaced",TOTO_BATCH_BET_PLACED:"totoBatchBetPlaced",TOTO_BATCH_BET_PLACED_ERROR:"totoBatchBetPlacedError",TOTO_BATCH_COMPILE_TICKET_ERROR:"totoBatchCompileTicketError",TOTO_BATCH_UPLOAD_FILE:"totoBatchUploadFile",TOTO_BATCH_INVALID_FILE_EXTENSION:"totoBatchInvalidFileExtension",VISIT_TOTO_STATISTIC_PAGE:"totoStatisticsVisit",BANNER_CLICKED:"bannerClicked",JOIN_PAGE_VISIT:"joinPageVisit",REGISTRATION:"registration",CAPTCHA_VIEW:"captchaView",CAPTCHA_SUCCESS:"captchaSuccess",THREE_DS_MSG_ACCEPTED:"threeDsMessageAccepted",THREE_DS_MSG_CLOSED:"threeDsMessageClosed",LIVE_ANIMATION:"liveAnimation",LIVE_STATISTIC:"liveStatistic",LOYALTY_MESSAGE_SHOWED:"loyaltyMessageShowed",LOYALTY_MESSAGE_CLOSED:"loyaltyMessageClosed",LOYALTY_BUY:"loyaltyBuy",LOYALTY_UP_LEVEL:"loyaltyUpLevel",LOYALTY_SHOW_CATALOG:"loyaltyShowCatalog",OPEN_EVENT_NAME_SEPARATELY:"openEventNameSeparately",OPEN_ADDITIONAL_MARKETS_SEPARATELY:"openAdditionalMarketsSeparately",EVENT_OPEN_ALL_MARKETS:"eventOpenAllMarkets",MARKET_CHOICE_CLICKED:"marketChoiceClicked",BETSLIP_REMOVE_CHOICE_CLICKED:"betslipRemoveChoiceClicked",BETSLIP_REMOVE_ALL_CHOICES_CLICKED:"betslipRemoveAllChoicesClicked",BETSLIP_CHOICE_ADDED:"betslipChoiceAdded",BETSLIP_CHOICE_REMOVED:"betslipChoiceRemoved",BETSLIP_ALL_CHOICES_REMOVED:"betslipAllChoicesRemoved",REGISTRATION_CONFIRMATION_FAILURE:"registrationConfirmationFailure",PREVENT_MODAL_SHOWED:"preventModalShowed",PREVENT_MODAL_BUTTON_CLICKED:"preventModalButtonClicked",PASSWORD_RECOVERY:"passwordRecovery",UNION_RESULT_LIVE_EVENT_CLICKED:"unionResultLiveEventClicked",PROMOTIONS:"promotions",UNION_RESULTS:"unionResults",FAST_DEPOSIT:"fastDeposit",BROADCASTS_WIDGET:"broadcastsWidget",EDIT_BET:"editBet",SUPERPRIZE_ANSWERS_ACCEPTED:"superprizeAnswersAccepted",CASH_OUT:"cashOut",AUTO_CASH_OUT:"autoCashOut",JOIN_PAGE_REDIRECT:"joinPageRedirect",JOIN_PAGE_NEMID:"joinPageNemid",CHANGE_CURRENCY:"changeCurrency",REGISTRATION_CONFIRM_PHONE_OPEN:"registrationConfirmPhoneOpen",REGISTRATION_CONFIRM_PHONE_FAILURE:"registrationConfirmPhoneFailure",REGISTRATION_CONFIRM_PHONE_SUCCESS:"registrationConfirmPhoneSuccess",JOIN_MESSAGE_ERROR:"joinMessageError",REGISTRATION_FORM_SENT_PINCODE_SAVE:"registrationFormSentPincodeSave",PINCODE_SAVE_POPUP:"pincodeSavePopup",ACTIVITY_REPORT:"activityReport",USER_AUTHORIZATION_POPUP:"userAuthorizationPopup",BANNER_SHOW:"bannerShow",TE_PROPERTIES_UPDATED:"tePropertiesUpdated",IDENTIFICATION_PAGE_OPEN:"IdentificationPageOpen",IDENTIFICATION_PAGE_ERROR_CLICK:"IdentificationPageErrorClick",IDENTIFICATION_PAGE_CHOOSE_METHOD:"IdentificationPageChooseMethod",IDENTIFICATION_FORM_OPEN:"IdentificationFormOpen",IDENTIFICATION_FORM_SEND:"IdentificationFormSend",REGISTRATION_FORM_VALIDATION_ERROR:"registrationFormValidationError",REGISTRATION_FORM_FAILURE:"registrationFormFailure",REGISTRATION_FORM_LEAVE:"registrationFormLeave",BONUS_FORM_OPEN:"bonusFormOpen",BONUS_FORM_FAILURE:"bonusFormFailure",BONUS_FORM_CLOSE:"bonusFormClose",PERSONAL_DETAILS_REQUEST_OPEN:"PersonalDetailsRequestOpen",PERSONAL_DETAILS_REQUEST_SENT:"PersonalDetailsRequestSent",PERSONAL_DETAILS_REQUEST_FAILURE:"PersonalDetailsRequestFailure",REGISTRATION_CLICK:"RegistrationClick",IDENTIFICATION_ADDRESS_FORM_OPEN:"identificationAddressFormOpen",IDENTIFICATION_FORM_FAILURE:"identificationFormFailure",IDENTIFICATION_COMPLETE_FORM_FAILURE:"identificationCompleteFormFailure",IDENTIFICATION_FORM_VALIDATION_ERROR:"identificationFormValidationError",IDENTIFICATION_REQUEST_FORM_OPEN:"identificationRequestFormOpen",IDENTIFICATION_PROCESS_CLICK:"identificationProcessClick",IDENTIFICATION_FORM_ERROR:"identificationFormError",REGISTRATION_FORM_LEAD:"registrationFormLead",REGISTRATION_FORM_CLICK:"registrationFormClick",SPORT_GAMES_GAME_OPENED:"sportGamesGameOpened",SPORT_GAMES_GAME_CLOSED:"sportGamesGameClosed",SPORT_GAMES_BET_PLACED:"sportGamesBetPlaced",PERSONAL_DETAILS_BIRTHDAY_SENT:"personalDetailsBirthdaySent",PERSONAL_DETAILS_BIRTHDAY_FAILURE:"personalDetailsBirthdayFailure",PERSONAL_DETAILS_EMAIL_REQUEST_OPENED:"personalDetailsEmailRequestOpened",PERSONAL_DETAILS_EMAIL_FAILURE:"personalDetailsEmailFailure",PERSONAL_DETAILS_EMAIL_SENT:"personalDetailsEmailSent"},o=Log.getLogger("TE.logger");function r(e){return e&&-1<i.inArray(e,TrackingEngine.EVENTS_ARRAY)}function s(e){return"TrackingEngine."+e.toLowerCase()}o.setLevelInfo(),window.TrackingEngine={EVENT:e,EVENTS_ARRAY:i.map(e,function(e,t){return[e]}),previousEvents:[],on:function(e,t){var n,a;r(e)&&t?(n=s(e),o.debug("TrackingEngine.subscribing callback on event "+n+": "+t.toString()),a=function(){try{t.apply(this,arguments)}catch(e){o.error("TrackingEngine callback invocation error on event: "+n+", callback: "+t.toString()+"\n Error: "+e.message)}},i(document).on(n,a),0<TrackingEngine.previousEvents.length&&i(TrackingEngine.previousEvents).each(function(){var e;n==this.event&&((e=i({})).on(n,a),e.trigger(n,this.params),e.off())})):o.warn("TrackingEngine invalid subscribing parameters. Event: "+e+", callback: "+t)},trigger:function(e,t){var n;r(e)?(n=s(e),o.info("TrackingEngine.triggering event "+n+(t?", parameters: "+JSON.stringify(t):"")),initData.isTestMode||(TrackingEngine.previousEvents.push({event:n,params:t}),i(document).trigger(n,t))):o.warn("TrackingEngine invalid event "+e+" not triggered.")},processServeSideTrackingEvents:function(e){e&&(o.info("TrackingEngine detects event from serverside: "+e),e=e.split("||"),i.each(e,function(e,t){t=t.split("|");window.TrackingEngine.trigger(t.shift(),t)}))}}}(jQuery),window.TrackingEngineSourceHeaderName="x-te-source",window.TrackingEngineAuthPopupSource={HEADER:"header",REGISTRATION:"registration_link",BET:"bet",GAME:"game",QUIZ:"quiz",ACCOUNT:"account",OTHER:"other"},window.TrackingEnginePersonalDetailPopupSource={BETTOTO:"bet_toto",BETSPORT:"bet_sport",CASINO:"casino",DEPOSIT:"deposit",ACCOUNT:"myaccount",WITHDRAW:"withdraw",OTHER:"other"},window.TrackingEngineJoinClickSource={HEADER:"header",LOGIN_POPUP:"login_popup",ALL_PROMOTIONS:"all_promotions",SPECIFIC_PROMOTION:"specific_promotion",PROMOTION_PAGE_DESCRIPTION:"promotion_page_description",GAME_HEADER:"game_header",GAME_BONUS_BANNER:"game_bonus_banner"},function(l){function s(){return l.Deferred().resolve().promise()}function c(e,t){e&&-1!=(t=l.inArray(t,e))&&e.splice(t,1)}function d(e){return e.data("collapsible")}function e(e){var n={collapsedSports:[],expandedSports:[],collapsedCategories:[],expandedCategories:[]};return l("[data-sport-treeid], [data-category-treeid]",e).each(function(){var e=l(this).data("categoryTreeid"),t=!l(this).is("[data-collapsible]")||u.getState(l(this))==u.STATE.DISPLAYED;e?n[t?"expandedCategories":"collapsedCategories"].push(e):n[t?"expandedSports":"collapsedSports"].push(l(this).data("sportTreeid"))}),n}function o(i,o,r){var s="all";function t(e){return l.map(Array.isArray(e)?e:[e],function(e){return""+e})}function a(a,i,e){l.each(t(e),function(e,t){var n;-1!=l.inArray(t,a)?c(a,t):i[0]!==s&&(t=t,n=i)&&-1==l.inArray(t,n)&&n.push(t)})}return{expandIds:function(e){var t=i[o]||[],n=i[r]||[];a(n,t,e),i[o]=t,i[r]=n},collapseIds:function(e){var t=i[o]||[],n=i[r]||[];a(t,n,e),i[o]=t,i[r]=n},expandAll:function(){i[o]=[s],delete i[r]},collapseAll:function(){delete i[o],i[r]=[s]},isAllCollapsed:function(){return(i[r]||[])[0]===s},removeIds:function(e){var n=i[o]||[],a=i[r]||[];l.each(t(e),function(e,t){c(n,t),c(a,t)}),i[o]=n,i[r]=a},isCollapsed:function(e){var t=this.isAllCollapsed(),e=l.inArray(""+e,i[t?o:r]||[]);return t?-1===e:-1!==e}}}i="data-collapsible-state";var i,u={STATE:{COLLAPSED:1,DISPLAYED:2},getState:function(e){return+e.attr(i)||this.STATE.DISPLAYED},setState:function(e,t,n){n=n||"collapsed";var a=this;e.each(function(){var e=l(this);a.getState(e)!=t&&(e.attr(i,t),t==a.STATE.DISPLAYED?e.removeClass(n):e.addClass(n))})},toggle:function(e,n){var a=this;e.each(function(){var e=l(this),t=a.getState(e)==a.STATE.COLLAPSED?a.STATE.DISPLAYED:a.STATE.COLLAPSED;a.setState(e,t,n)})}},h={getState(){return l.URLCodec.toObject(l.Page.location().search.substr(1))},setState(e){return l.Page.pushState(null,null,{search:l.URLCodec.fromObject(e)})},replaceState(e){return l.Page.replaceState(null,null,{search:l.URLCodec.fromObject(e)})}};window.Collapsible={urlSearchStateStorage:h,Manager:function(){var r=arguments;function a(a,i){var o=h.getState(),e=l.map(r,function(e){var t,n=e[a];if(n)return(t=i?i.slice():[]).unshift(e.makeStateProcessor(o)),n.apply(e,t)}).filter(e=>!!e);return l.when.apply(l,e).then(e=>h.setState(o))}return{toggle:function(e){for(var t=0;t<r.length;t++)if(r[t].test(e))return this[u.getState(e)==u.STATE.COLLAPSED?"open":"close"](e);return s()},open:function(e){if(u.getState(e)==u.STATE.COLLAPSED)for(var t=0;t<r.length;t++){var n,a,i=r[t];if(i.test(e))return n=h.getState(),a=l(".collapse-button:first",e).addClass("loading"),i.openBehavior(i.makeStateProcessor(n),e).done(function(){u.setState(e,u.STATE.DISPLAYED),window.Emitter.emit("collapsibleManager.stateChanged",{treeId:d(e),state:"open"})}).always(function(){a.removeClass("loading")}).then(function(){return h.setState(n)})}return s()},close:function(e){if(u.getState(e)==u.STATE.DISPLAYED)for(var t=0;t<r.length;t++){var n,a,i=r[t];if(i.test(e))return n=h.getState(),a=l(".collapse-button:first",e).addClass("loading"),i.closeBehavior(i.makeStateProcessor(n),e).done(function(){u.setState(e,u.STATE.COLLAPSED),window.Emitter.emit("collapsibleManager.stateChanged",{treeId:d(e),state:"close"})}).always(function(){a.removeClass("loading")}).then(function(){return h.setState(n)})}},allStateChange:function(e,t){function n(){return a("afterAllStateChange",[e])}return a("beforeAllStateChange",[e]).then(function(){return t?t(e):s()}).then(function(){return a("allStateChangeBehavior",[e])}).then(n,n)},update:function(){return a("updateBehavior")},removeIds:function(e){return a("removeIds",[e])},removePopularIds:function(e){return a("removePopularIds",[e])}}},LiveCategoriesProcessor:function(){var n;function a(){return l('[data-live-events-container] [data-id="container_EVENTS"]')}return{makeStateProcessor:function(e){return o(e,"ecids","ccids")},test:function(e){return e.is("[data-collapsible][data-category-treeid]")&&a().has(e).length},openBehavior:function(t,e){var n=d(e),a=l("[data-content]:first",e);return l.Page.reload("expandCategory",{data:{expandTreeId:n},allowParallelRequests:!0}).done(function(e){a.parents("[data-category-treeid]:first").replaceWith(e),t.expandIds(n)})},closeBehavior:function(e,t){var n=d(t);return l("[data-content]:first",t).empty(),e.collapseIds(n),s()},beforeAllStateChange:function(e,t){e[t?"collapseAll":"expandAll"](),n=l("[data-category-treeid] .category-header .collapse-button",a()).addClass("loading")},allStateChangeBehavior:function(e,t){var n=a();return n.length&&t&&(l("[data-category-treeId] [data-content]",n).empty(),u.setState(l("[data-category-treeId]",n),u.STATE.COLLAPSED)),s()},afterAllStateChange:function(e,t){n.removeClass("loading")},updateBehavior:function(e){return l("[name=collapseAllCategoriesCheckbox]").prop("checked",e.isAllCollapsed()),s()},removeIds:function(e,t){return e.removeIds(t),s()}}},LivePopularCategoriesProcessor:function(){var n;function a(){return l('[data-live-events-container] [data-id="container_POPULAR_EVENTS"]')}return{makeStateProcessor:function(e){return o(e,"eplcids","cplcids")},test:function(e){return e.is("[data-collapsible][data-category-treeid]")&&a().has(e).length},openBehavior:function(t,e){var n=d(e),a=l("[data-content]:first",e);return l.Page.reload("expandPopularCategory",{data:{expandTreeId:n},allowParallelRequests:!0}).done(function(e){a.parents("[data-category-treeid]:first").replaceWith(e),t.expandIds(n)})},closeBehavior:function(e,t){var n=d(t);return l("[data-content]:first",t).empty(),e.collapseIds(n),s()},beforeAllStateChange:function(e,t){e[t?"collapseAll":"expandAll"](),n=l("[data-category-treeid] .category-header .collapse-button",a()).addClass("loading")},allStateChangeBehavior:function(e,t){var n=a();return n.length&&t&&(l("[data-category-treeId] [data-content]",n).empty(),u.setState(l("[data-category-treeId]",n),u.STATE.COLLAPSED)),s()},afterAllStateChange:function(e,t){n.removeClass("loading")},updateBehavior:function(e){return l("[name=collapseAllCategoriesCheckbox]").prop("checked",e.isAllCollapsed()),s()},removePopularIds:function(e,t){return e.removeIds(t),s()}}},LiveSportsProcessor:function(){var n;function a(){return l('[data-live-events-container] [data-id="container_EVENTS"]')}return{makeStateProcessor:function(e){return o(e,"esids","csids")},test:function(e){return e.is("[data-collapsible][data-sport-treeid]")&&a().has(e).length},openBehavior:function(t,n){var a=d(n);return l.Page.reload("expandSport",{data:{expandTreeId:a},allowParallelRequests:!0}).done(function(e){l("[data-content]:first",n).html(e),t.expandIds(a)})},closeBehavior:function(e,t){var n=d(t);return l("[data-content]:first",t).empty(),e.collapseIds(n),s()},beforeAllStateChange:function(e,t){e[t?"collapseAll":"expandAll"](),n=l("[data-sport-treeid] .sport-category-header .collapse-button",a()).addClass("loading")},allStateChangeBehavior:function(e,t){var n=a();return n.length&&t&&(l("[data-sport-treeId] [data-content]",n).empty(),u.setState(l("[data-sport-treeId]",n),u.STATE.COLLAPSED)),s()},afterAllStateChange:function(e,t){n.removeClass("loading")},updateBehavior:function(e){return l("[name=collapseAllSportsCheckbox]").prop("checked",e.isAllCollapsed()),s()},removeIds:function(e,t){return e.removeIds(t),s()}}},PrematchCategoriesProcessor:function(e){return{makeStateProcessor:function(e){return o(e,"epcids","cpcids")},test:function(e){return e.is("[data-collapsible][data-category-treeid]")&&0==e.parents('#liveCategoriesContainer:first, [data-id="container_POPULAR_EVENTS"]:first').length},openBehavior:function(t,n){if(u.getState(n)==u.STATE.COLLAPSED){var a=d(n),i=l("[data-content]:first",n);if("absent"==i.data("content"))return l(".collapse-button:first",n).addClass("loading"),l.ajax({url:e(),type:"POST",data:{expandTreeId:a}}).done(function(e){i.parents("[data-category-treeid]:first").replaceWith(e),t.expandIds(a),u.setState(n,u.STATE.DISPLAYED),window.Emitter.emit("collapsibleManager.openBehavior",a)});t.expandIds(a),u.setState(n,u.STATE.DISPLAYED)}return s()},closeBehavior:function(e,t){var n;return u.getState(t)==u.STATE.DISPLAYED&&(n=d(t),e.collapseIds(n),u.setState(t,u.STATE.COLLAPSED)),s()},beforeAllStateChange:function(e,t){l(".collapse-all-categories-checkbox").addClass("loading"),e[t?"collapseAll":"expandAll"]()},allStateChangeBehavior:function(e,t){return this.updateBehavior(e)},afterAllStateChange:function(e,t){l(".collapse-all-categories-checkbox").removeClass("loading")},updateBehavior:function(e){l("[name=collapseAllCategoriesCheckbox]").prop("checked",e.isAllCollapsed());var t=this;return l('[data-collapsible][data-category-treeid]:not([data-live-events-container] [data-collapsible][data-category-treeid], [data-id="container_POPULAR_EVENTS"] [data-collapsible][data-category-treeid])').each(function(){e.isCollapsed(d(l(this)))?t.closeBehavior(e,l(this)):t.openBehavior(e,l(this))}),s()}}},PrematchPopularCategoriesProcessor:function(n,t,a,e){var i="[data-collapsible][data-category-treeid]";return{makeStateProcessor:function(e){return o(e,t,a)},test:function(e){return e.is(i)&&e.parents(n+":first").length},openBehavior:function(t,n){if(u.getState(n)==u.STATE.COLLAPSED){var a=d(n),i=l("[data-content]:first",n);if("absent"==i.data("content"))return l(".collapse-button:first",n).addClass("loading"),l.ajax({url:e(),type:"POST",data:{expandTreeId:a}}).done(function(e){i.parents("[data-category-treeid]:first").replaceWith(e),t.expandIds(a),u.setState(n,u.STATE.DISPLAYED),window.Emitter.emit("collapsibleManager.openBehavior",a)});t.expandIds(a),u.setState(n,u.STATE.DISPLAYED)}return s()},closeBehavior:function(e,t){var n;return u.getState(t)==u.STATE.DISPLAYED&&(n=d(t),e.collapseIds(n),u.setState(t,u.STATE.COLLAPSED)),s()},beforeAllStateChange:function(e,t){l(".collapse-all-categories-checkbox").addClass("loading"),e[t?"collapseAll":"expandAll"]()},allStateChangeBehavior:function(e,t){return this.updateBehavior(e)},afterAllStateChange:function(e,t){l(".collapse-all-categories-checkbox").removeClass("loading")},updateBehavior:function(e){l("[name=collapseAllCategoriesCheckbox]").prop("checked",e.isAllCollapsed());var t=this;return l(n+" "+i).each(function(){e.isCollapsed(d(l(this)))?t.closeBehavior(e,l(this)):t.openBehavior(e,l(this))}),s()}}},PrematchSportsProcessor:function(e){return{makeStateProcessor:function(e){return o(e,"epsids","cpsids")},test:function(e){return e.is("[data-collapsible][data-sport-treeid]")&&0==e.parents("#liveCategoriesContainer:first").length},openBehavior:function(t,n){if(u.getState(n)==u.STATE.COLLAPSED){var a,i=d(n),o=l("[data-content]:first",n);if("absent"==o.data("content"))return a=l(".collapse-button:first",n).addClass("loading"),l.ajax({url:e(),type:"POST",data:{expandTreeId:i}}).done(function(e){o.data("content","present").html(e),t.expandIds(i),a.removeClass("loading"),u.setState(n,u.STATE.DISPLAYED),window.Emitter.emit("collapsibleManager.openBehavior",i)});t.expandIds(i),u.setState(n,u.STATE.DISPLAYED)}return s()},closeBehavior:function(e,t){return u.getState(t)==u.STATE.DISPLAYED&&(e.collapseIds(d(t)),u.setState(t,u.STATE.COLLAPSED)),s()},beforeAllStateChange:function(e,t){l(".collapse-all-sports-checkbox").addClass("loading"),e[t?"collapseAll":"expandAll"]()},allStateChangeBehavior:function(e,t){return this.updateBehavior(e)},afterAllStateChange:function(e,t){l(".collapse-all-sports-checkbox").removeClass("loading")},updateBehavior:function(e){l("[name=collapseAllSportsCheckbox]").prop("checked",e.isAllCollapsed());var t=this;return l("[data-collapsible][data-sport-treeid]:not([data-live-events-container] [data-collapsible][data-sport-treeid])").each(function(){e.isCollapsed(d(l(this)))?t.closeBehavior(e,l(this)):t.openBehavior(e,l(this))}),s()}}},getCollapsibleState:function(){return e('[data-live-events-container] [data-id="container_EVENTS"]')},getPopularCollapsibleState:function(){return e('[data-live-events-container] [data-id="container_POPULAR_EVENTS"]')},isAllSportsCollapsed:function(){return l("[name=collapseAllSportsCheckbox]").prop("checked")},isAllCategoriesCollapsed:function(){return l("[name=collapseAllCategoriesCheckbox]").prop("checked")},CollapseControl:u}}(jQuery),function(f){window.FullCategoryManager={LIVE_FULL_CATEGORIES_PARAM_NAME:"liveFullCategoryId",FULL_CATEGORIES_PARAM_NAME:"fullCategoryIds",getLiveFullCategoryTreeId:function(){var e=f.Page.getSearchParams()[this.LIVE_FULL_CATEGORIES_PARAM_NAME];if(e&&e.length)return parseInt(e[0])},getFullCategoriesIds:function(e){var t=[],n=f.Page.getSearchParams()[e];if(n)for(var a=0;a<n.length;a++){var i=parseInt(n[a],10);isNaN(i)||t.push(i)}return t},liveToggle:function(t,e){var n,a,i=f("[data-category-treeid='"+t+"'] [data-category-events-link-container]");return i.data("loading")?f.Deferred().resolve().promise():(i.data("loading",!0),n=f.PanbetLoadingStatus.setOn(i),a=this,e(f.URLCodec.updateSearchParams(f.Page.location().href,function(e){return e[a.LIVE_FULL_CATEGORIES_PARAM_NAME]=e[a.LIVE_FULL_CATEGORIES_PARAM_NAME]?void 0:t,e})).always(function(){n.remove(),i.data("loading",!1)}))},prematchToggle:function(t,e,n){function a(e){return f(t).parents("[data-events-container-type="+e+"]").length}var i,o,r,s,l,c,d,u=f(t).parents("[data-category-treeid]:first"),h=u.data("categoryTreeid"),p=f("[data-category-events-link-container]",u);return p.data("loading")?f.Deferred().promise():(p.data("loading",!0),i=f.PanbetLoadingStatus.setOn(p),o=this.FULL_CATEGORIES_PARAM_NAME,a("SUPER_POPULAR")?(r="SUPER_POPULAR",o="superPopularFullCategoryIds"):a("POPULAR")?(r="POPULAR",o="popularFullCategoryIds"):a("SUPER_TOP")?(r="SUPER_TOP",o="superTopFullCategoryIds"):a("TOP")?(r="TOP",o="topFullCategoryIds"):a("SUPER_ZERO_MARGIN")?(r="SUPER_ZERO_MARGIN",o="superZeroMarginFullCategoryIds"):a("ZERO_MARGIN")&&(r="ZERO_MARGIN",o="zeroMarginFullCategoryIds"),l=(s=f.Page.getSearchParams())[o]||[],-1!==(c=f.inArray(""+h,l))?l.splice(c,1):l.push(h),s[o]=l,d=f.extend({},e,s,{expandTreeId:h,popularType:r}),f.Page.pushState(null,null,{search:f.URLCodec.fromObject(s)}).then(function(){return f.ajax({url:initData.base_dir+"/"+(n||"events")+"/"+(r?"expand-popular-category":initData.venuesEventType?"expand-category-day-menu":"expand-category")+".htm?"+f.URLCodec.fromObject(d),type:"POST"})}).done(function(e){u.replaceWith(e)}).always(function(){i.remove(),p.data("loading",!1)}))}}}(jQuery),function(n){window.FullCategoryLinks={STATE:{SHOW_FULL_CATEGORY:"showFullCategory",SHOW_SELECTED_EVENTS:"showSelectedEvents",HIDE:"hide"},getState:function(e){return n("[data-category-events-link-container]",e).data("state")},setState:function(e,t){e=n("[data-category-events-link-container]",e);e.data("state",t),e.removeClass("show-full-category show-selected-events"),this.STATE.SHOW_FULL_CATEGORY==t?e.addClass("show-full-category"):this.STATE.SHOW_SELECTED_EVENTS==t&&e.addClass("show-selected-events")}}}(jQuery),function(r){window.StickyTop=function(e){for(var t=0,n=(e&&(t=e),r("[data-sticky]")),a={before:[],after:[]},i=0;i<n.length;i++){var o={id:(o=r(n.get(i))).data("sticky"),$el:o,isFixed:function(){return"relative"==this.$el.css("position")},fixed:function(e,t){e?this.$el.css({position:"relative",top:t+"px","z-index":"101"}).data("stickyState"):this.$el.css({position:"","z-index":"",top:0})},getDummy:function(){var e=this.$el.prev("#"+this.id+"-dummy:first");return e.length?e:r("<div/>",{id:this.id+"-dummy"}).css({width:0,height:0}).insertBefore(this.$el)},getTop:function(){return(this.isFixed()?this.getDummy():this.$el).offset().top},getHeight:function(){return this.$el.outerHeight(!0)}};(t>=o.getTop()?a.before:a.after).push(o)}(a=function(e,t){if(e.before.length){var n=[],a=e.before.slice(0),i=e.after.slice(0),o=a.pop();for(o.delta=t-o.getTop(),t+=o.getHeight(),n.push(o);i.length;){if(!(t>i[0].getTop()))break;(o=i.shift()).delta=t-o.getTop(),t+=o.getHeight(),n.push(o)}if(n.length<3)return{fixed:n,before:a,after:i}}return e}(a,t)).fixed&&r.each(a.fixed,function(){this.fixed(!0,this.delta)}),r.each(a.before,function(){this.fixed(!1)}),r.each(a.after,function(){this.fixed(!1)})}}(jQuery),function(n){window.ScorecastManager=(_save=function(){var t={};return n("[data-selected-scorecast-code]").each(function(){var e=n(this).children(".price").not(".scorecast-hidden").data("scorecast-selection-id");null!=e&&(t[n(this).data("selected-scorecast-code")]=e)}),t},_restore=function(e){n.each(e,function(e,t){_hideScorecastSelections(e),_showScorecastSelection(t)})},_bindActions=function(){n(document).on("click","[data-scorecast-selection]",function(){_hideScorecastSelections(n(this).data("scorecast-code")),_showScorecastSelection(n(this).data("scorecast-selection-id")),_hidePlayersLinks()}),n(document).on("click","[data-selection-link]",function(){_refreshMenuBars(),_hideScorecastSelections(n(this).data("scorecast-code")),_showScorecastSelection(n(this).data("scorecast-selection-id")),_hidePlayersLinks()}),n(document).on("click","[data-plus-players]",function(){_refreshMenuBars(),_hidePlayersLinks(),_showPlayersLink(n(this).data("scorecast-code"))})},_hideScorecastSelections=function(e){n("[data-selected-scorecast-code='"+e+"'] div[data-scorecast-selection-id]").addClass("scorecast-hidden")},_showScorecastSelection=function(e){n(".scorecast-selections-holder [data-scorecast-selection-id='"+e+"']").removeClass("scorecast-hidden")},_showPlayersLink=function(e){n("#players-links-"+e).show()},_hidePlayersLinks=function(){n("div[id ^= 'players-links-']").hide()},_refreshMenuBars=function(){n("[data-selection-link='true']").removeClass("price-highlighted"),n("[data-selection-link='true']").has(".price-highlighted").addClass("price-highlighted")},_markerActivePlayerLinks=function(){n(document).on("mouseenter",".players-links a",function(){n(this).addClass("active-scorer")}),n(document).on("mouseleave",".players-links a",function(){n(this).removeClass("active-scorer")}),n(document).on("mouseleave","div[id ^= 'players-links-']",function(){n(this).hide()})},{save:_save,restore:_restore,bindActions:_bindActions,markerActivePlayerLinks:_markerActivePlayerLinks}),document.addEventListener("client.loaded",function(){window.ScorecastManager.bindActions(),window.ScorecastManager.markerActivePlayerLinks()})}(window.jQuery),jQuery,window.EventsHelper={getLiveEventPagePath:function(e){return initData.base_dir+"/live/"+e}},window.PanbetPunterBalance={parseBalanceValue:function(t){try{return parseFloat((t+"").replace(/,/g,""))}catch(e){window.Log.getLogger().debug("Can`t parse balance value:",t,e)}return null},formatFloat:function(t){try{return t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(e){window.Log.getLogger().debug("Can`t format float value:",t,e)}return null},getBalanceValue:function(e){return e&&e.length?this.parseBalanceValue(e.data("punterBalanceValue")):null},updateBalance:function(e,t,n){var a,i=n.loggerName,o=window.Log.getLogger(i),r=n.containerId;"function"==typeof n.onBalanceUpdated&&(a=n.onBalanceUpdated);n=this;var s,l,c,r=$("#"+r+" [data-punter-balance-type='"+e+"']");r.length&&null!=(t=this.parseBalanceValue(t))&&this.getBalanceValue(r)!=t&&(s=r,l=t,c=e,(l=n.formatFloat(l))&&(s.html(l),s.data("punterBalanceValue",l),o.debug([i,"new",c,"balance value",l])),a)&&a(r,t,e)}},jQuery,window.PunterBalanceRefreshSubscriber={subscribe:function(t){var n=t.loggerName,a=window.Log.getLogger(n),e=t.enabled;a.debug(n,"enabled",e),e&&StompManager.subscribe(t.destination,function(e){e=JSON.parse(e.body);a.debug(n,"onMessage() callback receive data",e),e&&e.type&&e.balance&&window.PanbetPunterBalance.updateBalance(e.type,e.balance,t)})}},jQuery,window.LoyaltyClubHelpLinkHandler={onClick:function(e,t,n,a){e.stopPropagation();e=t.data("loyaltyHelpLink"),t="/"==e.substring(0,1)?n+e:n+"/"+e;a&&(-1<t.indexOf("?")?t+="&"+a:t+="?"+a),showHelpForURL(t)}},function(){var e=document.querySelector(".header__nav-bar");if(e){for(var t=0,n=0;a=e.children[n];n++)t+=a.clientWidth;if(e.clientWidth>t)e.lastElementChild.style.display="none",e.classList.add("header__nav-bar_centered");else for(var a,i=e.clientWidth-t,n=e.childElementCount-2;0<=n&&!(0<i);n--)try{i+=(a=e.children[n]).clientWidth,a.style.display="none"}catch(e){console.log(e,"Header re-flow bug")}e.style.opacity="1"}}(),(LoginDialogSessionStorageFacade=LoginDialogSessionStorageFacade||{}).Controller=function(){var t="showLoginDialogInfo";this.setShowLoginDialogInfo=function(e){sessionStorage.setItem(t,JSON.stringify({showLoginDialog:!0,reason:e}))},this.getAndRemoveShowLoginDialogInfo=function(){var e=sessionStorage.getItem(t);return sessionStorage.removeItem(t),e?JSON.parse(e):null}},LoginDialogSessionStorageFacade.controller=new LoginDialogSessionStorageFacade.Controller;var LOCAL_STORAGE_REFRESH_TOKEN_KEY="rt",RT_EXIST_COOKIE_NAME="RT_EXIST",REFRESH_JWT_TOKENS_REQUEST_LOCK_KEY="refreshJWTTokensRequestLock",REFRESH_JWT_TOKENS_REQUEST_LOCK_TTL=15e3;function lockRefreshJWTTokensRequest(){window.localStorage.setItem(REFRESH_JWT_TOKENS_REQUEST_LOCK_KEY,JSON.stringify({tabUuid:getCurrentTabUuid(),expire:Date.now()+REFRESH_JWT_TOKENS_REQUEST_LOCK_TTL}))}function unlockRefreshJWTTokensRequest(){window.localStorage.removeItem(REFRESH_JWT_TOKENS_REQUEST_LOCK_KEY)}function getLockRefreshJWTTokensRequestTabUuid(){var e=JSON.parse(window.localStorage.getItem(REFRESH_JWT_TOKENS_REQUEST_LOCK_KEY));return e&&(!e.expire||e.expire<=Date.now())?(unlockRefreshJWTTokensRequest(),null):e?e.tabUuid:null}function hasLockRefreshJWTTokensRequest(){return null!=getLockRefreshJWTTokensRequestTabUuid()}function isCurrentTabLockRefreshJWTTokensRequest(){return getLockRefreshJWTTokensRequestTabUuid()===getCurrentTabUuid()}function getRefreshToken(){var e=window.localStorage.getItem(LOCAL_STORAGE_REFRESH_TOKEN_KEY);if(!e)return null;try{var t,n,a,i=e.split(".");return i&&3===i.length?!(t=i[1])||(a=(n=JSON.parse(atob(t)))&&n.exp||0,Date.now()>=1e3*a)?(removeRefreshToken(),null):e:(removeRefreshToken(),null)}catch(e){return removeRefreshToken(),null}}function setRefreshToken(e){window.localStorage.setItem(LOCAL_STORAGE_REFRESH_TOKEN_KEY,e)}function removeRefreshToken(){window.localStorage.removeItem(LOCAL_STORAGE_REFRESH_TOKEN_KEY),document.cookie=RT_EXIST_COOKIE_NAME+"=;max-age=0;path=/"}var RefreshTokenUtils=function(){var e="refreshJWTTokensResultBroadcastChannel",n=new BroadcastChannel(e),o="INVALID_REFRESH_TOKEN";var a=null;function i(){var e,t=getRefreshToken();return t?(a||(e=t,a=new Promise(function(t,n){var a;if(!hasLockRefreshJWTTokensRequest()||isCurrentTabLockRefreshJWTTokensRequest())return lockRefreshJWTTokensRequest(),window.httpClient.post("/react/auth/refreshJWTTokens",window.convertToFormData({refreshToken:e})).then(function(e){e.errorCode!==o?t(e):n({errorCode:e.errorCode})}).catch(function(e){n({failReason:e})}).finally(unlockRefreshJWTTokensRequest);function i(e){e.key===REFRESH_JWT_TOKENS_REQUEST_LOCK_KEY&&null===e.newValue&&(window.removeEventListener("storage",i),a())}window.addEventListener("storage",(a=t,i))}).then(r).catch(function(e){return e.errorCode===o&&removeRefreshToken(),Promise.reject(e)}).finally(function(){a=null})),a):(a=null,Promise.reject({errorCode:o}))}function r(e){try{var t=e.payload;window.initData.timeout=t.sessionExpire,window.Emitter.emit("refreshJWTTokensSuccess",t.punterLogoutChangesPath),n.postMessage(t)}catch(e){console.error("Error refresh JWT tokens: ",e)}return e}return{REFRESH_JWT_TOKENS_RESULT_BROADCAST_CHANNEL_NAME:e,initRefreshJWTTokens:function(){var t=Date.now()+initData.timeout;n.onmessage=function(e){e=e.data;e&&0<e.sessionExpire&&(t=Date.now()+e.sessionExpire)},setInterval(function(){Date.now()<t-initData.refreshAccessTokenTimeBeforeExpire||i().then(function(e){e&&e.payload&&0<e.payload.sessionExpire&&(t=Date.now()+e.payload.sessionExpire)}).catch(function(e){(e?e.errorCode:null)===o&&window.Emitter.emit("logout")})},initData.checkRefreshJWTTokensInterval)},tryRestoreLoginSession:i}}();
//# sourceMappingURL=panbet.map